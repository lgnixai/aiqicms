(self.webpackChunkAnQiCMS=self.webpackChunkAnQiCMS||[]).push([[9151],{85606:function(b,I,e){"use strict";var S=e(48305),l=e.n(S),s=e(75304),p=e(22683),_=e(96570),u=e(75271),D=e(52676),E=function(d){var c=(0,u.useState)(void 0),o=l()(c,2),m=o[0],W=o[1],R=(0,u.useState)(""),A=l()(R,2),K=A[0],O=A[1],F=function(){(0,s.roP)({type:"multi"}).then(function(M){var v=(M.data||[]).map(function(y){return{key:y.id,tab:y.name,is_main:y.is_main}});W(v);var h=(0,p.KJ)("sub-site-id");!h&&v.length>0&&(h=v[0].key+"");var g=v.find(function(y){return y.key===Number(h)}),P=!1;g&&(P=!0,g.is_main&&(P=!1)),(0,p.Xq)("is-sub-site",P),O(h)})};(0,u.useEffect)(function(){F()},[]);var n=function(M){var v;O(M),(0,p.Xq)("sub-site-id",M);var h=m.find(function(P){return P.key===Number(M)}),g=!0;h.is_main&&(g=!1),(0,p.Xq)("is-sub-site",g),(v=d.onTabChange)===null||v===void 0||v.call(d,M,g)};return(0,D.jsx)(_._z,{tabList:m,tabActiveKey:K,onTabChange:n,title:d.title,children:d.children})};I.Z=E},84700:function(b,I,e){"use strict";e.r(I);var S=e(90228),l=e.n(S),s=e(335),p=e.n(s),_=e(87999),u=e.n(_),D=e(48305),E=e.n(D),T=e(85606),d=e(1812),c=e(16621),o=e(18640),m=e(32064),W=e(54203),R=e(34206),A=e(53745),K=e(47634),O=e(75271),F=e(32639),n=e(52676),U={},M=function(){var h=(0,O.useRef)(),g=(0,O.useState)([]),P=E()(g,2),y=P[0],N=P[1],G=(0,O.useState)(""),z=E()(G,2),Q=z[0],J=z[1],V=(0,O.useState)(!1),$=E()(V,2),Y=$[0],q=$[1],i=(0,m.useIntl)(),ee=function(a,r){J(a),q(r)},w=function(){var f=u()(l()().mark(function a(r){return l()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:W.Z.confirm({title:i.formatMessage({id:"content.page.delete.confirm"}),onOk:function(){var ne=u()(l()().mark(function re(){var x,B,Z,L,H,X;return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(x=R.ZP.loading(i.formatMessage({id:"content.delete.deletting"}),0),r){t.next=3;break}return t.abrupt("return",!0);case 3:t.prev=3,L=p()(r),t.prev=5,L.s();case 7:if((H=L.n()).done){t.next=13;break}return X=H.value,t.next=11,(0,d.uu)({id:X});case 11:t.next=7;break;case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(5),L.e(t.t0);case 18:return t.prev=18,L.f(),t.finish(18);case 21:return x(),R.ZP.success(i.formatMessage({id:"content.delete.success"})),N([]),(B=h.current)===null||B===void 0||(Z=B.reloadAndRest)===null||Z===void 0||Z.call(B),t.abrupt("return",!0);case 28:return t.prev=28,t.t1=t.catch(3),x(),R.ZP.error(i.formatMessage({id:"content.delete.failure"})),t.abrupt("return",!0);case 33:case"end":return t.stop()}},re,null,[[3,28],[5,15,18,21]])}));function ae(){return ne.apply(this,arguments)}return ae}()});case 1:case"end":return C.stop()}},a)}));return function(r){return f.apply(this,arguments)}}(),k=function(){var f=u()(l()().mark(function a(r){return l()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:m.history.push("/archive/page/detail?id="+(r.id||"new"));case 1:case"end":return C.stop()}},a)}));return function(r){return f.apply(this,arguments)}}(),te=[{title:"ID",dataIndex:"id",hideInSearch:!0},{title:i.formatMessage({id:"content.sort.name"}),dataIndex:"sort",hideInSearch:!0},{title:i.formatMessage({id:"content.page.name"}),dataIndex:"title",hideInSearch:!0,render:function(a,r){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"spacer",dangerouslySetInnerHTML:{__html:r.spacer}}),(0,n.jsx)("a",{href:r.link,target:"_blank",children:a})]})}},{title:i.formatMessage({id:"content.page.template.name"}),dataIndex:"template",hideInSearch:!0},{title:i.formatMessage({id:"content.category.status"}),dataIndex:"status",hideInSearch:!0,valueEnum:{0:{text:i.formatMessage({id:"content.category.status.hide"}),status:"Default"},1:{text:i.formatMessage({id:"content.category.status.ok"}),status:"Success"}}},{title:i.formatMessage({id:"setting.action"}),dataIndex:"option",valueType:"option",render:function(a,r){return(0,n.jsxs)(A.Z,{size:20,children:[(0,n.jsx)("a",{onClick:function(){k(r)},children:(0,n.jsx)(m.FormattedMessage,{id:"setting.action.edit"})},"edit"),(0,n.jsx)("a",{className:"text-red",onClick:function(){w([r.id])},children:(0,n.jsx)(m.FormattedMessage,{id:"setting.system.delete"})},"delete")]})}}];return(0,n.jsx)(T.Z,{onTabChange:ee,children:(0,n.jsx)(o.Z,{headerTitle:i.formatMessage({id:"menu.archive.page"}),actionRef:h,rowKey:"id",search:!1,toolBarRender:function(){return[!Y&&(0,n.jsxs)(K.ZP,{type:"primary",onClick:function(){k({status:1})},children:[(0,n.jsx)(c.Z,{})," ",(0,n.jsx)(m.FormattedMessage,{id:"content.page.new"})]},"add")]},tableAlertOptionRender:function(a){var r=a.selectedRowKeys,j=a.onCleanSelected;return(0,n.jsxs)(A.Z,{children:[(0,n.jsx)(K.ZP,{size:"small",onClick:function(){w(r)},children:(0,n.jsx)(m.FormattedMessage,{id:"content.option.batch-delete"})}),(0,n.jsx)(K.ZP,{type:"link",size:"small",onClick:j,children:(0,n.jsx)(m.FormattedMessage,{id:"content.option.cancel-select"})})]})},request:function(a){return a.type=3,U=a,(0,d.CP)(a)},columnsState:{persistenceKey:"page-table",persistenceType:"localStorage"},columns:te,rowSelection:{onChange:function(a){N(a)}},pagination:{showSizeChanger:!0,defaultCurrent:U.current,defaultPageSize:U.pageSize}},Q)})};I.default=M},32639:function(){"use strict"},335:function(b,I,e){var S=e(31479);function l(s,p){var _=typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(!_){if(Array.isArray(s)||(_=S(s))||p&&s&&typeof s.length=="number"){_&&(s=_);var u=0,D=function(){};return{s:D,n:function(){return u>=s.length?{done:!0}:{done:!1,value:s[u++]}},e:function(o){throw o},f:D}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var E=!0,T=!1,d;return{s:function(){_=_.call(s)},n:function(){var o=_.next();return E=o.done,o},e:function(o){T=!0,d=o},f:function(){try{!E&&_.return!=null&&_.return()}finally{if(T)throw d}}}}b.exports=l,b.exports.__esModule=!0,b.exports.default=b.exports}}]);
