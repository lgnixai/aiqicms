"use strict";(self.webpackChunkAnQiCMS=self.webpackChunkAnQiCMS||[]).push([[8162],{85606:function(B,j,n){var A=n(48305),u=n.n(A),U=n(75304),g=n(22683),y=n(96570),b=n(75271),p=n(52676),R=function(i){var K=(0,b.useState)(void 0),_=u()(K,2),m=_[0],L=_[1],d=(0,b.useState)(""),f=u()(d,2),O=f[0],S=f[1],E=function(){(0,U.roP)({type:"multi"}).then(function(r){var o=(r.data||[]).map(function(D){return{key:D.id,tab:D.name,is_main:D.is_main}});L(o);var c=(0,g.KJ)("sub-site-id");!c&&o.length>0&&(c=o[0].key+"");var x=o.find(function(D){return D.key===Number(c)}),P=!1;x&&(P=!0,x.is_main&&(P=!1)),(0,g.Xq)("is-sub-site",P),S(c)})};(0,b.useEffect)(function(){E()},[]);var M=function(r){var o;S(r),(0,g.Xq)("sub-site-id",r);var c=m.find(function(P){return P.key===Number(r)}),x=!0;c.is_main&&(x=!1),(0,g.Xq)("is-sub-site",x),(o=i.onTabChange)===null||o===void 0||o.call(i,r,x)};return(0,p.jsx)(y._z,{tabList:m,tabActiveKey:O,onTabChange:M,title:i.title,children:i.children})};j.Z=R},17361:function(B,j,n){var A=n(48305),u=n.n(A),U=n(54203),g=n(75271),y=n(99944),b=n(76979),p=n(52676),R=function(i){var K=(0,g.useState)(!1),_=u()(K,2),m=_[0],L=_[1],d=(0,g.useState)([]),f=u()(d,2),O=f[0],S=f[1],E=function(o){if(i.manual){var c;(c=i.onCancel)===null||c===void 0||c.call(i,o)}else L(o)},M=function(o){i.multiple?S(o):(i.onSelect(o),E(!1))},t=function(){i.multiple&&i.onSelect(O),E(!1)};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{style:{display:"inline-block"},onClick:function(){E(!m)},children:i.children}),(0,p.jsx)(U.Z,{className:"material-modal",width:800,open:i.manual?i.open:m,onCancel:function(){E(!1)},onOk:function(){t()},children:(0,p.jsx)(y.Z,{multiple:i.multiple,onSelect:function(o){M(o)}})})]})};j.Z=R},16618:function(B,j,n){n.r(j);var A=n(90228),u=n.n(A),U=n(87999),g=n.n(U),y=n(48305),b=n.n(y),p=n(17361),R=n(85606),T=n(5933),i=n(16621),K=n(74133),_=n(76334),m=n(96640),L=n(60409),d=n(32064),f=n(34206),O=n(54203),S=n(91827),E=n(47634),M=n(75271),t=n(52676),r=function(){var c=(0,M.useState)(null),x=b()(c,2),P=x[0],D=x[1],Q=(0,M.useState)(""),w=b()(Q,2),W=w[0],I=w[1],V=(0,M.useState)(0),N=b()(V,2),$=N[0],z=N[1],H=(0,M.useState)(0),F=b()(H,2),J=F[0],G=F[1],Y=(0,M.useState)(""),k=b()(Y,2),q=k[0],ee=k[1],e=(0,d.useIntl)(),X=function(){var h=g()(u()().mark(function a(){var s,l;return u()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,T.Zy)();case 2:s=v.sent,l=s.data||null,I((l==null?void 0:l.default_thumb)||""),z((l==null?void 0:l.resize_image)||0),G((l==null?void 0:l.use_webp)||0),D(l);case 8:case"end":return v.stop()}},a)}));return function(){return h.apply(this,arguments)}}(),te=function(a){X().then(function(){ee(a)})};(0,M.useEffect)(function(){X()},[]);var ne=function(a){I(a.logo),f.ZP.success(e.formatMessage({id:"setting.system.upload-success"}))},se=function(a){a.stopPropagation(),O.Z.confirm({title:e.formatMessage({id:"setting.system.confirm-delete"}),onOk:function(){var s=g()(u()().mark(function Z(){return u()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:I("");case 1:case"end":return C.stop()}},Z)}));function l(){return s.apply(this,arguments)}return l}()})},ae=function(){O.Z.confirm({title:e.formatMessage({id:"setting.content.confirm-convert-webp"}),content:e.formatMessage({id:"setting.content.confirm-convert-webp.content"}),onOk:function(){(0,T.jw)({}).then(function(s){f.ZP.info(s.msg)})}})},ie=function(){O.Z.confirm({title:e.formatMessage({id:"setting.content.confirm-thumbnal"}),content:e.formatMessage({id:"setting.content.confirm-thumbnal.content"}),onOk:function(){(0,T.nd)({}).then(function(s){f.ZP.info(s.msg)})}})},oe=function(){var h=g()(u()().mark(function a(s){var l;return u()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:s.default_thumb=W,s.filter_outlink=Number(s.filter_outlink),s.url_token_type=Number(s.url_token_type),s.remote_download=Number(s.remote_download),s.resize_image=Number(s.resize_image),s.resize_width=Number(s.resize_width),s.thumb_crop=Number(s.thumb_crop),s.thumb_width=Number(s.thumb_width),s.thumb_height=Number(s.thumb_height),s.quality=Number(s.quality),s.use_sort=Number(s.use_sort),s.max_page=Number(s.max_page),s.max_limit=Number(s.max_limit),l=f.ZP.loading(e.formatMessage({id:"setting.system.submitting"}),0),(0,T.xH)(s).then(function(C){f.ZP.success(C.msg)}).catch(function(C){console.log(C)}).finally(function(){l()});case 15:case"end":return v.stop()}},a)}));return function(s){return h.apply(this,arguments)}}();return(0,t.jsx)(R.Z,{onTabChange:function(a){return te(a)},children:(0,t.jsx)(S.Z,{children:P&&(0,t.jsxs)(K.A,{initialValues:P,onFinish:oe,title:e.formatMessage({id:"menu.setting.content"}),children:[(0,t.jsx)(_.Z.Group,{name:"editor",label:e.formatMessage({id:"setting.content.editor"}),options:[{value:"",label:e.formatMessage({id:"setting.content.editor.fulltext"})},{value:"markdown",label:e.formatMessage({id:"setting.content.editor.markdown"})}],extra:e.formatMessage({id:"setting.content.editor.description"})}),(0,t.jsx)(_.Z.Group,{name:"remote_download",label:e.formatMessage({id:"setting.content.remote-download"}),options:[{value:0,label:e.formatMessage({id:"setting.content.notenable"})},{value:1,label:e.formatMessage({id:"setting.content.enable"})}]}),(0,t.jsx)(_.Z.Group,{name:"filter_outlink",label:e.formatMessage({id:"setting.content.outlink-filter"}),options:[{value:0,label:e.formatMessage({id:"setting.content.outlink-filter.allow"})},{value:1,label:e.formatMessage({id:"setting.content.outlink-filter.remove"})},{value:2,label:e.formatMessage({id:"setting.content.outlink-filter.nofollow"})}]}),(0,t.jsx)(_.Z.Group,{name:"url_token_type",label:e.formatMessage({id:"setting.content.urltoken"}),options:[{value:0,label:e.formatMessage({id:"setting.content.urltoken.long"})},{value:1,label:e.formatMessage({id:"setting.content.urltoken.short"})}],extra:e.formatMessage({id:"setting.content.urltoken.description"})}),(0,t.jsx)(_.Z.Group,{name:"multi_category",label:e.formatMessage({id:"setting.content.multi-category"}),options:[{value:0,label:e.formatMessage({id:"setting.content.notenable"})},{value:1,label:e.formatMessage({id:"setting.content.enable"})}],extra:e.formatMessage({id:"setting.content.multi-category.description"})}),(0,t.jsx)(_.Z.Group,{name:"use_sort",label:e.formatMessage({id:"setting.content.archive-sort"}),options:[{value:0,label:e.formatMessage({id:"setting.content.notenable"})},{value:1,label:e.formatMessage({id:"setting.content.enable"})}],extra:e.formatMessage({id:"setting.content.archive-sort.description"})}),(0,t.jsx)(m.Z,{name:"max_page",label:e.formatMessage({id:"setting.content.max-page"}),width:"lg",placeholder:e.formatMessage({id:"setting.content.max-page.placeholder"}),fieldProps:{suffix:e.formatMessage({id:"setting.content.max-page.suffix"})},extra:e.formatMessage({id:"setting.content.max-page.description"})}),(0,t.jsx)(m.Z,{name:"max_limit",label:e.formatMessage({id:"setting.content.max-limit"}),width:"lg",placeholder:e.formatMessage({id:"setting.content.max-limit.placeholder"}),fieldProps:{suffix:e.formatMessage({id:"setting.content.max-limit.suffix"})},extra:e.formatMessage({id:"setting.content.max-limit.description"})}),(0,t.jsx)(_.Z.Group,{name:"use_webp",label:e.formatMessage({id:"setting.content.use-webp"}),options:[{value:0,label:e.formatMessage({id:"setting.content.notenable"})},{value:1,label:e.formatMessage({id:"setting.content.enable"})}],fieldProps:{onChange:function(a){G(a.target.value)}},extra:(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{children:(0,t.jsx)(d.FormattedMessage,{id:"setting.content.use-webp.description"})}),(0,t.jsxs)("span",{children:[(0,t.jsx)(d.FormattedMessage,{id:"setting.content.use-webp.description.tips"}),(0,t.jsx)(E.ZP,{size:"small",onClick:ae,children:(0,t.jsx)(d.FormattedMessage,{id:"setting.content.use-webp.description.convert"})})]})]})}),J===1&&(0,t.jsx)(_.Z.Group,{name:"convert_gif",label:e.formatMessage({id:"setting.content.convert-gif"}),options:[{value:0,label:e.formatMessage({id:"setting.content.notenable"})},{value:1,label:e.formatMessage({id:"setting.content.enable"})}],extra:(0,t.jsx)("div",{children:(0,t.jsx)("span",{children:(0,t.jsx)(d.FormattedMessage,{id:"setting.content.convert-gif.description"})})})}),(0,t.jsx)(m.Z,{name:"quality",label:e.formatMessage({id:"setting.content.quality"}),width:"lg",placeholder:e.formatMessage({id:"setting.content.quality.placeholder"}),fieldProps:{suffix:"%"},extra:e.formatMessage({id:"setting.content.quality.description"})}),(0,t.jsx)(_.Z.Group,{name:"resize_image",label:e.formatMessage({id:"setting.content.resize-image"}),fieldProps:{onChange:function(a){z(a.target.value)}},options:[{value:0,label:e.formatMessage({id:"setting.content.notenable"})},{value:1,label:e.formatMessage({id:"setting.content.enable"})}]}),$===1&&(0,t.jsx)(m.Z,{name:"resize_width",label:e.formatMessage({id:"setting.content.resize-width"}),width:"lg",placeholder:e.formatMessage({id:"setting.content.resize-width.placeholder"}),fieldProps:{suffix:e.formatMessage({id:"setting.content.resize-width.suffix"})}}),(0,t.jsx)(_.Z.Group,{name:"thumb_crop",label:e.formatMessage({id:"setting.content.thumb-crop"}),options:[{value:0,label:e.formatMessage({id:"setting.content.thumb-crop.bylong"})},{value:1,label:e.formatMessage({id:"setting.content.thumb-crop.byshort"})},{value:2,label:e.formatMessage({id:"setting.content.thumb-crop.short-crop"})}]}),(0,t.jsxs)(L.UW,{title:e.formatMessage({id:"setting.content.thumb-size"}),children:[(0,t.jsx)(m.Z,{name:"thumb_width",width:"sm",fieldProps:{suffix:e.formatMessage({id:"setting.content.thumb-size.width"})}}),"\xD7",(0,t.jsx)(m.Z,{name:"thumb_height",width:"sm",fieldProps:{suffix:e.formatMessage({id:"setting.content.thumb-size.height"})}})]}),(0,t.jsx)("div",{className:"text-muted mb-normal",children:(0,t.jsxs)("span",{children:[(0,t.jsx)(d.FormattedMessage,{id:"setting.system.thumb-size.tips"}),(0,t.jsx)(E.ZP,{size:"small",onClick:ie,children:(0,t.jsx)(d.FormattedMessage,{id:"setting.content.make-thumb"})})]})}),(0,t.jsx)(m.Z,{label:e.formatMessage({id:"setting.content.default-thumb"}),width:"lg",extra:e.formatMessage({id:"setting.content.default-thumb.description"}),children:(0,t.jsx)(p.Z,{onSelect:ne,open:!1,children:(0,t.jsx)("div",{className:"ant-upload-item",children:W?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("img",{src:W,style:{width:"100%"}}),(0,t.jsx)("a",{className:"delete",onClick:se,children:(0,t.jsx)(d.FormattedMessage,{id:"setting.system.delete"})})]}):(0,t.jsxs)("div",{className:"add",children:[(0,t.jsx)(i.Z,{}),(0,t.jsx)("div",{style:{marginTop:8},children:(0,t.jsx)(d.FormattedMessage,{id:"setting.system.upload"})})]})})})})]})},q)})};j.default=r}}]);
