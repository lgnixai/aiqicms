"use strict";(self.webpackChunkAnQiCMS=self.webpackChunkAnQiCMS||[]).push([[8774],{56534:function(me,V,r){var o=r(18201),R=r(66342),Z=r(59831),n=r(37697),T=r(75271),v=r(73428),b=r(31945),j=r(52676),O=["options","fieldProps","proFieldProps","valueEnum"],g=T.forwardRef(function(C,M){var u=C.options,B=C.fieldProps,$=C.proFieldProps,c=C.valueEnum,L=(0,R.Z)(C,O);return(0,j.jsx)(b.Z,(0,o.Z)({ref:M,valueType:"checkbox",valueEnum:(0,Z.h)(c,void 0),fieldProps:(0,o.Z)({options:u},B),lightProps:(0,o.Z)({labelFormatter:function(){return(0,j.jsx)(b.Z,(0,o.Z)({ref:M,valueType:"checkbox",mode:"read",valueEnum:(0,Z.h)(c,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,o.Z)({options:u},B),proFieldProps:$},L))}},L.lightProps),proFieldProps:$},L))}),J=T.forwardRef(function(C,M){var u=C.fieldProps,B=C.children;return(0,j.jsx)(n.Z,(0,o.Z)((0,o.Z)({ref:M},u),{},{children:B}))}),K=(0,v.G)(J,{valuePropName:"checked"}),W=K;W.Group=g,V.Z=W},25208:function(me,V,r){r.d(V,{Z:function(){return ve}});var o=r(18201),R=r(66342),Z=r(75271),n=r(38465),T=r(31945),v=r(52676),b=["proFieldProps","fieldProps"],j="date",O=Z.forwardRef(function(E,q){var ee=E.proFieldProps,N=E.fieldProps,G=(0,R.Z)(E,b),re=(0,Z.useContext)(n.Z);return(0,v.jsx)(T.Z,(0,o.Z)({ref:q,valueType:j,fieldProps:(0,o.Z)({getPopupContainer:re.getPopupContainer},N),proFieldProps:ee,filedConfig:{valueType:j,customLightMode:!0}},G))}),g=O,J=["proFieldProps","fieldProps"],K="dateMonth",W=Z.forwardRef(function(E,q){var ee=E.proFieldProps,N=E.fieldProps,G=(0,R.Z)(E,J),re=(0,Z.useContext)(n.Z);return(0,v.jsx)(T.Z,(0,o.Z)({ref:q,valueType:K,fieldProps:(0,o.Z)({getPopupContainer:re.getPopupContainer},N),proFieldProps:ee,filedConfig:{valueType:K,customLightMode:!0}},G))}),C=W,M=["fieldProps"],u="dateQuarter",B=Z.forwardRef(function(E,q){var ee=E.fieldProps,N=(0,R.Z)(E,M),G=(0,Z.useContext)(n.Z);return(0,v.jsx)(T.Z,(0,o.Z)({ref:q,valueType:u,fieldProps:(0,o.Z)({getPopupContainer:G.getPopupContainer},ee),filedConfig:{valueType:u,customLightMode:!0}},N))}),$=B,c=["proFieldProps","fieldProps"],L="dateWeek",S=Z.forwardRef(function(E,q){var ee=E.proFieldProps,N=E.fieldProps,G=(0,R.Z)(E,c),re=(0,Z.useContext)(n.Z);return(0,v.jsx)(T.Z,(0,o.Z)({ref:q,valueType:L,fieldProps:(0,o.Z)({getPopupContainer:re.getPopupContainer},N),proFieldProps:ee,filedConfig:{valueType:L,customLightMode:!0}},G))}),A=S,I=["proFieldProps","fieldProps"],x="dateYear",e=Z.forwardRef(function(E,q){var ee=E.proFieldProps,N=E.fieldProps,G=(0,R.Z)(E,I),re=(0,Z.useContext)(n.Z);return(0,v.jsx)(T.Z,(0,o.Z)({ref:q,valueType:x,fieldProps:(0,o.Z)({getPopupContainer:re.getPopupContainer},N),proFieldProps:ee,filedConfig:{valueType:x,customLightMode:!0}},G))}),oe=e,Q=g;Q.Week=A,Q.Month=C,Q.Quarter=$,Q.Year=oe,Q.displayName="ProFormComponent";var ve=Q},71384:function(me,V,r){var o=r(18201),R=r(66342),Z=r(75271),n=r(31945),T=r(52676),v=["fieldProps","min","proFieldProps","max"],b=function(g,J){var K=g.fieldProps,W=g.min,C=g.proFieldProps,M=g.max,u=(0,R.Z)(g,v);return(0,T.jsx)(n.Z,(0,o.Z)({valueType:"digit",fieldProps:(0,o.Z)({min:W,max:M},K),ref:J,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:C},u))},j=Z.forwardRef(b);V.Z=j},41265:function(me,V,r){var o=r(18201),R=r(66342),Z=r(59831),n=r(75271),T=r(38465),v=r(31945),b=r(52676),j=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],O=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],g=function(u,B){var $=u.fieldProps,c=u.children,L=u.params,S=u.proFieldProps,A=u.mode,I=u.valueEnum,x=u.request,e=u.showSearch,oe=u.options,Q=(0,R.Z)(u,j),ve=(0,n.useContext)(T.Z);return(0,b.jsx)(v.Z,(0,o.Z)((0,o.Z)({valueEnum:(0,Z.h)(I),request:x,params:L,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,o.Z)({options:oe,mode:A,showSearch:e,getPopupContainer:ve.getPopupContainer},$),ref:B,proFieldProps:S},Q),{},{children:c}))},J=n.forwardRef(function(M,u){var B=M.fieldProps,$=M.children,c=M.params,L=M.proFieldProps,S=M.mode,A=M.valueEnum,I=M.request,x=M.options,e=(0,R.Z)(M,O),oe=(0,o.Z)({options:x,mode:S||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},B),Q=(0,n.useContext)(T.Z);return(0,b.jsx)(v.Z,(0,o.Z)((0,o.Z)({valueEnum:(0,Z.h)(A),request:I,params:c,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,o.Z)({getPopupContainer:Q.getPopupContainer},oe),ref:u,proFieldProps:L},e),{},{children:$}))}),K=n.forwardRef(g),W=J,C=K;C.SearchSelect=W,C.displayName="ProFormComponent",V.Z=C},17361:function(me,V,r){var o=r(48305),R=r.n(o),Z=r(54203),n=r(75271),T=r(99944),v=r(76979),b=r(52676),j=function(g){var J=(0,n.useState)(!1),K=R()(J,2),W=K[0],C=K[1],M=(0,n.useState)([]),u=R()(M,2),B=u[0],$=u[1],c=function(I){if(g.manual){var x;(x=g.onCancel)===null||x===void 0||x.call(g,I)}else C(I)},L=function(I){g.multiple?$(I):(g.onSelect(I),c(!1))},S=function(){g.multiple&&g.onSelect(B),c(!1)};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{style:{display:"inline-block"},onClick:function(){c(!W)},children:g.children}),(0,b.jsx)(Z.Z,{className:"material-modal",width:800,open:g.manual?g.open:W,onCancel:function(){c(!1)},onOk:function(){S()},children:(0,b.jsx)(T.Z,{multiple:g.multiple,onSelect:function(I){L(I)}})})]})};V.Z=j},36374:function(me,V,r){r.r(V),r.d(V,{default:function(){return De}});var o=r(26068),R=r.n(o),Z=r(90228),n=r.n(Z),T=r(87999),v=r.n(T),b=r(48305),j=r.n(b),O=r(75304),g=r(41265),J=r(96570),K=r(18640),W=r(54203),C=r(34206),M=r(53745),u=r(47634),B=r(16483),$=r.n(B),c=r(75271),L=r(35937),S=r(96640),A=r(76334),I=r(66857),x=r(32064),e=r(52676),oe=function(z){var Y=(0,c.useRef)(),H=(0,c.useState)(!1),ue=j()(H,2),se=ue[0],ce=ue[1],fe=(0,c.useState)(!1),de=j()(fe,2),te=de[0],f=de[1],ne=(0,c.useState)({}),pe=j()(ne,2),le=pe[0],U=pe[1],ge=(0,c.useState)({fields:[]}),h=j()(ge,2),y=h[0],ie=h[1],p=(0,x.useIntl)(),_=function(){var l=v()(n()().mark(function s(){var d;return n()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,O.$XH)();case 2:d=i.sent,ie(d.data||{fields:[]});case 4:case"end":return i.stop()}},s)}));return function(){return l.apply(this,arguments)}}();(0,c.useEffect)(function(){_()},[]);var D=function(s,d){W.Z.confirm({title:p.formatMessage({id:"plugin.guestbook.field.delete.confirm"}),content:p.formatMessage({id:"plugin.guestbook.field.delete.confirm.content"}),onOk:function(){var P=v()(n()().mark(function k(){return n()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:(0,O.mt3)({field_name:s.field_name}),y.fields.splice(d,1),y.fields=[].concat(y.fields),ie(y),Y.current&&Y.current.reload();case 5:case"end":return X.stop()}},k)}));function i(){return P.apply(this,arguments)}return i}()})},a=function(){var l=v()(n()().mark(function s(d){var P,i;return n()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:P=!1,y.fields||(y.fields=[]);for(i in y.fields)y.fields[i].field_name===d.field_name&&(P=!0,y.fields[i]=Object.assign(y.fields[i],d));P||y.fields.push(d),y.fields=[].concat(y.fields),ie(y),Y.current&&Y.current.reload(),f(!1);case 8:case"end":return F.stop()}},s)}));return function(d){return l.apply(this,arguments)}}(),t=function(){var l=v()(n()().mark(function s(){var d;return n()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,O.EDT)(y);case 2:d=i.sent,d.code===0?(C.ZP.success(d.msg),f(!1),Y.current&&Y.current.reload()):C.ZP.error(d.msg);case 4:case"end":return i.stop()}},s)}));return function(){return l.apply(this,arguments)}}(),m=[{title:p.formatMessage({id:"content.module.field.name"}),dataIndex:"name"},{title:p.formatMessage({id:"content.module.field.field-name"}),dataIndex:"field_name"},{title:p.formatMessage({id:"content.module.field.type"}),dataIndex:"type",render:function(s,d){return(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{children:d.is_system?p.formatMessage({id:"content.module.field.type.built-in"}):""}),(0,e.jsx)("span",{children:s})]})}},{title:p.formatMessage({id:"setting.action"}),dataIndex:"option",render:function(s,d,P){return(0,e.jsx)(M.Z,{size:20,children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("a",{onClick:function(){U(d),f(!0)},children:(0,e.jsx)(x.FormattedMessage,{id:"setting.action.edit"})}),!d.is_system&&(0,e.jsx)("a",{className:"text-red",onClick:function(){D(d,P)},children:(0,e.jsx)(x.FormattedMessage,{id:"setting.system.delete"})})]})})}}];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{onClick:function(){ce(!se)},children:z.children}),(0,e.jsx)(W.Z,{width:800,title:p.formatMessage({id:"plugin.user.setting"}),open:se,onCancel:function(){ce(!1)},onOk:function(){t()},children:(0,e.jsx)(K.Z,{rowKey:"name",search:!1,actionRef:Y,toolBarRender:function(){return[(0,e.jsx)(u.ZP,{type:"primary",onClick:function(){U({type:"text",required:!1}),f(!0)},children:(0,e.jsx)(x.FormattedMessage,{id:"content.module.field.add"})},"add")]},tableAlertRender:!1,tableAlertOptionRender:!1,request:v()(n()().mark(function l(){return n()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",{data:y.fields||[],success:!0});case 1:case"end":return d.stop()}},l)})),columnsState:{persistenceKey:"user-fields-table",persistenceType:"localStorage"},columns:m,pagination:!1})}),te&&(0,e.jsxs)(L.Y,{width:600,title:le.name?le.name+p.formatMessage({id:"content.module.field.edit"}):p.formatMessage({id:"content.module.field.add"}),open:te,modalProps:{onCancel:function(){f(!1)}},initialValues:le,layout:"horizontal",onFinish:function(){var l=v()(n()().mark(function s(d){return n()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:a(d);case 1:case"end":return i.stop()}},s)}));return function(s){return l.apply(this,arguments)}}(),children:[(0,e.jsx)(S.Z,{name:"name",required:!0,label:p.formatMessage({id:"content.module.field.name"}),extra:p.formatMessage({id:"plugin.user.setting.name.description"})}),(0,e.jsx)(S.Z,{name:"field_name",label:p.formatMessage({id:"content.module.field.field-name"}),disabled:!!le.field_name,extra:p.formatMessage({id:"content.module.field.field-name.description"})}),(0,e.jsx)(A.Z.Group,{name:"type",label:p.formatMessage({id:"content.module.field.type"}),disabled:!!le.field_name,valueEnum:{text:p.formatMessage({id:"content.module.field.type.text"}),number:p.formatMessage({id:"content.module.field.type.number"}),textarea:p.formatMessage({id:"content.module.field.type.textarea"}),radio:p.formatMessage({id:"content.module.field.type.radio"}),checkbox:p.formatMessage({id:"content.module.field.type.checkbox"}),select:p.formatMessage({id:"content.module.field.type.select"}),image:p.formatMessage({id:"content.module.field.type.image"}),file:p.formatMessage({id:"content.module.field.type.file"})}}),(0,e.jsx)(I.Z,{label:p.formatMessage({id:"content.param.default"}),name:"content",fieldProps:{rows:4},extra:p.formatMessage({id:"content.module.field.default.description"})})]})]})},Q=oe,ve=r(335),E=r.n(ve),q=r(82092),ee=r.n(q),N=r(17361),G=r(86743),re=r(16621),Pe=r(71384),Ce=r(25208),Ze=r(56534),xe=r(43330),Ee=r(9921),Fe=function(z){var Y,H=(0,c.useRef)(),ue=(0,c.useState)([]),se=j()(ue,2),ce=se[0],fe=se[1],de=(0,c.useState)({}),te=j()(de,2),f=te[0],ne=te[1],pe=(0,c.useState)(!1),le=j()(pe,2),U=le[0],ge=le[1],h=(0,x.useIntl)();(0,c.useEffect)(function(){(0,O.$XH)().then(function(a){var t;fe(((t=a.data)===null||t===void 0?void 0:t.fields)||[])}),(0,O.XBG)({id:z.user.id}).then(function(a){var t=a.data||{};t.expire_time&&(t.expire_time=$()(t.expire_time*1e3)),t.avatar_url&&(t.avatar_url=t.full_avatar_url),ne(t),ge(!0)})},[]);var y=function(){var a=v()(n()().mark(function t(m){var l,s;return n()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return l=Object.assign(f,m),P.next=3,(0,O.hKO)(l);case 3:s=P.sent,C.ZP.info(s.msg),z.onSubmit();case 6:case"end":return P.stop()}},t)}));return function(m){return a.apply(this,arguments)}}(),ie=function(t){var m,l={};l[t]={value:""},H==null||(m=H.current)===null||m===void 0||m.setFieldsValue({extra:l}),delete f.extra[t],ne(f)},p=function(t,m){var l,s={};s[t]={value:m.logo},H==null||(l=H.current)===null||l===void 0||l.setFieldsValue({extra:s}),f.extra||(f.extra={}),f.extra[t]||(f.extra[t]={}),f.extra[t].value=m.logo,ne(f)},_=function(){f.avatar_url="",ne(Object.assign({},f))},D=function(t){f.avatar_url=t.logo,ne(Object.assign({},f))};return U?(0,e.jsxs)(L.Y,{width:600,title:(Y=z.user)!==null&&Y!==void 0&&Y.id?h.formatMessage({id:"plugin.user.edit"}):h.formatMessage({id:"plugin.user.add"}),open:z.open,layout:"horizontal",onOpenChange:function(t){t||z.onCancel(t)},formRef:H,initialValues:f,onFinish:function(){var a=v()(n()().mark(function t(m){return n()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:y(m);case 1:case"end":return s.stop()}},t)}));return function(t){return a.apply(this,arguments)}}(),children:[(0,e.jsx)(S.Z,{label:h.formatMessage({id:"plugin.user.avatar_url"}),children:f.avatar_url?(0,e.jsxs)("div",{className:"ant-upload-item",children:[(0,e.jsx)(xe.Z,{preview:{src:f.avatar_url},src:f.avatar_url}),(0,e.jsx)("span",{className:"delete",onClick:function(){return _()},children:(0,e.jsx)(G.Z,{})})]}):(0,e.jsx)(N.Z,{onSelect:function(t){return D(t)},open:!1,children:(0,e.jsx)("div",{className:"ant-upload-item",children:(0,e.jsxs)("div",{className:"add",children:[(0,e.jsx)(re.Z,{}),(0,e.jsx)("div",{style:{marginTop:8},children:(0,e.jsx)(x.FormattedMessage,{id:"plugin.pay.upload"})})]})})})}),(0,e.jsx)(S.Z,{name:"user_name",label:h.formatMessage({id:"plugin.user.user-name"})}),(0,e.jsx)(S.Z,{name:"real_name",label:h.formatMessage({id:"plugin.user.real-name"})}),(0,e.jsx)(S.Z,{name:"phone",label:h.formatMessage({id:"plugin.user.phone"})}),(0,e.jsx)(S.Z,{name:"email",label:h.formatMessage({id:"plugin.user.email"})}),(0,e.jsx)(S.Z,{name:"password",label:h.formatMessage({id:"plugin.user.password"}),extra:h.formatMessage({id:"plugin.user.password.description"})}),(0,e.jsx)(I.Z,{name:"introduce",label:h.formatMessage({id:"plugin.user.introduce"})}),(0,e.jsx)(A.Z.Group,{name:"is_retailer",label:h.formatMessage({id:"plugin.user.is-retailer"}),options:[{label:h.formatMessage({id:"plugin.user.is-retailer.no"}),value:0},{label:h.formatMessage({id:"plugin.user.is-retailer.yes"}),value:1}]}),(0,e.jsx)(S.Z,{name:"invite_code",label:h.formatMessage({id:"plugin.user.invite-code"}),extra:h.formatMessage({id:"plugin.user.invite-code.description"})}),(0,e.jsx)(Pe.Z,{name:"parent_id",label:h.formatMessage({id:"plugin.user.parent.user-id"})}),(0,e.jsx)(g.Z,{label:h.formatMessage({id:"plugin.user.group"}),name:"group_id",request:v()(n()().mark(function a(){var t;return n()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,O.jWl)();case 2:return t=l.sent,l.abrupt("return",t.data||[]);case 4:case"end":return l.stop()}},a)})),fieldProps:{fieldNames:{label:"title",value:"id"}}}),(0,e.jsx)(Ce.Z,{name:"expire_time",label:h.formatMessage({id:"plugin.user.expire"}),extra:h.formatMessage({id:"plugin.user.expire.description"}),width:"lg",transform:function(t,m){return ee()({},m,$()(t).unix())}}),(0,e.jsx)(Ee.Z,{children:(0,e.jsx)(x.FormattedMessage,{id:"plugin.user.extra-fields"})}),ce.map(function(a){var t,m,l,s,d;return a.type==="text"?(0,e.jsx)(S.Z,{name:["extra",a.field_name,"value"],label:a.name,required:!!a.required,placeholder:a.content&&h.formatMessage({id:"plugin.user.extra-fields.default"})+a.content},a.field_name):a.type==="number"?(0,e.jsx)(Pe.Z,{name:["extra",a.field_name,"value"],label:a.name,required:!!a.required,placeholder:a.content&&h.formatMessage({id:"plugin.user.extra-fields.default"})+a.content},a.field_name):a.type==="textarea"?(0,e.jsx)(I.Z,{name:["extra",a.field_name,"value"],label:a.name,required:!!a.required,placeholder:a.content&&h.formatMessage({id:"plugin.user.extra-fields.default"})+a.content},a.field_name):a.type==="radio"?(0,e.jsx)(A.Z.Group,{name:["extra",a.field_name,"value"],label:a.name,request:v()(n()().mark(function P(){var i,k,F,X,ae;return n()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:i=a.content.split(`
`),k=[],F=E()(i);try{for(F.s();!(X=F.n()).done;)ae=X.value,k.push({label:ae,value:ae})}catch(he){F.e(he)}finally{F.f()}return w.abrupt("return",k);case 5:case"end":return w.stop()}},P)}))},a.field_name):a.type==="checkbox"?(0,e.jsx)(Ze.Z.Group,{name:["extra",a.field_name,"value"],label:a.name,request:v()(n()().mark(function P(){var i,k,F,X,ae;return n()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:i=a.content.split(`
`),k=[],F=E()(i);try{for(F.s();!(X=F.n()).done;)ae=X.value,k.push({label:ae,value:ae})}catch(he){F.e(he)}finally{F.f()}return w.abrupt("return",k);case 5:case"end":return w.stop()}},P)}))},a.field_name):a.type==="select"?(0,e.jsx)(g.Z,{name:["extra",a.field_name,"value"],label:a.name,request:v()(n()().mark(function P(){var i,k,F,X,ae;return n()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:i=a.content.split(`
`),k=[],F=E()(i);try{for(F.s();!(X=F.n()).done;)ae=X.value,k.push({label:ae,value:ae})}catch(he){F.e(he)}finally{F.f()}return w.abrupt("return",k);case 5:case"end":return w.stop()}},P)}))},a.field_name):a.type==="image"?(0,e.jsx)(S.Z,{name:["extra",a.field_name,"value"],label:a.name,children:(t=f.extra)!==null&&t!==void 0&&(t=t[a.field_name])!==null&&t!==void 0&&t.value?(0,e.jsxs)("div",{className:"ant-upload-item",children:[(0,e.jsx)(xe.Z,{preview:{src:(m=f.extra[a.field_name])===null||m===void 0?void 0:m.value},src:(l=f.extra[a.field_name])===null||l===void 0?void 0:l.value}),(0,e.jsx)("span",{className:"delete",onClick:function(){return ie(a.field_name)},children:(0,e.jsx)(G.Z,{})})]}):(0,e.jsx)(N.Z,{onSelect:function(i){return p(a.field_name,i)},open:!1,children:(0,e.jsx)("div",{className:"ant-upload-item",children:(0,e.jsxs)("div",{className:"add",children:[(0,e.jsx)(re.Z,{}),(0,e.jsx)("div",{style:{marginTop:8},children:(0,e.jsx)(x.FormattedMessage,{id:"plugin.pay.upload"})})]})})})},a.field_name):a.type==="file"?(0,e.jsx)(S.Z,{name:["extra",a.field_name,"value"],label:a.name,children:(s=f.extra)!==null&&s!==void 0&&(s=s[a.field_name])!==null&&s!==void 0&&s.value?(0,e.jsxs)("div",{className:"ant-upload-item ant-upload-file",children:[(0,e.jsx)("span",{children:(d=f.extra[a.field_name])===null||d===void 0?void 0:d.value}),(0,e.jsx)("span",{className:"delete",onClick:function(){return ie(a.field_name)},children:(0,e.jsx)(G.Z,{})})]}):(0,e.jsx)(N.Z,{onSelect:function(i){return p(a.field_name,i)},open:!1,children:(0,e.jsx)(u.ZP,{children:(0,e.jsx)(x.FormattedMessage,{id:"plugin.pay.upload"})})})},a.field_name):""})]}):null},Se=Fe,ye=function(){var z=(0,c.useRef)(),Y=(0,c.useState)({}),H=j()(Y,2),ue=H[0],se=H[1],ce=(0,c.useState)(!1),fe=j()(ce,2),de=fe[0],te=fe[1],f=(0,c.useState)([]),ne=j()(f,2),pe=ne[0],le=ne[1],U=(0,x.useIntl)(),ge=function(){(0,O.jWl)().then(function(D){le(D.data||[])})};(0,c.useEffect)(function(){ge()},[]);var h=function(){var _=v()(n()().mark(function D(a){return n()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:se(a),te(!0);case 2:case"end":return m.stop()}},D)}));return function(a){return _.apply(this,arguments)}}(),y=function(D){W.Z.confirm({title:U.formatMessage({id:"plugin.user.delete.confirm"}),onOk:function(){(0,O.eRx)(D).then(function(t){var m;C.ZP.info(t.msg),(m=z.current)===null||m===void 0||m.reload()})}})},ie=function(){se({}),te(!0)},p=[{title:U.formatMessage({id:"plugin.retailer.user-id"}),dataIndex:"id"},{title:U.formatMessage({id:"plugin.user.user-name"}),dataIndex:"user_name"},{title:U.formatMessage({id:"plugin.user.phone"}),dataIndex:"phone"},{title:U.formatMessage({id:"plugin.user.email"}),hideInSearch:!0,dataIndex:"email"},{title:U.formatMessage({id:"plugin.user.real-name"}),dataIndex:"real_name"},{title:U.formatMessage({id:"plugin.user.avatar_url"}),dataIndex:"full_avatar_url",hideInSearch:!0,width:70,render:function(D,a){return D?(0,e.jsx)("img",{src:a.full_avatar_url,className:"list-thumb"}):null}},{title:U.formatMessage({id:"plugin.user.group"}),dataIndex:"group_id",render:function(D,a){var t;return(t=a.group)===null||t===void 0?void 0:t.title},renderFormItem:function(D,a){var t=a.fieldProps;return(0,e.jsx)(g.Z,{name:"group_id",request:v()(n()().mark(function m(){return n()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",[{title:U.formatMessage({id:"plugin.user.group.all"}),id:0}].concat(pe||[]));case 1:case"end":return s.stop()}},m)})),fieldProps:R()({fieldNames:{label:"title",value:"id"}},t)})}},{title:U.formatMessage({id:"plugin.retailer.create-time"}),dataIndex:"created_time",hideInSearch:!0,render:function(D,a){return $()(a.created_time*1e3).format("YYYY-MM-DD HH:mm")}},{title:U.formatMessage({id:"setting.action"}),dataIndex:"option",valueType:"option",render:function(D,a){return(0,e.jsxs)(M.Z,{size:20,children:[(0,e.jsx)("a",{onClick:function(){h(a)},children:(0,e.jsx)(x.FormattedMessage,{id:"setting.action.edit"})},"edit"),(0,e.jsx)("a",{onClick:function(){y(a)},children:(0,e.jsx)(x.FormattedMessage,{id:"setting.system.delete"})})]})}}];return(0,e.jsxs)(J._z,{children:[(0,e.jsx)(K.Z,{headerTitle:U.formatMessage({id:"menu.plugin.user"}),actionRef:z,rowKey:"id",toolBarRender:function(){return[(0,e.jsx)(u.ZP,{onClick:ie,children:(0,e.jsx)(x.FormattedMessage,{id:"plugin.user.add"})},"add"),(0,e.jsx)(Q,{children:(0,e.jsx)(u.ZP,{children:(0,e.jsx)(x.FormattedMessage,{id:"plugin.user.setting"})})},"setting")]},tableAlertOptionRender:!1,request:function(D){return(0,O.YpX)(D)},columnsState:{persistenceKey:"user-table",persistenceType:"localStorage"},columns:p,rowSelection:!1,pagination:{showSizeChanger:!0}}),de&&(0,e.jsx)(Se,{open:de,user:ue,onCancel:function(){te(!1)},onSubmit:v()(n()().mark(function _(){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:te(!1),z.current&&z.current.reload();case 2:case"end":return a.stop()}},_)}))})]})},De=ye}}]);
