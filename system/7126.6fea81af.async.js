!(function(){"use strict";var X=Object.defineProperty;var U=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var $=(f,c,s)=>c in f?X(f,c,{enumerable:!0,configurable:!0,writable:!0,value:s}):f[c]=s,A=(f,c)=>{for(var s in c||(c={}))Z.call(c,s)&&$(f,s,c[s]);if(U)for(var s of U(c))q.call(c,s)&&$(f,s,c[s]);return f};var j=(f,c,s)=>new Promise((x,b)=>{var w=u=>{try{M(s.next(u))}catch(S){b(S)}},e=u=>{try{M(s.throw(u))}catch(S){b(S)}},M=u=>u.done?x(u.value):Promise.resolve(u.value).then(w,e);M((s=s.apply(f,c)).next())});(self.webpackChunkAnQiCMS=self.webpackChunkAnQiCMS||[]).push([[7126],{87126:function(f,c,s){s.d(c,{diagram:function(){return J}});var x=s(71741),b=s(15525),w=s(42521),e=s(82725),M=s(32174),u=s(16483),S=s(91088),tt=s(90795),et=s(62799),lt=s(50442);const L=a=>e.e.sanitizeText(a,(0,e.c)());let C={dividerMargin:10,padding:5,textHeight:10,curve:void 0};const z=function(a,n,v,r){const t=Object.keys(a);e.l.info("keys:",t),e.l.info(a),t.forEach(function(d){var y;var o,_;const l=a[d],p={shape:"rect",id:l.id,domId:l.domId,labelText:L(l.id),labelStyle:"",style:"fill: none; stroke: black",padding:(y=(o=(0,e.c)().flowchart)==null?void 0:o.padding)!=null?y:(_=(0,e.c)().class)==null?void 0:_.padding};n.setNode(l.id,p),I(l.classes,n,v,r,l.id),e.l.info("setNode",p)})},I=function(a,n,v,r,t){const d=Object.keys(a);e.l.info("keys:",d),e.l.info(a),d.filter(o=>a[o].parent==t).forEach(function(o){var D,E;var _,l;const i=a[o],p=i.cssClasses.join(" "),y=(0,e.k)(i.styles),m=(D=i.label)!=null?D:i.id,g=0,h={labelStyle:y.labelStyle,shape:"class_box",labelText:L(m),classData:i,rx:g,ry:g,class:p,style:y.style,id:i.id,domId:i.domId,tooltip:r.db.getTooltip(i.id,t)||"",haveCallback:i.haveCallback,link:i.link,width:i.type==="group"?500:void 0,type:i.type,padding:(E=(_=(0,e.c)().flowchart)==null?void 0:_.padding)!=null?E:(l=(0,e.c)().class)==null?void 0:l.padding};n.setNode(i.id,h),t&&n.setParent(i.id,t),e.l.info("setNode",h)})},Y=function(a,n,v,r){e.l.info(a),a.forEach(function(t,d){var E;var o,_;const l=t,i="",p={labelStyle:"",style:""},y=l.text,m=0,T={labelStyle:p.labelStyle,shape:"note",labelText:L(y),noteData:l,rx:m,ry:m,class:i,style:p.style,id:l.id,domId:l.id,tooltip:"",type:"note",padding:(E=(o=(0,e.c)().flowchart)==null?void 0:o.padding)!=null?E:(_=(0,e.c)().class)==null?void 0:_.padding};if(n.setNode(l.id,T),e.l.info("setNode",T),!l.class||!(l.class in r))return;const h=v+d,D={id:`edgeNote${h}`,classes:"relation",pattern:"dotted",arrowhead:"none",startLabelRight:"",endLabelLeft:"",arrowTypeStart:"none",arrowTypeEnd:"none",style:"fill:none",labelStyle:"",curve:(0,e.n)(C.curve,b.c_6)};n.setEdge(l.id,l.class,D,h)})},Q=function(a,n){const v=(0,e.c)().flowchart;let r=0;a.forEach(function(t){var _;var d;r++;const o={classes:"relation",pattern:t.relation.lineType==1?"dashed":"solid",id:`id_${t.id1}_${t.id2}_${r}`,arrowhead:t.type==="arrow_open"?"none":"normal",startLabelRight:t.relationTitle1==="none"?"":t.relationTitle1,endLabelLeft:t.relationTitle2==="none"?"":t.relationTitle2,arrowTypeStart:O(t.relation.type1),arrowTypeEnd:O(t.relation.type2),style:"fill:none",labelStyle:"",curve:(0,e.n)(v==null?void 0:v.curve,b.c_6)};if(e.l.info(o,t),t.style!==void 0){const l=(0,e.k)(t.style);o.style=l.style,o.labelStyle=l.labelStyle}t.text=t.title,t.text===void 0?t.style!==void 0&&(o.arrowheadStyle="fill: #333"):(o.arrowheadStyle="fill: #333",o.labelpos="c",((_=(d=(0,e.c)().flowchart)==null?void 0:d.htmlLabels)!=null?_:(0,e.c)().htmlLabels)?(o.labelType="html",o.label='<span class="edgeLabel">'+t.text+"</span>"):(o.labelType="text",o.label=t.text.replace(e.e.lineBreakRegex,`
`),t.style===void 0&&(o.style=o.style||"stroke: #333; stroke-width: 1.5px;fill:none"),o.labelStyle=o.labelStyle.replace("color:","fill:"))),n.setEdge(t.id1,t.id2,o,r)})},G=function(a){C=A(A({},C),a)},H=function(a,n,v,r){return j(this,null,function*(){var E,R,B,N;e.l.info("Drawing class - ",n);const t=(E=(0,e.c)().flowchart)!=null?E:(0,e.c)().class,d=(0,e.c)().securityLevel;e.l.info("config:",t);const o=(R=t==null?void 0:t.nodeSpacing)!=null?R:50,_=(B=t==null?void 0:t.rankSpacing)!=null?B:50,l=new w.k({multigraph:!0,compound:!0}).setGraph({rankdir:r.db.getDirection(),nodesep:o,ranksep:_,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),i=r.db.getNamespaces(),p=r.db.getClasses(),y=r.db.getRelations(),m=r.db.getNotes();e.l.info(y),z(i,l,n,r),I(p,l,n,r),Q(y,l),Y(m,l,y.length+1,p);let g;d==="sandbox"&&(g=(0,b.Ys)("#i"+n));const T=d==="sandbox"?(0,b.Ys)(g.nodes()[0].contentDocument.body):(0,b.Ys)("body"),h=T.select(`[id="${n}"]`),D=T.select("#"+n+" g");if(yield(0,M.r)(D,l,["aggregation","extension","composition","dependency","lollipop"],"classDiagram",n),e.u.insertTitle(h,"classTitleText",(N=t==null?void 0:t.titleTopMargin)!=null?N:5,r.db.getDiagramTitle()),(0,e.o)(l,h,t==null?void 0:t.diagramPadding,t==null?void 0:t.useMaxWidth),!(t!=null&&t.htmlLabels)){const W=d==="sandbox"?g.nodes()[0].contentDocument:document,V=W.querySelectorAll('[id="'+n+'"] .edgeLabel .label');for(const P of V){const K=P.getBBox(),k=W.createElementNS("http://www.w3.org/2000/svg","rect");k.setAttribute("rx",0),k.setAttribute("ry",0),k.setAttribute("width",K.width),k.setAttribute("height",K.height),P.insertBefore(k,P.firstChild)}}})};function O(a){let n;switch(a){case 0:n="aggregation";break;case 1:n="extension";break;case 2:n="composition";break;case 3:n="dependency";break;case 4:n="lollipop";break;default:n="none"}return n}const F={setConf:G,draw:H},J={parser:x.p,db:x.d,renderer:F,styles:x.s,init:a=>{a.class||(a.class={}),a.class.arrowMarkerAbsolute=a.arrowMarkerAbsolute,x.d.clear()}}}}]);
}());