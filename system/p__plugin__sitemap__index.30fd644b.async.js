"use strict";(self.webpackChunkAnQiCMS=self.webpackChunkAnQiCMS||[]).push([[1835],{41265:function(Z,x,e){var E=e(18201),_=e(66342),R=e(59831),d=e(75271),U=e(38465),f=e(31945),K=e(52676),b=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],L=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],h=function(i,S){var O=i.fieldProps,C=i.children,A=i.params,j=i.proFieldProps,o=i.mode,a=i.valueEnum,c=i.request,P=i.showSearch,v=i.options,g=(0,_.Z)(i,b),W=(0,d.useContext)(U.Z);return(0,K.jsx)(f.Z,(0,E.Z)((0,E.Z)({valueEnum:(0,R.h)(a),request:c,params:A,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,E.Z)({options:v,mode:o,showSearch:P,getPopupContainer:W.getPopupContainer},O),ref:S,proFieldProps:j},g),{},{children:C}))},T=d.forwardRef(function(l,i){var S=l.fieldProps,O=l.children,C=l.params,A=l.proFieldProps,j=l.mode,o=l.valueEnum,a=l.request,c=l.options,P=(0,_.Z)(l,L),v=(0,E.Z)({options:c,mode:j||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},S),g=(0,d.useContext)(U.Z);return(0,K.jsx)(f.Z,(0,E.Z)((0,E.Z)({valueEnum:(0,R.h)(o),request:a,params:C,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,E.Z)({getPopupContainer:g.getPopupContainer},v),ref:i,proFieldProps:A},P),{},{children:O}))}),D=d.forwardRef(h),I=T,p=D;p.SearchSelect=I,p.displayName="ProFormComponent",x.Z=p},85606:function(Z,x,e){var E=e(48305),_=e.n(E),R=e(75304),d=e(22683),U=e(96570),f=e(75271),K=e(52676),b=function(h){var T=(0,f.useState)(void 0),D=_()(T,2),I=D[0],p=D[1],l=(0,f.useState)(""),i=_()(l,2),S=i[0],O=i[1],C=function(){(0,R.roP)({type:"multi"}).then(function(o){var a=(o.data||[]).map(function(g){return{key:g.id,tab:g.name,is_main:g.is_main}});p(a);var c=(0,d.KJ)("sub-site-id");!c&&a.length>0&&(c=a[0].key+"");var P=a.find(function(g){return g.key===Number(c)}),v=!1;P&&(v=!0,P.is_main&&(v=!1)),(0,d.Xq)("is-sub-site",v),O(c)})};(0,f.useEffect)(function(){C()},[]);var A=function(o){var a;O(o),(0,d.Xq)("sub-site-id",o);var c=I.find(function(v){return v.key===Number(o)}),P=!0;c.is_main&&(P=!1),(0,d.Xq)("is-sub-site",P),(a=h.onTabChange)===null||a===void 0||a.call(h,o,P)};return(0,K.jsx)(U._z,{tabList:I,tabActiveKey:S,onTabChange:A,title:h.title,children:h.children})};x.Z=b},76739:function(Z,x,e){e.r(x);var E=e(90228),_=e.n(E),R=e(87999),d=e.n(R),U=e(48305),f=e.n(U),K=e(85606),b=e(75304),L=e(50482),h=e(74133),T=e(76334),D=e(41265),I=e(96640),p=e(32064),l=e(34206),i=e(91827),S=e(18874),O=e(53745),C=e(47634),A=e(16483),j=e.n(A),o=e(75271),a=e(52676),c=function(){var v=o.createRef(),g=(0,o.useState)({}),W=f()(g,2),B=W[0],F=W[1],z=(0,o.useState)(!1),N=f()(z,2),V=N[0],Y=N[1],H=(0,o.useState)(""),$=f()(H,2),X=$[0],Q=$[1],r=(0,p.useIntl)(),G=function(){var m=d()(_()().mark(function n(){var u,M;return _()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,L.RH)();case 2:u=s.sent,M=u.data||{},F(M),Y(!0);case 6:case"end":return s.stop()}},n)}));return function(){return m.apply(this,arguments)}}(),J=function(n){G().then(function(){Q(n)})};(0,o.useEffect)(function(){G()},[]);var w=function(){var m=d()(_()().mark(function n(u){var M;return _()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:M=l.ZP.loading(r.formatMessage({id:"setting.system.submitting"}),0),(0,L.q8)(u).then(function(y){l.ZP.success(y.msg)}).catch(function(y){console.log(y)}).finally(function(){M()});case 2:case"end":return s.stop()}},n)}));return function(u){return m.apply(this,arguments)}}(),q=function(){var n,u=(n=v.current)===null||n===void 0?void 0:n.getFieldsValue(),M=l.ZP.loading(r.formatMessage({id:"setting.system.submitting"}),0);(0,L.Ig)(u).then(function(t){l.ZP.info(t.msg),t.code===0&&F(t.data)}).finally(function(){M()})};return(0,a.jsx)(K.Z,{onTabChange:function(n){return J(n)},children:(0,a.jsxs)(i.Z,{children:[(0,a.jsx)(S.Z,{message:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{children:(0,a.jsx)(p.FormattedMessage,{id:"plugin.sitemap.tips1"})}),(0,a.jsx)("div",{children:(0,a.jsx)(p.FormattedMessage,{id:"plugin.sitemap.tips2"})})]})}),V&&(0,a.jsxs)("div",{className:"mt-normal",children:[(0,a.jsx)(h.A,{onFinish:w,initialValues:B,formRef:v,children:(0,a.jsxs)(i.Z,{size:"small",title:r.formatMessage({id:"menu.plugin.sitemap"}),bordered:!1,children:[(0,a.jsx)(T.Z.Group,{name:"type",label:r.formatMessage({id:"plugin.sitemap.type"}),options:[{value:"txt",label:"txt"},{value:"xml",label:"xml"}]}),(0,a.jsx)(T.Z.Group,{name:"auto_build",label:r.formatMessage({id:"plugin.sitemap.auto-build"}),options:[{value:0,label:r.formatMessage({id:"plugin.sitemap.auto-build.manual"})},{value:1,label:r.formatMessage({id:"plugin.sitemap.auto-build.auto"})}]}),(0,a.jsx)(T.Z.Group,{name:"exclude_tag",label:r.formatMessage({id:"plugin.sitemap.exclude-tag"}),options:[{value:!1,label:r.formatMessage({id:"plugin.sitemap.exclude-tag.no"})},{value:!0,label:r.formatMessage({id:"plugin.sitemap.exclude-tag.yes"})}]}),(0,a.jsx)(D.Z,{name:"exclude_module_ids",label:r.formatMessage({id:"plugin.sitemap.exculde-module"}),mode:"multiple",request:d()(_()().mark(function m(){var n,u;return _()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,b.hUj)({});case 2:return n=t.sent,u=(n.data||[]).map(function(s){return{label:s.name,value:s.id}}),t.abrupt("return",u);case 5:case"end":return t.stop()}},m)})),placeholder:r.formatMessage({id:"plugin.sitemap.exculde-module.description"})}),(0,a.jsx)(D.Z,{name:"exclude_category_ids",label:r.formatMessage({id:"plugin.sitemap.exculde-category"}),mode:"multiple",request:d()(_()().mark(function m(){var n,u;return _()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,b.CPB)({type:1});case 2:return n=t.sent,u=(n.data||[]).map(function(s){return{label:s.spacer.replaceAll("&nbsp;"," ")+s.title,value:s.id}}),t.abrupt("return",u);case 5:case"end":return t.stop()}},m)})),placeholder:r.formatMessage({id:"plugin.sitemap.exculde-category.description"})}),(0,a.jsx)(D.Z,{name:"exclude_page_ids",label:r.formatMessage({id:"plugin.sitemap.exculde-page"}),mode:"multiple",request:d()(_()().mark(function m(){var n,u;return _()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,b.CPB)({type:3});case 2:return n=t.sent,u=(n.data||[]).map(function(s){return{label:s.spacer.replaceAll("&nbsp;"," ")+s.title,value:s.id}}),t.abrupt("return",u);case 5:case"end":return t.stop()}},m)})),placeholder:r.formatMessage({id:"plugin.sitemap.exculde-page.description"})})]})}),(0,a.jsx)("div",{className:"mt-normal",children:(0,a.jsxs)(i.Z,{size:"small",title:r.formatMessage({id:"plugin.sitemap.action"}),bordered:!1,children:[(0,a.jsx)("div",{children:(0,a.jsx)(p.FormattedMessage,{id:"plugin.sitemap.action.tips"})}),(0,a.jsx)(I.Z,{readonly:!0,label:r.formatMessage({id:"plugin.sitemap.last-time"}),fieldProps:{value:j()(B.updated_time*1e3).format("YYYY-MM-DD HH:mm")}}),(0,a.jsxs)(O.Z,{size:20,children:[(0,a.jsx)(C.ZP,{type:"primary",onClick:function(){q()},children:(0,a.jsx)(p.FormattedMessage,{id:"plugin.sitemap.build"})}),(0,a.jsx)(C.ZP,{onClick:function(){window.open(B.sitemap_url)},children:(0,a.jsx)(p.FormattedMessage,{id:"plugin.sitemap.view"})})]})]})})]})]},X)})};x.default=c}}]);
