"use strict";(self.webpackChunkAnQiCMS=self.webpackChunkAnQiCMS||[]).push([[426],{71384:function(ae,T,t){var o=t(18201),v=t(66342),B=t(75271),O=t(31945),W=t(52676),f=["fieldProps","min","proFieldProps","max"],F=function(u,w){var A=u.fieldProps,x=u.min,D=u.proFieldProps,U=u.max,C=(0,v.Z)(u,f);return(0,W.jsx)(O.Z,(0,o.Z)({valueType:"digit",fieldProps:(0,o.Z)({min:x,max:U},A),ref:w,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:D},C))},S=B.forwardRef(F);T.Z=S},60409:function(ae,T,t){t.d(T,{UW:function(){return v}});var o=t(74133),v=o.A.Group},85606:function(ae,T,t){var o=t(48305),v=t.n(o),B=t(75304),O=t(22683),W=t(96570),f=t(75271),F=t(52676),S=function(u){var w=(0,f.useState)(void 0),A=v()(w,2),x=A[0],D=A[1],U=(0,f.useState)(""),C=v()(U,2),K=C[0],H=C[1],ee=function(){(0,B.roP)({type:"multi"}).then(function(j){var E=(j.data||[]).map(function($){return{key:$.id,tab:$.name,is_main:$.is_main}});D(E);var g=(0,O.KJ)("sub-site-id");!g&&E.length>0&&(g=E[0].key+"");var a=E.find(function($){return $.key===Number(g)}),M=!1;a&&(M=!0,a.is_main&&(M=!1)),(0,O.Xq)("is-sub-site",M),H(g)})};(0,f.useEffect)(function(){ee()},[]);var le=function(j){var E;H(j),(0,O.Xq)("sub-site-id",j);var g=x.find(function(M){return M.key===Number(j)}),a=!0;g.is_main&&(a=!1),(0,O.Xq)("is-sub-site",a),(E=u.onTabChange)===null||E===void 0||E.call(u,j,a)};return(0,F.jsx)(W._z,{tabList:x,tabActiveKey:K,onTabChange:le,title:u.title,children:u.children})};T.Z=S},57294:function(ae,T,t){t.r(T);var o=t(90228),v=t.n(o),B=t(87999),O=t.n(B),W=t(48305),f=t.n(W),F=t(85606),S=t(75304),Q=t(74133),u=t(76334),w=t(60409),A=t(71384),x=t(66857),D=t(32064),U=t(34206),C=t(91827),K=t(53745),H=t(31751),ee=t(47634),le=t(21261),te=t(75573),j=t(16483),E=t.n(j),g=t(75271),a=t(52676),M=function(){var re=g.createRef(),_e=(0,g.useState)({}),ne=f()(_e,2),ie=ne[0],e=ne[1],r=(0,g.useState)([]),c=f()(r,2),s=c[0],l=c[1],P=(0,g.useState)(!1),m=f()(P,2),R=m[0],I=m[1],G=(0,g.useState)(""),y=f()(G,2),V=y[0],L=y[1],n=(0,D.useIntl)(),k=function(){var p=O()(v()().mark(function d(){var h,Z,i,Y,N,_;return v()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,(0,S.jHP)();case 2:N=z.sent,_=N.data||{},_.white_ips=((h=_.white_ips)===null||h===void 0?void 0:h.join(`
`))||"",_.black_ips=((Z=_.black_ips)===null||Z===void 0?void 0:Z.join(`
`))||"",_.block_agents=((i=_.block_agents)===null||i===void 0?void 0:i.join(`
`))||"",_.allow_prefixes=((Y=_.allow_prefixes)===null||Y===void 0?void 0:Y.join(`
`))||"",e(_),I(!0);case 10:case"end":return z.stop()}},d)}));return function(){return p.apply(this,arguments)}}(),b=function(){(0,S.cCB)().then(function(d){l(d.data||[])})},se=function(d){k().then(function(){b(),L(d)})};(0,g.useEffect)(function(){k(),b()},[]);var J=function(){var p=O()(v()().mark(function d(h){var Z,i;return v()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:Z=U.ZP.loading(n.formatMessage({id:"setting.system.submitting"}),0),i=h,i.white_ips=(i.white_ips.split(`
`)||[]).filter(function(_){return _.length>0}),i.black_ips=(i.black_ips.split(`
`)||[]).filter(function(_){return _.length>0}),i.block_agents=(i.block_agents.split(`
`)||[]).filter(function(_){return _.length>0}),i.allow_prefixes=(i.allow_prefixes.split(`
`)||[]).filter(function(_){return _.length>0}),(0,S._3z)(i).then(function(_){U.ZP.success(_.msg)}).catch(function(_){console.log(_)}).finally(function(){Z()});case 7:case"end":return N.stop()}},d)}));return function(h){return p.apply(this,arguments)}}(),oe=function(d){(0,S.$hU)({ip:d}).then(function(h){U.ZP.success(h.msg),b()})};return(0,a.jsx)(F.Z,{onTabChange:function(d){return se(d)},children:(0,a.jsx)(C.Z,{children:R&&(0,a.jsxs)("div",{className:"mt-normal",children:[(0,a.jsx)(Q.A,{onFinish:J,initialValues:ie,formRef:re,children:(0,a.jsxs)(C.Z,{size:"small",title:n.formatMessage({id:"menu.plugin.limiter"}),bordered:!1,children:[(0,a.jsx)(u.Z.Group,{name:"open",label:n.formatMessage({id:"plugin.limiter.open.name"}),options:[{label:n.formatMessage({id:"plugin.limiter.open.false"}),value:!1},{label:n.formatMessage({id:"plugin.limiter.open.true"}),value:!0}],extra:n.formatMessage({id:"plugin.limiter.description"})}),(0,a.jsx)(u.Z.Group,{name:"is_allow_spider",label:n.formatMessage({id:"plugin.limiter.is_allow_spider"}),options:[{value:!1,label:n.formatMessage({id:"plugin.limiter.is_allow_spider.no"})},{value:!0,label:n.formatMessage({id:"plugin.limiter.is_allow_spider.yes"})}],extra:n.formatMessage({id:"plugin.limiter.is_allow_spider.description"})}),(0,a.jsx)(u.Z.Group,{name:"ban_empty_agent",label:n.formatMessage({id:"plugin.limiter.ban_empty_agent"}),options:[{value:!1,label:n.formatMessage({id:"plugin.limiter.is_allow_spider.no"})},{value:!0,label:n.formatMessage({id:"plugin.limiter.is_allow_spider.yes"})}],extra:n.formatMessage({id:"plugin.limiter.ban_empty_agent.description"})}),(0,a.jsx)(u.Z.Group,{name:"ban_empty_refer",label:n.formatMessage({id:"plugin.limiter.ban_empty_refer"}),options:[{value:!1,label:n.formatMessage({id:"plugin.limiter.is_allow_spider.no"})},{value:!0,label:n.formatMessage({id:"plugin.limiter.is_allow_spider.yes"})}],extra:n.formatMessage({id:"plugin.limiter.ban_empty_refer.description"})}),(0,a.jsxs)(w.UW,{children:[(0,a.jsx)(A.Z,{name:"max_requests",label:n.formatMessage({id:"plugin.limiter.max_requests"}),fieldProps:{prefix:n.formatMessage({id:"plugin.limiter.max_requests.prefix"}),suffix:n.formatMessage({id:"plugin.limiter.max_requests.suffix"})},extra:n.formatMessage({id:"plugin.limiter.max_requests.description"})}),(0,a.jsx)(A.Z,{name:"block_hours",label:n.formatMessage({id:"plugin.limiter.block_hours"}),fieldProps:{prefix:n.formatMessage({id:"plugin.limiter.block_hours.prefix"}),suffix:n.formatMessage({id:"plugin.limiter.block_hours.suffix"})},extra:n.formatMessage({id:"plugin.limiter.block_hours.description"})})]}),(0,a.jsx)(x.Z,{name:"white_ips",label:n.formatMessage({id:"plugin.limiter.white_ips"}),extra:n.formatMessage({id:"plugin.limiter.white_ips.description"})}),(0,a.jsx)(x.Z,{name:"black_ips",label:n.formatMessage({id:"plugin.limiter.black_ips"}),extra:n.formatMessage({id:"plugin.limiter.black_ips.description"})}),(0,a.jsx)(x.Z,{name:"block_agents",label:n.formatMessage({id:"plugin.limiter.block_agents"}),extra:n.formatMessage({id:"plugin.limiter.block_agents.description"})}),(0,a.jsx)(x.Z,{name:"allow_prefixes",label:n.formatMessage({id:"plugin.limiter.allow_prefixes"}),placeholder:n.formatMessage({id:"plugin.limiter.allow_prefixes.placeholder"}),extra:n.formatMessage({id:"plugin.limiter.allow_prefixes.description"})})]})}),(0,a.jsx)("div",{className:"mt-normal",children:(0,a.jsx)(C.Z,{size:"small",title:n.formatMessage({id:"plugin.limiter.blocked_ips"}),bordered:!1,children:s.length>0?(0,a.jsx)(K.Z,{wrap:!0,size:[16,16],children:s.map(function(p,d){return(0,a.jsx)(H.Z,{title:n.formatMessage({id:"plugin.limiter.blocked_ips.remove"}),content:(0,a.jsx)(K.Z,{align:"center",size:16,children:(0,a.jsx)(ee.ZP,{type:"link",onClick:function(){return oe(p.ip)},children:(0,a.jsx)(D.FormattedMessage,{id:"plugin.limiter.blocked_ips.remove.yes"})})}),children:(0,a.jsxs)(le.Z,{children:[(0,a.jsx)("span",{children:p.ip}),(0,a.jsxs)("span",{children:[(0,a.jsx)(D.FormattedMessage,{id:"plugin.limiter.blocked_ips.ended"}),E()(p.block_time*1e3).format("MM-DD HH:mm")]})]},d)},d)})}):(0,a.jsx)(te.Z,{})})})]})},V)})};T.default=M},21261:function(ae,T,t){t.d(T,{Z:function(){return ie}});var o=t(75271),v=t(82187),B=t.n(v),O=t(18051),W=t(4685),f=t(76708),F=t(44675),S=t(23351),Q=t(24434),u=t(15236),w=t(84432),A=t(58363),x=t(83509),D=t(71130);const U=e=>{const{paddingXXS:r,lineWidth:c,tagPaddingHorizontal:s,componentCls:l,calc:P}=e,m=P(s).sub(c).equal(),R=P(r).sub(c).equal();return{[l]:Object.assign(Object.assign({},(0,A.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:m,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,u.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${l}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${l}-close-icon`]:{marginInlineStart:R,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${l}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${l}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:m}}),[`${l}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},C=e=>{const{lineWidth:r,fontSizeIcon:c,calc:s}=e,l=e.fontSizeSM;return(0,x.IX)(e,{tagFontSize:l,tagLineHeight:(0,u.bf)(s(e.lineHeightSM).mul(l).equal()),tagIconSize:s(c).sub(s(r).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},K=e=>({defaultBg:new w.t(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var H=(0,D.I$)("Tag",e=>{const r=C(e);return U(r)},K),ee=function(e,r){var c={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(c[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(e);l<s.length;l++)r.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(e,s[l])&&(c[s[l]]=e[s[l]]);return c},te=o.forwardRef((e,r)=>{const{prefixCls:c,style:s,className:l,checked:P,onChange:m,onClick:R}=e,I=ee(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:G,tag:y}=o.useContext(Q.E_),V=J=>{m==null||m(!P),R==null||R(J)},L=G("tag",c),[n,k,b]=H(L),se=B()(L,`${L}-checkable`,{[`${L}-checkable-checked`]:P},y==null?void 0:y.className,l,k,b);return n(o.createElement("span",Object.assign({},I,{ref:r,style:Object.assign(Object.assign({},s),y==null?void 0:y.style),className:se,onClick:V})))}),j=t(99840);const E=e=>(0,j.Z)(e,(r,c)=>{let{textColor:s,lightBorderColor:l,lightColor:P,darkColor:m}=c;return{[`${e.componentCls}${e.componentCls}-${r}`]:{color:s,background:P,borderColor:l,"&-inverse":{color:e.colorTextLightSolid,background:m,borderColor:m},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}});var g=(0,D.bk)(["Tag","preset"],e=>{const r=C(e);return E(r)},K);function a(e){return typeof e!="string"?e:e.charAt(0).toUpperCase()+e.slice(1)}const M=(e,r,c)=>{const s=a(c);return{[`${e.componentCls}${e.componentCls}-${r}`]:{color:e[`color${c}`],background:e[`color${s}Bg`],borderColor:e[`color${s}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var $=(0,D.bk)(["Tag","status"],e=>{const r=C(e);return[M(r,"success","Success"),M(r,"processing","Info"),M(r,"error","Error"),M(r,"warning","Warning")]},K),re=function(e,r){var c={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(c[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(e);l<s.length;l++)r.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(e,s[l])&&(c[s[l]]=e[s[l]]);return c};const ne=o.forwardRef((e,r)=>{const{prefixCls:c,className:s,rootClassName:l,style:P,children:m,icon:R,color:I,onClose:G,bordered:y=!0,visible:V}=e,L=re(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:n,direction:k,tag:b}=o.useContext(Q.E_),[se,J]=o.useState(!0),oe=(0,O.Z)(L,["closeIcon","closable"]);o.useEffect(()=>{V!==void 0&&J(V)},[V]);const p=(0,W.o2)(I),d=(0,W.yT)(I),h=p||d,Z=Object.assign(Object.assign({backgroundColor:I&&!h?I:void 0},b==null?void 0:b.style),P),i=n("tag",c),[Y,N,_]=H(i),de=B()(i,b==null?void 0:b.className,{[`${i}-${I}`]:h,[`${i}-has-color`]:I&&!h,[`${i}-hidden`]:!se,[`${i}-rtl`]:k==="rtl",[`${i}-borderless`]:!y},s,l,N,_),z=q=>{q.stopPropagation(),G==null||G(q),!q.defaultPrevented&&J(!1)},[,fe]=(0,f.Z)((0,f.w)(e),(0,f.w)(b),{closable:!1,closeIconRender:q=>{const be=o.createElement("span",{className:`${i}-close-icon`,onClick:z},q);return(0,F.wm)(q,be,X=>({onClick:ge=>{var ce;(ce=X==null?void 0:X.onClick)===null||ce===void 0||ce.call(X,ge),z(ge)},className:B()(X==null?void 0:X.className,`${i}-close-icon`)}))}}),pe=typeof L.onClick=="function"||m&&m.type==="a",ue=R||null,ve=ue?o.createElement(o.Fragment,null,ue,m&&o.createElement("span",null,m)):m,me=o.createElement("span",Object.assign({},oe,{ref:r,className:de,style:Z}),ve,fe,p&&o.createElement(g,{key:"preset",prefixCls:i}),d&&o.createElement($,{key:"status",prefixCls:i}));return Y(pe?o.createElement(S.Z,{component:"Tag"},me):me)});ne.CheckableTag=te;var ie=ne}}]);
