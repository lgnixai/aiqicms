"use strict";(self.webpackChunkAnQiCMS=self.webpackChunkAnQiCMS||[]).push([[7826],{85606:function(W,h,e){var S=e(48305),f=e.n(S),T=e(75304),d=e(22683),I=e(96570),v=e(75271),g=e(52676),A=function(E){var P=(0,v.useState)(void 0),l=f()(P,2),s=l[0],K=l[1],b=(0,v.useState)(""),D=f()(b,2),R=D[0],M=D[1],i=function(){(0,T.roP)({type:"multi"}).then(function(u){var n=(u.data||[]).map(function(m){return{key:m.id,tab:m.name,is_main:m.is_main}});K(n);var o=(0,d.KJ)("sub-site-id");!o&&n.length>0&&(o=n[0].key+"");var _=n.find(function(m){return m.key===Number(o)}),c=!1;_&&(c=!0,_.is_main&&(c=!1)),(0,d.Xq)("is-sub-site",c),M(o)})};(0,v.useEffect)(function(){i()},[]);var L=function(u){var n;M(u),(0,d.Xq)("sub-site-id",u);var o=s.find(function(c){return c.key===Number(u)}),_=!0;o.is_main&&(_=!1),(0,d.Xq)("is-sub-site",_),(n=E.onTabChange)===null||n===void 0||n.call(E,u,_)};return(0,g.jsx)(I._z,{tabList:s,tabActiveKey:R,onTabChange:L,title:E.title,children:E.children})};h.Z=A},21018:function(W,h,e){e.r(h);var S=e(48305),f=e.n(S),T=e(85606),d=e(89417),I=e(18640),v=e(32064),g=e(91827),A=e(53745),U=e(47634),E=e(16483),P=e.n(E),l=e(75271),s=e(52676),K=function(){var D=(0,l.useRef)(),R=(0,v.useModel)("@@initialState"),M=R.initialState,i=(0,v.useIntl)(),L=(0,l.useState)([]),C=f()(L,2),u=C[0],n=C[1],o=(0,l.useState)(""),_=f()(o,2),c=_[0],m=_[1],p=(0,l.useState)(""),x=f()(p,2),y=x[0],B=x[1],j=function(t){(0,d.Ss)().then(function(a){n(a.data||[]),B(t)})};(0,l.useEffect)(function(){(0,d.Ss)().then(function(r){n(r.data||[])}),m(P()().format("YYYYMMDD"))},[]);var N=function(t){var a;window.open(((M==null||(a=M.system)===null||a===void 0?void 0:a.base_url)||"")+t)},Y=function(t){var a,O;m(t),(a=D.current)===null||a===void 0||(O=a.reloadAndRest)===null||O===void 0||O.call(a)},Z=[{title:i.formatMessage({id:"account.time"}),dataIndex:"created_time",width:160,render:function(t,a){return P()(a.created_time*1e3).format("YYYY-MM-DD HH:mm")}},{title:i.formatMessage({id:"statistic.host"}),dataIndex:"host"},{title:i.formatMessage({id:"statistic.url"}),dataIndex:"url",width:200,ellipsis:!0,render:function(t,a){return(0,s.jsx)("div",{className:"link",onClick:function(){return N(a.url)},children:t})}},{title:"IP",dataIndex:"ip",width:160},{title:i.formatMessage({id:"statistic.device"}),dataIndex:"device",width:100},{title:i.formatMessage({id:"statistic.spider-name"}),dataIndex:"spider",width:80},{title:i.formatMessage({id:"statistic.http-code"}),dataIndex:"http_code",width:80},{title:i.formatMessage({id:"statistic.user-agent"}),dataIndex:"user_agent",ellipsis:!0}];return(0,s.jsx)(T.Z,{onTabChange:function(t){return j(t)},children:(0,s.jsx)(g.Z,{children:(0,s.jsx)(I.Z,{tableExtraRender:function(){return(0,s.jsx)("div",{className:"statistic-dates",children:(0,s.jsx)(A.Z,{wrap:!0,size:16,children:u.map(function(t){return(0,s.jsx)(U.ZP,{type:c===t?"primary":"default",onClick:function(){return Y(t)},children:t},t)})})})},headerTitle:i.formatMessage({id:"statistic.traffic.detail"}),actionRef:D,rowKey:"id",search:!1,request:function(t){return t.date=c,(0,d.Ud)(t)},columnsState:{persistenceKey:"statistic-detail-table",persistenceType:"localStorage"},columns:Z,pagination:{showSizeChanger:!0}})},y)})};h.default=K}}]);
