"use strict";(self.webpackChunkAnQiCMS=self.webpackChunkAnQiCMS||[]).push([[1028],{56534:function(rt,ke,o){var X=o(18201),pe=o(66342),ge=o(59831),Q=o(37697),Ce=o(75271),r=o(73428),Pe=o(31945),m=o(52676),Be=["options","fieldProps","proFieldProps","valueEnum"],j=Ce.forwardRef(function(H,ae){var le=H.options,Ze=H.fieldProps,v=H.proFieldProps,ze=H.valueEnum,De=(0,pe.Z)(H,Be);return(0,m.jsx)(Pe.Z,(0,X.Z)({ref:ae,valueType:"checkbox",valueEnum:(0,ge.h)(ze,void 0),fieldProps:(0,X.Z)({options:le},Ze),lightProps:(0,X.Z)({labelFormatter:function(){return(0,m.jsx)(Pe.Z,(0,X.Z)({ref:ae,valueType:"checkbox",mode:"read",valueEnum:(0,ge.h)(ze,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,X.Z)({options:le},Ze),proFieldProps:v},De))}},De.lightProps),proFieldProps:v},De))}),Te=Ce.forwardRef(function(H,ae){var le=H.fieldProps,Ze=H.children;return(0,m.jsx)(Q.Z,(0,X.Z)((0,X.Z)({ref:ae},le),{},{children:Ze}))}),be=(0,r.G)(Te,{valuePropName:"checked"}),C=be;C.Group=j,ke.Z=C},6289:function(rt,ke,o){var X=o(18201),pe=o(66342),ge=o(75271),Q=o(38465),Ce=o(31945),r=o(52676),Pe=["fieldProps","proFieldProps"],m="dateTime",Be=ge.forwardRef(function(j,Te){var be=j.fieldProps,C=j.proFieldProps,H=(0,pe.Z)(j,Pe),ae=(0,ge.useContext)(Q.Z);return(0,r.jsx)(Ce.Z,(0,X.Z)({ref:Te,fieldProps:(0,X.Z)({getPopupContainer:ae.getPopupContainer},be),valueType:m,proFieldProps:C,filedConfig:{valueType:m,customLightMode:!0}},H))});ke.Z=Be},85606:function(rt,ke,o){var X=o(48305),pe=o.n(X),ge=o(75304),Q=o(22683),Ce=o(96570),r=o(75271),Pe=o(52676),m=function(j){var Te=(0,r.useState)(void 0),be=pe()(Te,2),C=be[0],H=be[1],ae=(0,r.useState)(""),le=pe()(ae,2),Ze=le[0],v=le[1],ze=function(){(0,ge.roP)({type:"multi"}).then(function(xe){var oe=(xe.data||[]).map(function(ee){return{key:ee.id,tab:ee.name,is_main:ee.is_main}});H(oe);var we=(0,Q.KJ)("sub-site-id");!we&&oe.length>0&&(we=oe[0].key+"");var ue=oe.find(function(ee){return ee.key===Number(we)}),Y=!1;ue&&(Y=!0,ue.is_main&&(Y=!1)),(0,Q.Xq)("is-sub-site",Y),v(we)})};(0,r.useEffect)(function(){ze()},[]);var De=function(xe){var oe;v(xe),(0,Q.Xq)("sub-site-id",xe);var we=C.find(function(Y){return Y.key===Number(xe)}),ue=!0;we.is_main&&(ue=!1),(0,Q.Xq)("is-sub-site",ue),(oe=j.onTabChange)===null||oe===void 0||oe.call(j,xe,ue)};return(0,Pe.jsx)(Ce._z,{tabList:C,tabActiveKey:Ze,onTabChange:De,title:j.title,children:j.children})};ke.Z=m},46274:function(rt,ke,o){o.r(ke),o.d(ke,{default:function(){return ra}});var X=o(26068),pe=o.n(X),ge=o(335),Q=o.n(ge),Ce=o(90228),r=o.n(Ce),Pe=o(87999),m=o.n(Pe),Be=o(48305),j=o.n(Be),Te=o(85606),be=o(56972),C=o(75304),H=o(1812),ae=o(6217),le=o(22683),Ze=o(13233),v=o(75271),ze={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}}]},name:"star",theme:"outlined"},De=ze,qe=o(35244),xe=function(w,R){return v.createElement(qe.Z,(0,Ze.Z)({},w,{ref:R,icon:De}))},oe=v.forwardRef(xe),we=oe,ue=o(16621),Y=o(41265),ee=o(76334),ut=o(18640),Ie=o(35937),ct=o(56534),Re=o(96640),g=o(32064),Oe=o(54203),M=o(34206),dt=o(18874),Nt=o(16268),ft=o(21261),mt=o(15947),pt=o(12964),Xe=o(53745),Lt=o(69997),We=o(94354),U=o(47634),Kt=o(16483),Je=o.n(Kt),e=o(52676),st=!1,Ut=function(w){var R=(0,g.useIntl)(),ne=(0,v.useRef)(),Ee=(0,v.useState)(!1),te=j()(Ee,2),z=te[0],se=te[1],W=(0,v.useState)([]),he=j()(W,2),Ne=he[0],ce=he[1],J=(0,v.useState)([{id:0,title:R.formatMessage({id:"content.parent_id.empty"})}]),de=j()(J,2),ve=de[0],Me=de[1],je=function(h){(0,C.Lig)({title:h,pageSize:10}).then(function(f){var p=[{id:0,title:R.formatMessage({id:"content.parent_id.empty"})}];Me(p.concat(f.data||[]))})},ye=function(h,f,p){if(!st){var x=parseInt(p);if(isNaN(x)){M.ZP.error(R.formatMessage({id:"content.sort.required"}));return}if(x!==f.sort){if(x<0){M.ZP.error(R.formatMessage({id:"content.sort.required"}));return}st=!0,(0,C.ggI)({sort:x,id:f.id}).then(function(n){var y,$;M.ZP.success(n.msg),(y=ne.current)===null||y===void 0||($=y.reload)===null||$===void 0||$.call(y)}).finally(function(){st=!1})}}},P=function(h){Oe.Z.confirm({title:R.formatMessage({id:"content.delete.confirm"}),onOk:function(){var f=m()(r()().mark(function x(){var n,y,$;return r()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(n=M.ZP.loading({content:R.formatMessage({id:"content.delete.deletting"}),key:"delete"},0),h){T.next=3;break}return T.abrupt("return",!0);case 3:return T.prev=3,T.next=6,(0,C.ksR)({ids:h,parent_id:0});case 6:return n(),M.ZP.success(R.formatMessage({id:"content.delete.success"})),ce([]),(y=ne.current)===null||y===void 0||($=y.reloadAndRest)===null||$===void 0||$.call(y),T.abrupt("return",!0);case 13:return T.prev=13,T.t0=T.catch(3),n(),M.ZP.error(R.formatMessage({id:"content.delete.failure"})),T.abrupt("return",!0);case 18:case"end":return T.stop()}},x,null,[[3,13]])}));function p(){return f.apply(this,arguments)}return p}()})},Fe=function(){var I=m()(r()().mark(function h(f){var p;return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:p=f.ids||0,p.length>0&&(0,C.ksR)({ids:p,parent_id:w.parent.id}).then(function(y){var $;($=ne.current)===null||$===void 0||$.reload()}),se(!1);case 3:case"end":return n.stop()}},h)}));return function(f){return I.apply(this,arguments)}}(),V=[{title:"ID",dataIndex:"id",hideInSearch:!0,sorter:!0},{title:R.formatMessage({id:"content.sort.name"}),dataIndex:"sort",hideInSearch:!0,sorter:!0,tooltip:R.formatMessage({id:"content.sort.tips"}),width:90,render:function(h,f,p){return(0,e.jsx)("div",{children:(0,e.jsx)(mt.Z,{onBlur:function(n){ye(p,f,n.target.value)},onPressEnter:function(n){var y;ye(p,f,(y=n.target)===null||y===void 0?void 0:y.value)},defaultValue:f.sort})})}},{title:R.formatMessage({id:"content.title.name"}),dataIndex:"title",render:function(h,f){return(0,e.jsx)("div",{style:{maxWidth:400},children:(0,e.jsx)("a",{href:f.link,target:"_blank",rel:"noreferrer",children:h})})}},{title:R.formatMessage({id:"content.module.name"}),dataIndex:"module_id",render:function(h,f){return f.module_name}},{title:R.formatMessage({id:"content.category.name"}),dataIndex:"category_titles",render:function(h,f){var p;return(0,e.jsx)("div",{children:(p=f.category_titles)===null||p===void 0?void 0:p.map(function(x){return(0,e.jsx)("div",{children:x},x)})})}},{title:R.formatMessage({id:"website.status"}),dataIndex:"status",valueEnum:{0:{text:R.formatMessage({id:"content.status.draft"}),status:"Default"},1:{text:R.formatMessage({id:"content.status.normal"}),status:"Success"},2:{text:R.formatMessage({id:"content.status.plan"}),status:"Warning"}}},{title:R.formatMessage({id:"setting.action"}),dataIndex:"option",valueType:"option",render:function(h,f){return(0,e.jsx)(Xe.Z,{size:20,children:(0,e.jsx)("a",{className:"text-red",onClick:m()(r()().mark(function p(){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,P([f.id]);case 2:case"end":return n.stop()}},p)})),children:(0,e.jsx)(g.FormattedMessage,{id:"setting.system.delete"})})})}}];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Oe.Z,{open:w.open,width:1100,title:R.formatMessage({id:"content.children.btn"}),onCancel:function(){return w.onOpenChange(!1)},onOk:function(){return w.onOpenChange(!1)},children:(0,e.jsx)(ut.Z,{actionRef:ne,rowKey:"id",search:!1,toolBarRender:function(){return[(0,e.jsxs)(U.ZP,{type:"primary",onClick:function(){se(!0)},children:[(0,e.jsx)(ue.Z,{})," ",(0,e.jsx)(g.FormattedMessage,{id:"content.archive.add"})]},"add")]},columnsState:{persistenceKey:"archive-table",persistenceType:"localStorage"},tableAlertOptionRender:function(h){var f=h.selectedRowKeys,p=h.onCleanSelected;return(0,e.jsxs)(Xe.Z,{children:[(0,e.jsx)(U.ZP,{size:"small",onClick:m()(r()().mark(function x(){return r()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,P(f);case 2:case"end":return y.stop()}},x)})),children:(0,e.jsx)(g.FormattedMessage,{id:"content.option.batch-delete"})}),(0,e.jsx)(U.ZP,{type:"link",size:"small",onClick:p,children:(0,e.jsx)(g.FormattedMessage,{id:"content.option.cancel-select"})})]})},request:function(){var I=m()(r()().mark(function h(f){var p;return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return f.exact=!0,f.sort="sort desc,created_time",f.order="desc",f.parent_id=w.parent.id,n.next=6,(0,C.Lig)(f);case 6:return p=n.sent,n.abrupt("return",p);case 8:case"end":return n.stop()}},h)}));return function(h){return I.apply(this,arguments)}}(),columns:V,rowSelection:{preserveSelectedRowKeys:!0,onChange:function(h){ce(h)}},pagination:{showSizeChanger:!0}})}),z&&(0,e.jsx)(Ie.Y,{title:R.formatMessage({id:"content.children.btn"}),open:z,onOpenChange:function(h){return se(h)},onFinish:Fe,children:(0,e.jsx)(Y.Z,{name:"ids",showSearch:!0,mode:"multiple",options:ve.map(function(I){return{title:I.title,label:I.title,value:I.id,disabled:I.id===w.parent.id}}),fieldProps:{onSearch:function(h){je(h)}}})})]})},Bt=Ut,zt=o(15558),gt=o.n(zt),Wt=o(17361),Vt=o(71384),ht=o(9921),vt=o(59124),et=o(48806),_t=o(43330),Yt=o(48782),Gt=o(67852),Ge=!1,Mt,Qt=function(w){var R=(0,v.useState)(0),ne=j()(R,2),Ee=ne[0],te=ne[1],z=(0,v.useState)(null),se=j()(z,2),W=se[0],he=se[1],Ne=(0,v.useState)(null),ce=j()(Ne,2),J=ce[0],de=ce[1],ve=(0,v.useState)(0),Me=j()(ve,2),je=Me[0],ye=Me[1],P=(0,v.useState)([]),Fe=j()(P,2),V=Fe[0],I=Fe[1],h=(0,v.useState)(0),f=j()(h,2),p=f[0],x=f[1],n=(0,g.useIntl)(),y=function(){var O=m()(r()().mark(function b(){return r()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:(0,C.Y9A)().then(function(D){D.data?de(D.data):(Ge&&(Ge=!1,w.onOpenChange(!1)),de(null))});case 1:case"end":return E.stop()}},b)}));return function(){return O.apply(this,arguments)}}();(0,v.useEffect)(function(){return y(),Mt=setInterval(function(){y()},1e3),function(){Ge=!1,clearInterval(Mt)}},[]);var $=function(b){V.splice(b,1),I(gt()(V))},K=function(b){var _=Q()(b),E;try{for(_.s();!(E=_.n()).done;){var D=E.value,fe=!1;for(var Se in V)if(V[Se]===D.logo){fe=!0;break}fe||V.push(D.logo)}}catch(Ke){_.e(Ke)}finally{_.f()}I(gt()(V))},T=function(b){he(b.file)},re=function(){if(p===0){M.ZP.error(n.formatMessage({id:"content.quick-import.category_id.required"}));return}(0,ae.Sv)("/archive/import/exceltemplate",{category_id:p})},Le=function(){var O=m()(r()().mark(function b(_){var E,D,fe,Se,Ke,Qe,at,nt,Ue,$e,me,_e,Ae;return r()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(W){N.next=3;break}return M.ZP.info(n.formatMessage({id:"content.quick-import.upload-file-required"})),N.abrupt("return");case 3:if(_.category_id){N.next=6;break}return M.ZP.info(n.formatMessage({id:"content.quick-import.category-required"})),N.abrupt("return");case 6:E=new FormData,D=M.ZP.loading({content:n.formatMessage({id:"setting.system.submitting"}),duration:0,key:"uploading"});for(fe in _)E.append(fe,_[fe]);Se=Q()(V);try{for(Se.s();!(Ke=Se.n()).done;)Qe=Ke.value,E.append("images[]",Qe)}catch(He){Se.e(He)}finally{Se.f()}return at=W.size,N.next=14,(0,ae.rt)(W);case 14:if(nt=N.sent,Ue=2097152,$e=Math.ceil(at/Ue),E.append("file_name",W.name),E.append("md5",nt),!($e>1)){N.next=44;break}E.append("chunks",$e+""),me=0;case 22:if(!(me<$e)){N.next=42;break}return _e=W.slice(me*Ue,(me+1)*Ue),_e.name=W.name,_e.uid=W.uid,E.set("chunk",me+""),E.set("file",_e),N.prev=28,N.next=31,(0,C.ofO)(E);case 31:Ae=N.sent,Ae.code!==0?(M.ZP.info(Ae.msg),D()):(D=M.ZP.loading({content:n.formatMessage({id:"setting.system.submitting"})+" - "+Math.ceil((me+1)*100/$e)+"%",duration:0,key:"uploading"}),Ae.data&&(D(),M.ZP.info(Ae.msg||n.formatMessage({id:"setting.system.upload-success"})),Ge=!0,y())),N.next=39;break;case 35:N.prev=35,N.t0=N.catch(28),D(),M.ZP.info(n.formatMessage({id:"content.quick-import.upload-failed"}));case 39:me++,N.next=22;break;case 42:N.next=46;break;case 44:E.append("file",W),(0,C.ofO)(E).then(function(He){M.ZP.success(He.msg),Ge=!0,y()}).finally(function(){D()});case 46:case"end":return N.stop()}},b,null,[[28,35]])}));return function(_){return O.apply(this,arguments)}}();return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(Ie.Y,{open:w.open,width:600,title:n.formatMessage({id:"content.quick-import.name"}),layout:"horizontal",onOpenChange:function(b){w.onOpenChange(b)},onFinish:Le,children:[(0,e.jsx)(ht.Z,{children:(0,e.jsx)(g.FormattedMessage,{id:"content.quick-import.step1"})}),(0,e.jsx)(ee.Z.Group,{name:"plan_type",width:"lg",label:n.formatMessage({id:"content.quick-import.type"}),valueEnum:{0:n.formatMessage({id:"content.quick-import.type.normal"}),1:n.formatMessage({id:"content.quick-import.type.draft"}),2:n.formatMessage({id:"content.quick-import.type.plan"})},fieldProps:{onChange:function(b){te(b.target.value)}}}),Number(Ee)===2&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Y.Z,{name:"plan_start",label:n.formatMessage({id:"content.quick-import.plan_start"}),valueEnum:{0:n.formatMessage({id:"content.quick-import.plan_start.0"}),1:n.formatMessage({id:"content.quick-import.plan_start.1"}),2:n.formatMessage({id:"content.quick-import.plan_start.2"}),3:n.formatMessage({id:"content.quick-import.plan_start.3"}),4:n.formatMessage({id:"content.quick-import.plan_start.4"}),5:n.formatMessage({id:"content.quick-import.plan_start.5"}),6:n.formatMessage({id:"content.quick-import.plan_start.6"}),7:n.formatMessage({id:"content.quick-import.plan_start.7"}),8:n.formatMessage({id:"content.quick-import.plan_start.8"}),9:n.formatMessage({id:"content.quick-import.plan_start.9"}),10:n.formatMessage({id:"content.quick-import.plan_start.10"}),11:n.formatMessage({id:"content.quick-import.plan_start.11"}),12:n.formatMessage({id:"content.quick-import.plan_start.12"}),13:n.formatMessage({id:"content.quick-import.plan_start.13"})}}),(0,e.jsx)(Vt.Z,{name:"days",required:!0,label:n.formatMessage({id:"content.quick-import.days"}),width:"lg",fieldProps:{addonAfter:n.formatMessage({id:"content.quick-import.days.suffix"})}})]}),(0,e.jsx)(ee.Z.Group,{name:"title_type",width:"lg",label:n.formatMessage({id:"content.quick-import.title-type"}),valueEnum:{0:n.formatMessage({id:"content.quick-import.title-type.title"}),1:n.formatMessage({id:"content.quick-import.title-type.content"})}}),(0,e.jsx)(ee.Z.Group,{name:"check_duplicate",width:"lg",label:n.formatMessage({id:"content.quick-import.check_duplicate"}),valueEnum:{0:n.formatMessage({id:"content.quick-import.check_duplicate.default"}),1:n.formatMessage({id:"content.quick-import.check_duplicate.check"})}}),(0,e.jsx)(Y.Z,{name:"category_id",required:!0,label:n.formatMessage({id:"content.quick-import.category_id.title"}),request:m()(r()().mark(function O(){var b;return r()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,(0,C.CPB)({type:1});case 2:return b=E.sent,E.abrupt("return",[{spacer:"",title:n.formatMessage({id:"content.please-select"}),id:0}].concat(b.data||[]));case 4:case"end":return E.stop()}},O)})),fieldProps:{fieldNames:{label:"title",value:"id"},onChange:function(b){x(b)},optionItemRender:function(b){return(0,e.jsx)("div",{dangerouslySetInnerHTML:{__html:b.spacer+b.title}})}}}),(0,e.jsx)(ee.Z.Group,{name:"insert_image",label:n.formatMessage({id:"plugin.aigenerate.insert-image"}),options:[{label:n.formatMessage({id:"plugin.aigenerate.insert-image.default"}),value:0},{label:n.formatMessage({id:"plugin.aigenerate.insert-image.diy"}),value:2},{label:n.formatMessage({id:"plugin.aigenerate.insert-image.category"}),value:3}],fieldProps:{onChange:function(b){ye(b.target.value)}}}),je===2&&(0,e.jsx)(Re.Z,{label:n.formatMessage({id:"plugin.aigenerate.insert-image.list"}),children:(0,e.jsx)("div",{className:"insert-image",children:(0,e.jsxs)(vt.Z,{gutter:[16,16],className:"image-list",children:[V==null?void 0:V.map(function(O,b){return(0,e.jsx)(et.Z,{span:6,children:(0,e.jsx)("div",{className:"image-item",children:(0,e.jsx)("div",{className:"inner",children:(0,e.jsxs)("div",{className:"link",children:[(0,e.jsx)(_t.Z,{className:"img",preview:!0,src:O}),(0,e.jsx)("span",{className:"close",onClick:function(){return $(b)},children:(0,e.jsx)(g.FormattedMessage,{id:"setting.system.delete"})})]})})})},b)}),(0,e.jsx)(et.Z,{span:6,children:(0,e.jsx)("div",{className:"image-item",children:(0,e.jsx)("div",{className:"inner",children:(0,e.jsx)("div",{className:"link",children:(0,e.jsx)(Wt.Z,{onSelect:K,open:!1,multiple:!0,children:(0,e.jsx)("div",{className:"ant-upload-item",children:(0,e.jsxs)("div",{className:"add",children:[(0,e.jsx)(ue.Z,{}),(0,e.jsx)("div",{style:{marginTop:8},children:(0,e.jsx)(g.FormattedMessage,{id:"setting.system.upload"})})]})})})})})})})]})})}),je===3&&(0,e.jsx)(Y.Z,{label:n.formatMessage({id:"plugin.aigenerate.image.category"}),name:"image_category_id",required:!0,extra:n.formatMessage({id:"plugin.aigenerate.image.category.description"}),request:m()(r()().mark(function O(){var b,_;return r()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,(0,C.Nre)();case 2:return b=D.sent,_=(b.data||[]).concat({id:0,title:n.formatMessage({id:"plugin.aigenerate.image.category.default"})},{id:-1,title:n.formatMessage({id:"plugin.aigenerate.image.category.all"})},{id:-2,title:n.formatMessage({id:"plugin.aigenerate.image.category.match"})}),D.abrupt("return",_);case 5:case"end":return D.stop()}},O)})),fieldProps:{fieldNames:{label:"title",value:"id"}}}),(0,e.jsxs)(ht.Z,{children:[(0,e.jsx)(g.FormattedMessage,{id:"content.quick-import.step2"}),(0,e.jsx)("div",{className:"download-template",children:(0,e.jsx)(U.ZP,{type:"link",onClick:re,children:(0,e.jsx)(g.FormattedMessage,{id:"content.quick-import.excel-template"})})})]}),(0,e.jsxs)(Re.Z,{label:n.formatMessage({id:"content.quick-import.upload"}),extra:n.formatMessage({id:"content.quick-import.upload.description"}),children:[(0,e.jsx)(Yt.Z,{name:"file",multiple:!0,showUploadList:!1,accept:".zip,.xlsx",customRequest:function(b){T(b)},children:(0,e.jsx)(U.ZP,{children:(0,e.jsx)(g.FormattedMessage,{id:"content.quick-import.upload.btn"})})}),W&&(0,e.jsxs)("div",{className:"mt-normal",children:[(0,e.jsx)(g.FormattedMessage,{id:"content.quick-import.upload.selected"}),W.name]})]})]}),J!==null&&(0,e.jsxs)(Oe.Z,{title:n.formatMessage({id:"content.quick-import.status"}),open:!0,footer:null,children:[(0,e.jsx)("div",{className:"task-progress",children:(0,e.jsx)(Gt.Z,{percent:J.is_finished?100:Math.ceil(J.finished*100/J.total)})}),(0,e.jsx)("div",{className:"task-message",children:J.message})]})]})},Ht=Qt,Aa=o(38308),qt=o(31759),Xt=o.n(qt),Jt=o(66857),ea=o(6289),ta=function(w){var R=(0,v.useState)({}),ne=j()(R,2),Ee=ne[0],te=ne[1],z=(0,v.useState)({}),se=j()(z,2),W=se[0],he=se[1],Ne=(0,v.useState)({}),ce=j()(Ne,2),J=ce[0],de=ce[1],ve=(0,v.useState)(!1),Me=j()(ve,2),je=Me[0],ye=Me[1],P=(0,g.useIntl)(),Fe=function(){var h=m()(r()().mark(function f(p){var x,n,y;return r()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,(0,C.CY9)({id:p});case 2:n=K.sent,y=n.data||{extra:{},flag:null},y.flag=((x=y.flag)===null||x===void 0?void 0:x.split(","))||[],y.created_moment=Je()(y.created_time*1e3),de(y),ye(!0);case 8:case"end":return K.stop()}},f)}));return function(p){return h.apply(this,arguments)}}();(0,v.useEffect)(function(){Fe(w.archive.id),(0,C.Zyq)().then(function(h){he(h.data||{})})},[]);var V=function(){var h=m()(r()().mark(function f(p){var x,n,y,$,K,T,re;return r()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(n=Object.assign(J,p),n.title!==""){O.next=4;break}return M.ZP.error(P.formatMessage({id:"content.title.required"})),O.abrupt("return");case 4:if(y=[],$=0,typeof p.category_ids=="number")$=Number(p.category_ids);else{for(K in p.category_ids)p.category_ids[K]>0&&y.push(p.category_ids[K]);y.length>0&&($=y[0])}if($!==0){O.next=10;break}return M.ZP.error(P.formatMessage({id:"content.category.required"})),O.abrupt("return");case 10:return n.category_id=$,n.category_ids=y,Xt()(n.flag)==="object"&&(n.flag=n.flag.join(",")),n.content=((x=J.data)===null||x===void 0?void 0:x.content)||"",n.quick_save=!0,T=M.ZP.loading(P.formatMessage({id:"setting.system.submitting"}),0),O.next=18,(0,C.uf6)(n);case 18:re=O.sent,T(),re.code!==0?M.ZP.error(re.msg):((0,le.PQ)("latest_update",{id:re.data.id,timestamp:new Date().getTime()/1e3}),M.ZP.success(re.msg)),w.onSubmit();case 22:case"end":return O.stop()}},f)}));return function(p){return h.apply(this,arguments)}}(),I=function(f){var p,x=((p=f.target)===null||p===void 0?void 0:p.value)||"";(0,C.NJe)({type:1,title:x,pageSize:10}).then(function(n){var y=n.data||[],$={},K=Q()(y),T;try{for(K.s();!(T=K.n()).done;){var re=T.value;$[re.title]=re.title}}catch(Le){K.e(Le)}finally{K.f()}te($)})};return je&&(0,e.jsx)(Ie.Y,{width:900,title:P.formatMessage({id:"content.action.quick-edit"}),initialValues:J,open:w.open,layout:"vertical",onOpenChange:function(f){f||w.onCancel(f)},onFinish:function(){var h=m()(r()().mark(function f(p){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:V(p);case 1:case"end":return n.stop()}},f)}));return function(f){return h.apply(this,arguments)}}(),children:(0,e.jsxs)(vt.Z,{gutter:16,children:[(0,e.jsxs)(et.Z,{span:12,children:[(0,e.jsx)(Re.Z,{name:"title",label:P.formatMessage({id:"content.title.name"})}),(0,e.jsx)(Re.Z,{name:"keywords",label:P.formatMessage({id:"content.keywords.name"})}),(0,e.jsx)(Jt.Z,{name:"description",label:P.formatMessage({id:"content.description.name"})}),(0,e.jsx)(ct.Z.Group,{name:"flag",label:P.formatMessage({id:"content.flag.name"}),valueEnum:{h:P.formatMessage({id:"content.flag.h"}),c:P.formatMessage({id:"content.flag.c"}),f:P.formatMessage({id:"content.flag.f"}),a:P.formatMessage({id:"content.flag.a"}),s:P.formatMessage({id:"content.flag.s"}),b:P.formatMessage({id:"content.flag.b"}),p:P.formatMessage({id:"content.flag.p"}),j:P.formatMessage({id:"content.flag.j"})}})]}),(0,e.jsxs)(et.Z,{span:12,children:[(0,e.jsx)(Y.Z,{label:P.formatMessage({id:"content.category.name"}),showSearch:!0,name:"category_ids",mode:W.multi_category===1?"multiple":"single",request:m()(r()().mark(function h(){var f,p;return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,C.CPB)({type:1});case 2:return f=n.sent,p=f.data||[],p.length===0&&Oe.Z.error({title:P.formatMessage({id:"content.category.error"}),onOk:function(){g.history.push("/archive/category")}}),n.abrupt("return",p);case 6:case"end":return n.stop()}},h)})),fieldProps:{fieldNames:{label:"title",value:"id"},optionItemRender:function(f){return(0,e.jsx)("div",{dangerouslySetInnerHTML:{__html:f.spacer+f.title}})}}}),(0,e.jsx)(Y.Z,{label:P.formatMessage({id:"content.tag.name"}),mode:"tags",name:"tags",valueEnum:Ee,placeholder:P.formatMessage({id:"content.tag.placeholder"}),fieldProps:{tokenSeparators:[",","\uFF0C"],onInputKeyDown:I,onFocus:I},extra:P.formatMessage({id:"content.tag.placeholder"})}),(0,e.jsx)(Re.Z,{label:P.formatMessage({id:"content.url-token.name"}),name:"url_token",placeholder:P.formatMessage({id:"content.url-token.placeholder"}),extra:P.formatMessage({id:"content.url-token.tips"})}),(0,e.jsx)(ea.Z,{name:"created_moment",label:P.formatMessage({id:"content.create-time.name"}),placeholder:P.formatMessage({id:"content.url-token.placeholder"}),extra:P.formatMessage({id:"content.create-time.description"}),transform:function(f){return{created_time:f?Je()(f).unix():0}}})]})]})})},aa=ta,jt="",Ve=!1,B={module_id:0,category_id:0,status:"ok",flag:"",exact:!1},na=function(){var w=(0,v.useRef)(),R=(0,v.useRef)(),ne=(0,v.useState)([]),Ee=j()(ne,2),te=Ee[0],z=Ee[1],se=(0,v.useState)(!1),W=j()(se,2),he=W[0],Ne=W[1],ce=(0,v.useState)(!1),J=j()(ce,2),de=J[0],ve=J[1],Me=(0,v.useState)(!1),je=j()(Me,2),ye=je[0],P=je[1],Fe=(0,v.useState)(!1),V=j()(Fe,2),I=V[0],h=V[1],f=(0,v.useState)(!1),p=j()(f,2),x=p[0],n=p[1],y=(0,v.useState)(!1),$=j()(y,2),K=$[0],T=$[1],re=(0,v.useState)([]),Le=j()(re,2),O=Le[0],b=Le[1],_=(0,v.useState)(0),E=j()(_,2),D=E[0],fe=E[1],Se=(0,v.useState)({}),Ke=j()(Se,2),Qe=Ke[0],at=Ke[1],nt=(0,v.useState)({}),Ue=j()(nt,2),$e=Ue[0],me=Ue[1],_e=(0,v.useState)(!1),Ae=j()(_e,2),it=Ae[0],N=Ae[1],He=(0,v.useState)(!1),yt=j()(He,2),sa=yt[0],ia=yt[1],la=(0,v.useState)(0),St=j()(la,2),oa=St[0],ua=St[1],ca=(0,v.useState)(!1),kt=j()(ca,2),Ct=kt[0],Pt=kt[1],da=(0,v.useState)(""),bt=j()(da,2),fa=bt[0],ma=bt[1],pa=(0,v.useState)(!1),Zt=j()(pa,2),ga=Zt[0],ha=Zt[1],va=(0,v.useState)(!1),xt=j()(va,2),wt=xt[0],It=xt[1],s=(0,g.useIntl)(),Rt={h:s.formatMessage({id:"content.flag.h"}),c:s.formatMessage({id:"content.flag.c"}),f:s.formatMessage({id:"content.flag.f"}),a:s.formatMessage({id:"content.flag.a"}),s:s.formatMessage({id:"content.flag.s"}),b:s.formatMessage({id:"content.flag.b"}),p:s.formatMessage({id:"content.flag.p"}),j:s.formatMessage({id:"content.flag.j"})},Ot=function(){(0,C.Zyq)().then(function(a){at((a==null?void 0:a.data)||{})}).catch()},Et=function(){var c=m()(r()().mark(function a(){var t;return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,C.hUj)({});case 2:t=l.sent,b([{title:s.formatMessage({id:"content.archive.all"}),id:0}].concat(t.data||[]));case 4:case"end":return l.stop()}},a)}));return function(){return c.apply(this,arguments)}}(),lt=function(){var a=(0,le.bh)("latest_update")||{};a.timestamp>new Date().getTime()/1e3-60*60*24*7&&ua(a.id||0)},Ma=function(a,t){fe(B.module_id),Et(),Ot(),lt(),ma(a),ha(t)};(0,v.useEffect)(function(){fe(B.module_id),Et(),Ot(),lt()},[]);var Ft=function(a){var t,i;B.module_id=a,fe(a),(t=R.current)===null||t===void 0||t.setFieldsValue({module_id:a,category_id:0}),g.history.replace("/archive/list?module_id="+a),(i=R.current)===null||i===void 0||i.submit()},ja=function(a){var t=a;if(sa)B=t,t.module_id!==D&&Ft(t.module_id);else{var i;ia(!0);var l=new URLSearchParams(window.location.search);B.module_id=Number(l.get("module_id")||0),B.category_id=Number(l.get("category_id")||0),B.status=l.get("status")||"ok",(i=R.current)===null||i===void 0||i.setFieldsValue(B),t=B}return t},$t=function(){var c=m()(r()().mark(function a(t){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:Oe.Z.confirm({title:s.formatMessage({id:"content.delete.confirm"}),onOk:function(){var d=m()(r()().mark(function k(){var S,Z,q,G,ie,Ye;return r()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(S=M.ZP.loading(s.formatMessage({id:"content.delete.deletting"}),0),t){A.next=3;break}return A.abrupt("return",!0);case 3:A.prev=3,G=Q()(t),A.prev=5,G.s();case 7:if((ie=G.n()).done){A.next=13;break}return Ye=ie.value,A.next=11,(0,C.R5s)({id:Ye});case 11:A.next=7;break;case 13:A.next=18;break;case 15:A.prev=15,A.t0=A.catch(5),G.e(A.t0);case 18:return A.prev=18,G.f(),A.finish(18);case 21:return S(),M.ZP.success(s.formatMessage({id:"content.delete.success"})),z([]),(Z=w.current)===null||Z===void 0||(q=Z.reloadAndRest)===null||q===void 0||q.call(Z),A.abrupt("return",!0);case 28:return A.prev=28,A.t1=A.catch(3),S(),M.ZP.error(s.formatMessage({id:"content.delete.failure"})),A.abrupt("return",!0);case 33:case"end":return A.stop()}},k,null,[[3,28],[5,15,18,21]])}));function u(){return d.apply(this,arguments)}return u}()});case 1:case"end":return l.stop()}},a)}));return function(t){return c.apply(this,arguments)}}(),ya=function(){var c=m()(r()().mark(function a(t){var i;return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:i=M.ZP.loading(s.formatMessage({id:"setting.system.submitting"}),0),(0,C.IIy)({flag:t.flag.join(","),ids:te}).then(function(u){var k,S;M.ZP.success(u.msg),ve(!1),z([]),(k=w.current)===null||k===void 0||(S=k.reload)===null||S===void 0||S.call(k)}).finally(function(){i()});case 2:case"end":return d.stop()}},a)}));return function(t){return c.apply(this,arguments)}}(),Sa=function(){var c=m()(r()().mark(function a(t){var i;return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:i=M.ZP.loading(s.formatMessage({id:"setting.system.submitting"}),0),(0,C.x1P)({status:Number(t.status),ids:te}).then(function(u){var k,S;M.ZP.success(u.msg),P(!1),z([]),(k=w.current)===null||k===void 0||(S=k.reloadAndRest)===null||S===void 0||S.call(k)}).finally(function(){i()});case 2:case"end":return d.stop()}},a)}));return function(t){return c.apply(this,arguments)}}(),ka=function(){var c=m()(r()().mark(function a(t){var i;return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:i=M.ZP.loading(s.formatMessage({id:"setting.system.submitting"}),0),(0,C.l$h)({time:Number(t.time),ids:te}).then(function(u){var k,S;M.ZP.success(u.msg),n(!1),z([]),(k=w.current)===null||k===void 0||(S=k.reloadAndRest)===null||S===void 0||S.call(k)}).finally(function(){i()});case 2:case"end":return d.stop()}},a)}));return function(t){return c.apply(this,arguments)}}(),Ca=function(){var c=m()(r()().mark(function a(t){var i,l,d,u;return r()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(i=[],l=0,typeof t.category_ids=="number")l=Number(t.category_ids);else{for(d in t.category_ids)t.category_ids[d]>0&&i.push(t.category_ids[d]);i.length>0&&(l=i[0])}if(l!==0){S.next=6;break}return M.ZP.error(s.formatMessage({id:"content.category.required"})),S.abrupt("return");case 6:u=M.ZP.loading(s.formatMessage({id:"setting.system.submitting"}),0),(0,C.DfJ)({category_id:l,category_ids:i,ids:te}).then(function(Z){var q,G;M.ZP.success(Z.msg),h(!1),z([]),(q=w.current)===null||q===void 0||(G=q.reload)===null||G===void 0||G.call(q)}).finally(function(){u()});case 8:case"end":return S.stop()}},a)}));return function(t){return c.apply(this,arguments)}}(),Pa=function(){var c=m()(r()().mark(function a(t){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:g.history.push("/archive/detail?id="+t.id);case 1:case"end":return l.stop()}},a)}));return function(t){return c.apply(this,arguments)}}(),ba=function(){var c=m()(r()().mark(function a(t){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:g.history.push("/archive/detail?copyid="+t.id);case 1:case"end":return l.stop()}},a)}));return function(t){return c.apply(this,arguments)}}(),Za=function(a){me(a),It(!0)},At=function(a){Oe.Z.confirm({title:s.formatMessage({id:"content.translate.confirm"}),content:(0,e.jsxs)("div",{children:[(0,e.jsx)(dt.Z,{className:"mb-normal",message:s.formatMessage({id:"content.translate.tips"})}),(0,e.jsx)("div",{className:"",children:s.formatMessage({id:"content.translate.select-language"})}),(0,e.jsx)(Nt.default,{style:{width:"100%"},onChange:function(i){jt=i},options:ae.vI.map(function(t){return{label:t.label,value:t.value}})})]}),onOk:function(){var t=m()(r()().mark(function l(){var d,u,k,S,Z,q,G,ie;return r()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(a){F.next=2;break}return F.abrupt("return",!0);case 2:d=M.ZP.loading(s.formatMessage({id:"content.translate.translating"}),0),F.prev=3,S="",Z=Q()(a),F.prev=6,Z.s();case 8:if((q=Z.n()).done){F.next=16;break}return G=q.value,F.next=12,(0,C.wFk)({id:G,to_language:jt});case 12:ie=F.sent,S=ie.msg;case 14:F.next=8;break;case 16:F.next=21;break;case 18:F.prev=18,F.t0=F.catch(6),Z.e(F.t0);case 21:return F.prev=21,Z.f(),F.finish(21);case 24:return d(),M.ZP.info(S),z([]),(u=w.current)===null||u===void 0||(k=u.reloadAndRest)===null||k===void 0||k.call(u),F.abrupt("return",!0);case 31:return F.prev=31,F.t1=F.catch(3),d(),F.abrupt("return",!0);case 35:case"end":return F.stop()}},l,null,[[3,31],[6,18,21,24]])}));function i(){return t.apply(this,arguments)}return i}()})},xa=function(){var c=m()(r()().mark(function a(t){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:At([t.id]);case 1:case"end":return l.stop()}},a)}));return function(t){return c.apply(this,arguments)}}(),Tt=function(){var c=m()(r()().mark(function a(t){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:Oe.Z.confirm({title:s.formatMessage({id:"content.pseudo.confirm"}),content:s.formatMessage({id:"content.pseudo.content"}),onOk:function(){var d=m()(r()().mark(function k(){var S,Z,q,G,ie,Ye,F,A;return r()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(t){L.next=2;break}return L.abrupt("return",!0);case 2:S=M.ZP.loading(s.formatMessage({id:"setting.system.submitting"}),0),L.prev=3,G="",ie=Q()(t),L.prev=6,ie.s();case 8:if((Ye=ie.n()).done){L.next=16;break}return F=Ye.value,L.next=12,(0,C.adz)({id:F});case 12:A=L.sent,G=A.msg;case 14:L.next=8;break;case 16:L.next=21;break;case 18:L.prev=18,L.t0=L.catch(6),ie.e(L.t0);case 21:return L.prev=21,ie.f(),L.finish(21);case 24:return S(),M.ZP.info(G),z([]),(Z=w.current)===null||Z===void 0||(q=Z.reloadAndRest)===null||q===void 0||q.call(Z),L.abrupt("return",!0);case 31:return L.prev=31,L.t1=L.catch(3),S(),L.abrupt("return",!0);case 35:case"end":return L.stop()}},k,null,[[3,31],[6,18,21,24]])}));function u(){return d.apply(this,arguments)}return u}()});case 1:case"end":return l.stop()}},a)}));return function(t){return c.apply(this,arguments)}}(),wa=function(){var c=m()(r()().mark(function a(t){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:Tt([t.id]);case 1:case"end":return l.stop()}},a)}));return function(t){return c.apply(this,arguments)}}(),Ia=function(a){var t=a.split(",");return(0,e.jsx)("span",{children:t.map(function(i){return(0,e.jsx)(ft.Z,{children:Rt[i]||i},i)})})},Dt=function(a,t,i){if(!Ve){if(i=parseInt(i),isNaN(i)){M.ZP.error(s.formatMessage({id:"content.sort.required"}));return}if(i!==t.sort){if(i<0){M.ZP.error(s.formatMessage({id:"content.sort.required"}));return}Ve=!0,(0,C.ggI)({sort:i,id:t.id}).then(function(l){var d,u;M.ZP.success(l.msg),(d=w.current)===null||d===void 0||(u=d.reload)===null||u===void 0||u.call(d)}).finally(function(){Ve=!1})}}},Ra=function(){var c=m()(r()().mark(function a(t){var i;return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!Ve){d.next=2;break}return d.abrupt("return");case 2:Ve=!0,i=M.ZP.loading(s.formatMessage({id:"setting.system.submitting"}),0),(0,C.kQq)({daily_limit:Number(t.daily_limit),start_hour:Number(t.start_hour),end_hour:Number(t.end_hour),ids:te}).then(function(u){var k,S;M.ZP.success(u.msg),T(!1),z([]),(k=w.current)===null||k===void 0||(S=k.reloadAndRest)===null||S===void 0||S.call(k)}).finally(function(){i(),Ve=!1});case 5:case"end":return d.stop()}},a)}));return function(t){return c.apply(this,arguments)}}(),Oa=function(a){me(a),N(!0)},Ea=function(){var a,t;M.ZP.loading(s.formatMessage({id:"content.count.loading"})),B.exact=!0,(a=w.current)===null||a===void 0||(t=a.reload)===null||t===void 0||t.call(a)},Fa=function(a){Oe.Z.confirm({title:s.formatMessage({id:"content.option.batch-add-anchor.confirm"}),onOk:function(){var t=m()(r()().mark(function l(){var d,u,k;return r()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(d=M.ZP.loading(s.formatMessage({id:"setting.system.submitting"}),0),a){Z.next=3;break}return Z.abrupt("return",!0);case 3:return Z.prev=3,Z.next=6,(0,C.o9V)({type:"category",ids:a});case 6:return d(),M.ZP.success(s.formatMessage({id:"content.submit.success"})),z([]),(u=w.current)===null||u===void 0||(k=u.reloadAndRest)===null||k===void 0||k.call(u),Z.abrupt("return",!0);case 13:return Z.prev=13,Z.t0=Z.catch(3),d(),M.ZP.error(s.formatMessage({id:"content.submit.failure"})),Z.abrupt("return",!0);case 18:case"end":return Z.stop()}},l,null,[[3,13]])}));function i(){return t.apply(this,arguments)}return i}()})},$a={title:s.formatMessage({id:"content.sort.name"}),dataIndex:"sort",hideInSearch:!0,sorter:!0,tooltip:s.formatMessage({id:"content.sort.tips"}),width:90,render:function(a,t,i){return(0,e.jsx)("div",{children:(0,e.jsx)(mt.Z,{onBlur:function(d){Dt(i,t,d.target.value)},onPressEnter:function(d){var u;Dt(i,t,(u=d.target)===null||u===void 0?void 0:u.value)},defaultValue:t.sort})})}},ot=[{title:"ID",dataIndex:"id",hideInSearch:!0,sorter:!0},{title:s.formatMessage({id:"content.title.name"}),dataIndex:"title",render:function(a,t){return(0,e.jsx)("div",{style:{maxWidth:400},children:(0,e.jsxs)("a",{href:t.link,target:"_blank",children:[oa===t.id&&(0,e.jsx)(pt.Z,{title:s.formatMessage({id:"content.latest-update"}),children:(0,e.jsx)(we,{className:"update-tag"})}),a," ",t.flag&&Ia(t.flag)]})})}},{title:"thumb",dataIndex:"thumb",hideInSearch:!0,width:70,render:function(a,t){return a?(0,e.jsx)("img",{src:t.thumb,className:"list-thumb"}):null}},{title:s.formatMessage({id:"content.module.name"}),dataIndex:"module_id",render:function(a,t){return t.module_name},renderFormItem:function(){return(0,e.jsx)(Y.Z,{name:"module_id",request:m()(r()().mark(function a(){var t,i;return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,C.hUj)({});case 2:return t=d.sent,i=[{name:s.formatMessage({id:"content.archive.all"}),id:0}].concat(t.data||[]).map(function(u){return{label:u.name,value:u.id}}),d.abrupt("return",i);case 5:case"end":return d.stop()}},a)}))})}},{title:s.formatMessage({id:"content.category.name"}),dataIndex:"category_titles",render:function(a,t){var i;return(0,e.jsx)("div",{children:(i=t.category_titles)===null||i===void 0?void 0:i.map(function(l){return(0,e.jsx)("div",{children:l},l)})})},renderFormItem:function(a,t){var i=t.fieldProps;return(0,e.jsx)(Y.Z,{name:"category_id",request:m()(r()().mark(function l(){var d,u;return r()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,H.CP)({type:1});case 2:return d=S.sent,u=[{spacer:"",title:s.formatMessage({id:"content.category.all"}),id:0,status:1}].concat(d.data||[]).map(function(Z){return{spacer:Z.spacer,label:Z.title+(Z.status===1?"":s.formatMessage({id:"setting.nav.hide"})),value:Z.id}}),S.abrupt("return",u);case 5:case"end":return S.stop()}},l)})),fieldProps:pe()(pe()({},i),{},{optionItemRender:function(d){return(0,e.jsx)("div",{dangerouslySetInnerHTML:{__html:d.spacer+d.label}})}})})}},{title:s.formatMessage({id:"content.views.name"}),dataIndex:"views",hideInSearch:!0,sorter:!0},{title:"Flag",dataIndex:"flag",hideInTable:!0,renderFormItem:function(){return(0,e.jsx)(Y.Z,{name:"flag",valueEnum:Object.assign({"":s.formatMessage({id:"content.unlimit"})},Rt)})}},{title:s.formatMessage({id:"website.status"}),dataIndex:"status",valueEnum:{0:{text:s.formatMessage({id:"content.status.draft"}),status:"Default"},1:{text:s.formatMessage({id:"content.status.normal"}),status:"Success"},2:{text:s.formatMessage({id:"content.status.plan"}),status:"Warning"}},renderFormItem:function(){return(0,e.jsx)(ee.Z.Group,{name:"status",options:[{label:s.formatMessage({id:"content.status.normal"}),value:"ok"},{label:s.formatMessage({id:"content.status.draft"}),value:"draft"},{label:s.formatMessage({id:"content.status.plan"}),value:"plan"}]})}},{title:s.formatMessage({id:"content.create-update-time"}),hideInSearch:!0,sorter:!0,dataIndex:"created_time",render:function(a,t){return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:Je()(t.created_time*1e3).format("YYYY-MM-DD HH:mm")}),t.created_time!==t.updated_time&&(0,e.jsx)("div",{className:"update-color",children:Je()(t.updated_time*1e3).format("YYYY-MM-DD HH:mm")})]})}},{title:s.formatMessage({id:"setting.action"}),dataIndex:"option",valueType:"option",render:function(a,t){return(0,e.jsxs)(Xe.Z,{size:20,children:[(0,e.jsx)("a",{onClick:function(){Pa(t)},children:(0,e.jsx)(g.FormattedMessage,{id:"setting.action.edit"})},"edit"),(0,e.jsx)("a",{onClick:function(){return Oa(t)},children:(0,e.jsx)(g.FormattedMessage,{id:"content.action.quick-edit"})}),(0,e.jsx)(Lt.Z,{overlay:(0,e.jsxs)(We.Z,{children:[(0,e.jsx)(We.Z.Item,{children:(0,e.jsx)("a",{onClick:function(){xa(t)},title:s.formatMessage({id:"content.action.translate.tips"}),children:(0,e.jsx)(g.FormattedMessage,{id:"content.action.translate"})})}),(0,e.jsx)(We.Z.Item,{children:(0,e.jsx)("a",{onClick:function(){wa(t)},title:s.formatMessage({id:"content.action.aipseudo.tips"}),children:(0,e.jsx)(g.FormattedMessage,{id:"content.action.aipseudo"})})}),(0,e.jsx)(We.Z.Item,{children:(0,e.jsx)("a",{onClick:function(){Za(t)},children:(0,e.jsx)(g.FormattedMessage,{id:"content.children.btn"})})}),(0,e.jsx)(We.Z.Item,{children:(0,e.jsx)("a",{onClick:function(){ba(t)},title:s.formatMessage({id:"content.action.copy.tips"}),children:(0,e.jsx)(g.FormattedMessage,{id:"content.action.copy"})})}),(0,e.jsx)(We.Z.Item,{danger:!0,children:(0,e.jsx)("a",{className:"text-red",onClick:m()(r()().mark(function i(){return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,$t([t.id]);case 2:case"end":return d.stop()}},i)})),children:(0,e.jsx)(g.FormattedMessage,{id:"setting.system.delete"})})})]}),children:(0,e.jsx)("a",{children:(0,e.jsx)(g.FormattedMessage,{id:"content.action.more"})})},"more")]})}}];return(0,e.jsxs)(Te.Z,{onTabChange:Ma,children:[(0,e.jsx)(ut.Z,{headerTitle:(0,e.jsx)("div",{className:"module-tags",children:O.map(function(c){return(0,e.jsx)("div",{className:"module-tag "+(c.id===D?"active":""),onClick:function(){Ft(c.id)},children:c.id===0?s.formatMessage({id:"content.archive.all"}):c.name},c.id)})}),actionRef:w,rowKey:"id",search:{span:{xs:24,sm:12,md:8,lg:8,xl:8,xxl:8},defaultCollapsed:!1},formRef:R,form:{initialValues:B},beforeSearchSubmit:ja,toolBarRender:function(){return[(0,e.jsx)(U.ZP,{onClick:function(){g.history.push("/archive/recycle")},children:(0,e.jsx)(g.FormattedMessage,{id:"content.recycle.name"})},"recycle"),(0,e.jsx)(U.ZP,{onClick:function(){Pt(!0)},children:(0,e.jsx)(g.FormattedMessage,{id:"content.quick-import.name"})},"import"),(0,e.jsx)(U.ZP,{onClick:function(){Ne(!0)},children:(0,e.jsx)(g.FormattedMessage,{id:"content.replace.name"})},"replace"),!ga&&(0,e.jsxs)(U.ZP,{type:"primary",onClick:function(){D>0?g.history.push("/archive/detail?module_id="+D):g.history.push("/archive/detail")},children:[(0,e.jsx)(ue.Z,{})," ",(0,e.jsx)(g.FormattedMessage,{id:"content.archive.add"})]},"add")]},columnsState:{persistenceKey:"archive-table",persistenceType:"localStorage"},tableAlertOptionRender:function(a){var t=a.selectedRowKeys,i=a.onCleanSelected;return(0,e.jsxs)(Xe.Z,{wrap:!0,children:[(0,e.jsx)(U.ZP,{size:"small",onClick:m()(r()().mark(function l(){return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,ve(!0);case 2:case"end":return u.stop()}},l)})),children:(0,e.jsx)(g.FormattedMessage,{id:"content.option.change-flag"})}),(0,e.jsx)(U.ZP,{size:"small",onClick:m()(r()().mark(function l(){return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,h(!0);case 2:case"end":return u.stop()}},l)})),children:(0,e.jsx)(g.FormattedMessage,{id:"content.option.change-category"})}),(0,e.jsx)(U.ZP,{size:"small",onClick:m()(r()().mark(function l(){return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,n(!0);case 2:case"end":return u.stop()}},l)})),children:(0,e.jsx)(g.FormattedMessage,{id:"content.option.reflash-time"})}),(0,e.jsx)(U.ZP,{size:"small",onClick:m()(r()().mark(function l(){return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,P(!0);case 2:case"end":return u.stop()}},l)})),children:(0,e.jsx)(g.FormattedMessage,{id:"content.option.update-status"})}),(0,e.jsx)(U.ZP,{size:"small",onClick:m()(r()().mark(function l(){return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,T(!0);case 2:case"end":return u.stop()}},l)})),children:(0,e.jsx)(g.FormattedMessage,{id:"content.option.plan-send"})}),(0,e.jsx)(U.ZP,{size:"small",onClick:m()(r()().mark(function l(){return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,At(t);case 2:case"end":return u.stop()}},l)})),children:(0,e.jsx)(g.FormattedMessage,{id:"content.option.batch-translate"})}),(0,e.jsx)(U.ZP,{size:"small",onClick:m()(r()().mark(function l(){return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Tt(t);case 2:case"end":return u.stop()}},l)})),children:(0,e.jsx)(g.FormattedMessage,{id:"content.option.batch-pseudo"})}),(0,e.jsx)(U.ZP,{size:"small",onClick:function(){return Fa(t)},children:(0,e.jsx)(g.FormattedMessage,{id:"content.option.batch-add-anchor"})}),(0,e.jsx)(U.ZP,{size:"small",onClick:m()(r()().mark(function l(){return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,$t(t);case 2:case"end":return u.stop()}},l)})),children:(0,e.jsx)(g.FormattedMessage,{id:"content.option.batch-delete"})}),(0,e.jsx)(U.ZP,{type:"link",size:"small",onClick:i,children:(0,e.jsx)(g.FormattedMessage,{id:"content.option.cancel-select"})})]})},request:function(){var c=m()(r()().mark(function a(t,i){var l,d;return r()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:for(l in i)t.sort=l,t.order=i[l]==="ascend"?"asc":"desc";return t.exact=B.exact,B=t,k.next=5,(0,C.Lig)(t);case 5:return d=k.sent,B.exact=d.exact||!1,k.abrupt("return",d);case 8:case"end":return k.stop()}},a)}));return function(a,t){return c.apply(this,arguments)}}(),columns:(Qe.use_sort&&ot.splice(1,0,$a),ot),rowSelection:{preserveSelectedRowKeys:!0,onChange:function(a){z(a)}},pagination:{showSizeChanger:!0,defaultCurrent:B.current,defaultPageSize:B.pageSize,showTotal:function(a,t){return(0,e.jsxs)("div",{children:[B.exact===!1&&(0,e.jsx)(pt.Z,{title:s.formatMessage({id:"content.count.tips.tooltip"}),children:(0,e.jsx)(ft.Z,{className:"link",color:"orange",onClick:Ea,children:(0,e.jsx)(g.FormattedMessage,{id:"content.count.tips"})})}),(0,e.jsx)(g.FormattedMessage,{id:"content.archive.total",values:{total:a,range0:t[0],range1:t[1]}})]})}}},fa),he&&(0,e.jsx)(be.Z,{open:he,onCancel:function(){Ne(!1)}}),de&&(0,e.jsx)(Ie.Y,{width:480,title:s.formatMessage({id:"content.flag.select"}),open:de,onFinish:ya,onOpenChange:function(a){return ve(a)},children:(0,e.jsx)(ct.Z.Group,{name:"flag",valueEnum:{h:s.formatMessage({id:"content.flag.h"}),c:s.formatMessage({id:"content.flag.c"}),f:s.formatMessage({id:"content.flag.f"}),a:s.formatMessage({id:"content.flag.a"}),s:s.formatMessage({id:"content.flag.s"}),b:s.formatMessage({id:"content.flag.b"}),p:s.formatMessage({id:"content.flag.p"}),j:s.formatMessage({id:"content.flag.j"})}})}),ye&&(0,e.jsx)(Ie.Y,{width:480,title:s.formatMessage({id:"content.status.select"}),open:ye,onFinish:Sa,onOpenChange:function(a){return P(a)},children:(0,e.jsx)(ee.Z.Group,{name:"status",valueEnum:{0:s.formatMessage({id:"content.status.draft"}),1:s.formatMessage({id:"content.status.normal"})}})}),x&&(0,e.jsx)(Ie.Y,{width:480,title:s.formatMessage({id:"content.time.select"}),open:x,onFinish:ka,onOpenChange:function(a){return n(a)},children:(0,e.jsx)(ee.Z.Group,{name:"time",initialValue:1,valueEnum:{1:s.formatMessage({id:"content.time.create-time"}),2:s.formatMessage({id:"content.time.update-time"}),3:s.formatMessage({id:"content.time.create-time-all"}),4:s.formatMessage({id:"content.time.update-time-all"})}})}),I&&(0,e.jsx)(Ie.Y,{width:480,title:s.formatMessage({id:"content.category.select"}),open:I,onFinish:Ca,onOpenChange:function(a){return h(a)},children:(0,e.jsx)(Y.Z,{name:"category_ids",request:m()(r()().mark(function c(){var a;return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,H.CP)({type:1});case 2:return a=i.sent,i.abrupt("return",[{spacer:"",title:s.formatMessage({id:"content.please-select"}),id:0}].concat(a.data||[]));case 4:case"end":return i.stop()}},c)})),fieldProps:{mode:Qe.multi_category===1?"multiple":void 0,fieldNames:{label:"title",value:"id"},optionItemRender:function(a){return(0,e.jsx)("div",{dangerouslySetInnerHTML:{__html:a.spacer+a.title}})}}})}),K&&(0,e.jsxs)(Ie.Y,{width:480,title:s.formatMessage({id:"content.plan.name"}),open:K,onFinish:Ra,onOpenChange:function(a){return T(a)},children:[(0,e.jsx)(dt.Z,{className:"mb-normal",message:(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:(0,e.jsx)(g.FormattedMessage,{id:"content.plan.tips"})}),(0,e.jsxs)("div",{children:[(0,e.jsx)(g.FormattedMessage,{id:"content.plan.tips.before"})," ",(0,e.jsx)("span",{className:"text-red",children:te.length})," ",(0,e.jsx)(g.FormattedMessage,{id:"content.plan.tips.after"})]})]})}),(0,e.jsx)(Re.Z,{name:"daily_limit",label:s.formatMessage({id:"content.plan.daily-limit"}),placeholder:s.formatMessage({id:"content.plan.daily-limit.placeholder"}),addonAfter:s.formatMessage({id:"content.plan.daily-limit.suffix"})}),(0,e.jsx)(Re.Z,{name:"start_hour",initialValue:8,label:s.formatMessage({id:"content.plan.start-hour"}),placeholder:s.formatMessage({id:"content.plan.start-hour.placeholder"}),addonAfter:s.formatMessage({id:"content.plan.start-hour.suffix"})}),(0,e.jsx)(Re.Z,{name:"end_hour",initialValue:20,label:s.formatMessage({id:"content.plan.end-hour"}),placeholder:s.formatMessage({id:"content.plan.end-hour.placeholder"}),addonAfter:s.formatMessage({id:"content.plan.start-hour.suffix"})})]}),it&&(0,e.jsx)(aa,{archive:$e,open:it,onSubmit:m()(r()().mark(function c(){var a,t;return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:(a=w.current)===null||a===void 0||(t=a.reload)===null||t===void 0||t.call(a),N(!1),lt();case 3:case"end":return l.stop()}},c)})),onCancel:function(){return N(!1)}}),Ct&&(0,e.jsx)(Ht,{open:Ct,onOpenChange:function(a){if(Pt(a),a===!1){var t,i;(t=w.current)===null||t===void 0||(i=t.reload)===null||i===void 0||i.call(t)}}}),wt&&(0,e.jsx)(Bt,{open:wt,parent:$e,onOpenChange:function(a){It(a)}})]})},ra=na},38308:function(){}}]);
