"use strict";(self.webpackChunkAnQiCMS=self.webpackChunkAnQiCMS||[]).push([[6671],{41265:function(V,A,n){var h=n(18201),v=n(66342),B=n(59831),u=n(75271),U=n(38465),b=n(31945),P=n(52676),g=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],L=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],r=function(_,d){var f=_.fieldProps,M=_.children,x=_.params,D=_.proFieldProps,o=_.mode,s=_.valueEnum,m=_.request,O=_.showSearch,i=_.options,e=(0,v.Z)(_,g),$=(0,u.useContext)(U.Z);return(0,P.jsx)(b.Z,(0,h.Z)((0,h.Z)({valueEnum:(0,B.h)(s),request:m,params:x,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,h.Z)({options:i,mode:o,showSearch:O,getPopupContainer:$.getPopupContainer},f),ref:d,proFieldProps:D},e),{},{children:M}))},S=u.forwardRef(function(c,_){var d=c.fieldProps,f=c.children,M=c.params,x=c.proFieldProps,D=c.mode,o=c.valueEnum,s=c.request,m=c.options,O=(0,v.Z)(c,L),i=(0,h.Z)({options:m,mode:D||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},d),e=(0,u.useContext)(U.Z);return(0,P.jsx)(b.Z,(0,h.Z)((0,h.Z)({valueEnum:(0,B.h)(o),request:s,params:M,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,h.Z)({getPopupContainer:e.getPopupContainer},i),ref:_,proFieldProps:x},O),{},{children:f}))}),C=u.forwardRef(r),j=S,T=C;T.SearchSelect=j,T.displayName="ProFormComponent",A.Z=T},85606:function(V,A,n){var h=n(48305),v=n.n(h),B=n(75304),u=n(22683),U=n(96570),b=n(75271),P=n(52676),g=function(r){var S=(0,b.useState)(void 0),C=v()(S,2),j=C[0],T=C[1],c=(0,b.useState)(""),_=v()(c,2),d=_[0],f=_[1],M=function(){(0,B.roP)({type:"multi"}).then(function(o){var s=(o.data||[]).map(function(e){return{key:e.id,tab:e.name,is_main:e.is_main}});T(s);var m=(0,u.KJ)("sub-site-id");!m&&s.length>0&&(m=s[0].key+"");var O=s.find(function(e){return e.key===Number(m)}),i=!1;O&&(i=!0,O.is_main&&(i=!1)),(0,u.Xq)("is-sub-site",i),f(m)})};(0,b.useEffect)(function(){M()},[]);var x=function(o){var s;f(o),(0,u.Xq)("sub-site-id",o);var m=j.find(function(i){return i.key===Number(o)}),O=!0;m.is_main&&(O=!1),(0,u.Xq)("is-sub-site",O),(s=r.onTabChange)===null||s===void 0||s.call(r,o,O)};return(0,P.jsx)(U._z,{tabList:j,tabActiveKey:d,onTabChange:x,title:r.title,children:r.children})};A.Z=g},17361:function(V,A,n){var h=n(48305),v=n.n(h),B=n(54203),u=n(75271),U=n(99944),b=n(76979),P=n(52676),g=function(r){var S=(0,u.useState)(!1),C=v()(S,2),j=C[0],T=C[1],c=(0,u.useState)([]),_=v()(c,2),d=_[0],f=_[1],M=function(s){if(r.manual){var m;(m=r.onCancel)===null||m===void 0||m.call(r,s)}else T(s)},x=function(s){r.multiple?f(s):(r.onSelect(s),M(!1))},D=function(){r.multiple&&r.onSelect(d),M(!1)};return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("div",{style:{display:"inline-block"},onClick:function(){M(!j)},children:r.children}),(0,P.jsx)(B.Z,{className:"material-modal",width:800,open:r.manual?r.open:j,onCancel:function(){M(!1)},onOk:function(){D()},children:(0,P.jsx)(U.Z,{multiple:r.multiple,onSelect:function(s){x(s)}})})]})};A.Z=g},78637:function(V,A,n){n.r(A);var h=n(90228),v=n.n(h),B=n(87999),u=n.n(B),U=n(15558),b=n.n(U),P=n(48305),g=n.n(P),L=n(17361),r=n(85606),S=n(75304),C=n(16621),j=n(18640),T=n(35937),c=n(41265),_=n(96640),d=n(32064),f=n(34206),M=n(54203),x=n(43330),D=n(53745),o=n(91827),s=n(47634),m=n(9921),O=n(15947),i=n(75271),e=n(52676),$=function(){var X=(0,i.useRef)(),re=(0,i.useState)({}),Y=g()(re,2),K=Y[0],I=Y[1],oe=(0,i.useState)(!1),H=g()(oe,2),w=H[0],W=H[1],ie=(0,i.useState)([]),k=g()(ie,2),Z=k[0],q=k[1],le=(0,i.useState)("default"),ee=g()(le,2),F=ee[0],ne=ee[1],de=(0,i.useState)(""),te=g()(de,2),ue=te[0],ce=te[1],E=(0,d.useIntl)(),me=(0,i.useState)(""),ae=g()(me,2),z=ae[0],se=ae[1],_e=(0,i.useRef)(null),ve=function(t){se(t.target.value)},Ee=function(t){if(t.preventDefault(),!z){f.ZP.error(E.formatMessage({id:"setting.banner.name.require"}));return}q([].concat(b()(Z),[{type:z,list:[]}])),se(""),setTimeout(function(){var l;(l=_e.current)===null||l===void 0||l.focus()},0)},N=function(){var a=u()(v()().mark(function t(){return v()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:(0,S.msr)().then(function(R){var y=R.data||[];q(y),F==="default"&&y.length>0&&ne(y[0].type)});case 1:case"end":return p.stop()}},t)}));return function(){return a.apply(this,arguments)}}(),he=function(t){N().then(function(){ce(t)})};(0,i.useEffect)(function(){N()},[]);var fe=function(t){ne(t)},pe=function(t){I(t),W(!0)},Pe=function(t){M.Z.confirm({title:E.formatMessage({id:"setting.banner.confirm-delete"}),onOk:function(){(0,S.nEU)(t).then(function(p){var R;f.ZP.success(p.msg),N(),(R=X.current)===null||R===void 0||R.reload()})}})},ge=function(t){K.logo=t.logo,I(Object.assign({},K))},Me=function(t){t.stopPropagation(),K.logo="",I(Object.assign({},K))},Oe=function(){I({}),W(!0)},De=function(){var a=u()(v()().mark(function t(l){var p,R;return v()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:p=Object.assign(K,l),R=f.ZP.loading(E.formatMessage({id:"setting.system.submitting"}),0),(0,S.g$W)(p).then(function(Q){var J;f.ZP.success(Q.msg),W(!1),N(),(J=X.current)===null||J===void 0||J.reload()}).catch(function(Q){console.log(Q)}).finally(function(){R()});case 3:case"end":return G.stop()}},t)}));return function(l){return a.apply(this,arguments)}}(),Ce=[{title:E.formatMessage({id:"setting.banner.logo"}),dataIndex:"logo",width:800,render:function(t,l){return(0,e.jsx)("div",{className:"text-center",children:(0,e.jsx)(x.Z,{src:l.logo,style:{height:150,objectFit:"contain"}})})}},{title:E.formatMessage({id:"setting.banner.name-link"}),dataIndex:"link",width:800,render:function(t,l){return(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{children:[(0,e.jsx)(d.FormattedMessage,{id:"setting.banner.link"}),l.link]}),(0,e.jsxs)("div",{children:[(0,e.jsx)(d.FormattedMessage,{id:"setting.banner.alt"}),l.alt]}),(0,e.jsxs)("div",{children:[(0,e.jsx)(d.FormattedMessage,{id:"setting.banner.description"}),l.description]})]})}},{title:E.formatMessage({id:"setting.action"}),dataIndex:"option",valueType:"option",width:180,render:function(t,l){return(0,e.jsxs)(D.Z,{size:20,children:[(0,e.jsx)("a",{onClick:function(){pe(l)},children:(0,e.jsx)(d.FormattedMessage,{id:"setting.action.edit"})},"edit"),(0,e.jsx)("a",{className:"text-red",onClick:u()(v()().mark(function p(){return v()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:Pe(l);case 1:case"end":return y.stop()}},p)})),children:(0,e.jsx)(d.FormattedMessage,{id:"setting.system.delete"})},"delete")]})}}];return(0,e.jsx)(r.Z,{onTabChange:function(t){return he(t)},children:(0,e.jsxs)(o.Z,{title:(0,e.jsx)("div",{children:(0,e.jsx)(D.Z,{children:Z.map(function(a){return(0,e.jsx)(s.ZP,{type:F===a.type?"primary":"default",onClick:function(){fe(a.type)},children:a.type},a.type)})})}),children:[Z.map(function(a,t){return a.type===F?(0,e.jsx)(j.Z,{toolBarRender:function(){return[(0,e.jsx)(s.ZP,{onClick:Oe,children:(0,e.jsx)(d.FormattedMessage,{id:"setting.action.add"})},"add")]},rowKey:"name",headerTitle:F+E.formatMessage({id:"setting.banner.group-list"}),columnsState:{persistenceKey:"banner-table",persistenceType:"localStorage"},columns:Ce,actionRef:X,search:!1,dataSource:a.list,pagination:!1},t):null}),w&&(0,e.jsxs)(T.Y,{width:600,title:E.formatMessage({id:"setting.banner.banner"}),open:w,modalProps:{onCancel:function(){return W(!1)}},initialValues:K,onFinish:De,children:[(0,e.jsx)(c.Z,{name:"type",label:E.formatMessage({id:"setting.banner.group"}),options:Z.map(function(a){return{label:a.type,value:a.type}}),fieldProps:{dropdownRender:function(t){return(0,e.jsxs)(e.Fragment,{children:[t,(0,e.jsx)(m.Z,{style:{margin:"8px 0"}}),(0,e.jsxs)(D.Z,{style:{padding:"0 8px 4px"},children:[(0,e.jsx)(O.Z,{placeholder:E.formatMessage({id:"setting.banner.group.placeholder"}),ref:_e,value:z,onChange:ve,onKeyDown:function(p){return p.stopPropagation()}}),(0,e.jsx)(s.ZP,{type:"text",icon:(0,e.jsx)(C.Z,{}),onClick:Ee,children:E.formatMessage({id:"setting.banner.group.add"})})]})]})}}}),(0,e.jsx)(_.Z,{label:E.formatMessage({id:"setting.banner.logo-name"}),children:(0,e.jsx)(L.Z,{onSelect:ge,open:!1,children:(0,e.jsx)("div",{className:"ant-upload-item",children:K.logo?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("img",{src:K.logo,style:{width:"100%"}}),(0,e.jsx)("a",{className:"delete",onClick:Me,children:(0,e.jsx)(d.FormattedMessage,{id:"setting.system.delete"})})]}):(0,e.jsxs)("div",{className:"add",children:[(0,e.jsx)(C.Z,{}),(0,e.jsx)("div",{style:{marginTop:8},children:(0,e.jsx)(d.FormattedMessage,{id:"setting.system.upload"})})]})})})}),(0,e.jsx)(_.Z,{name:"link",label:E.formatMessage({id:"setting.banner.link-name"})}),(0,e.jsx)(_.Z,{name:"alt",label:E.formatMessage({id:"setting.banner.alt-name"})}),(0,e.jsx)(_.Z,{name:"description",label:E.formatMessage({id:"setting.banner.description-name"})})]})]},ue)})};A.default=$}}]);
