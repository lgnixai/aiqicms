"use strict";(self.webpackChunkAnQiCMS=self.webpackChunkAnQiCMS||[]).push([[7423],{85606:function(B,c,e){var T=e(48305),m=e.n(T),A=e(75304),l=e(22683),E=e(96570),u=e(75271),L=e(52676),v=function(s){var b=(0,u.useState)(void 0),K=m()(b,2),M=K[0],f=K[1],h=(0,u.useState)(""),D=m()(h,2),P=D[0],g=D[1],S=function(){(0,A.roP)({type:"multi"}).then(function(o){var t=(o.data||[]).map(function(r){return{key:r.id,tab:r.name,is_main:r.is_main}});f(t);var d=(0,l.KJ)("sub-site-id");!d&&t.length>0&&(d=t[0].key+"");var _=t.find(function(r){return r.key===Number(d)}),i=!1;_&&(i=!0,_.is_main&&(i=!1)),(0,l.Xq)("is-sub-site",i),g(d)})};(0,u.useEffect)(function(){S()},[]);var U=function(o){var t;g(o),(0,l.Xq)("sub-site-id",o);var d=M.find(function(i){return i.key===Number(o)}),_=!0;d.is_main&&(_=!1),(0,l.Xq)("is-sub-site",_),(t=s.onTabChange)===null||t===void 0||t.call(s,o,_)};return(0,L.jsx)(E._z,{tabList:M,tabActiveKey:P,onTabChange:U,title:s.title,children:s.children})};c.Z=v},66366:function(B,c,e){e.r(c);var T=e(48305),m=e.n(T),A=e(85606),l=e(75304),E=e(32064),u=e(34206),L=e(91827),v=e(75271),w=e(8600),s=e(52676),b=function(){var M=(0,E.useModel)("@@initialState"),f=M.initialState,h=(0,v.useRef)(null),D=(0,v.useState)(0),P=m()(D,2),g=P[0],S=P[1],U=(0,v.useState)(""),O=m()(U,2),o=O[0],t=O[1],d=(0,E.useIntl)(),_=function(n){var a=n.data||{};if(a.action==="download"){var I=u.ZP.loading(d.formatMessage({id:"design.market.downloading"}),0);(0,l.Xow)({template_id:Number(a.id)}).then(function(W){u.ZP.info(W.msg),W.code===0&&setTimeout(function(){E.history.push("/design/index")},1e3)}).finally(function(){I()})}},i=function(){var n,a=((n=window)===null||n===void 0?void 0:n.innerHeight)-260;a<450?a=450:a>900&&(a=900),S(a)},r=function(n){t(n)};(0,v.useEffect)(function(){return i(),window.addEventListener("resize",i),window.addEventListener("message",_),function(){window.removeEventListener("resize",i),window.removeEventListener("message",_)}},[]);var R=function(){if(f&&f.anqiUser){var n,a=f.anqiUser,I=a.token;(n=h.current)===null||n===void 0||(n=n.contentWindow)===null||n===void 0||n.postMessage({token:I},"*")}};return(0,s.jsx)(A.Z,{onTabChange:function(n){return r(n)},children:(0,s.jsx)(L.Z,{children:(0,s.jsx)("iframe",{ref:h,className:"frame-page",src:"https://www.anqicms.com/design",height:g,onLoad:R})},o)})};c.default=b},8600:function(){}}]);
