"use strict";(self.webpackChunkAnQiCMS=self.webpackChunkAnQiCMS||[]).push([[353],{71384:function(re,L,n){var S=n(18201),p=n(66342),$=n(75271),j=n(31945),U=n(52676),y=["fieldProps","min","proFieldProps","max"],m=function(E,d){var T=E.fieldProps,h=E.min,k=E.proFieldProps,c=E.max,v=(0,p.Z)(E,y);return(0,U.jsx)(j.Z,(0,S.Z)({valueType:"digit",fieldProps:(0,S.Z)({min:h,max:c},T),ref:d,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:k},v))},G=$.forwardRef(m);L.Z=G},41265:function(re,L,n){var S=n(18201),p=n(66342),$=n(59831),j=n(75271),U=n(38465),y=n(31945),m=n(52676),G=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],H=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],E=function(v,Y){var M=v.fieldProps,z=v.children,N=v.params,r=v.proFieldProps,e=v.mode,Q=v.valueEnum,X=v.request,J=v.showSearch,_=v.options,q=(0,p.Z)(v,G),ne=(0,j.useContext)(U.Z);return(0,m.jsx)(y.Z,(0,S.Z)((0,S.Z)({valueEnum:(0,$.h)(Q),request:X,params:N,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,S.Z)({options:_,mode:e,showSearch:J,getPopupContainer:ne.getPopupContainer},M),ref:Y,proFieldProps:r},q),{},{children:z}))},d=j.forwardRef(function(c,v){var Y=c.fieldProps,M=c.children,z=c.params,N=c.proFieldProps,r=c.mode,e=c.valueEnum,Q=c.request,X=c.options,J=(0,p.Z)(c,H),_=(0,S.Z)({options:X,mode:r||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},Y),q=(0,j.useContext)(U.Z);return(0,m.jsx)(y.Z,(0,S.Z)((0,S.Z)({valueEnum:(0,$.h)(e),request:Q,params:z,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,S.Z)({getPopupContainer:q.getPopupContainer},_),ref:v,proFieldProps:N},J),{},{children:M}))}),T=j.forwardRef(E),h=d,k=T;k.SearchSelect=h,k.displayName="ProFormComponent",L.Z=k},61030:function(re,L,n){n.r(L),n.d(L,{default:function(){return de}});var S=n(90228),p=n.n(S),$=n(87999),j=n.n($),U=n(48305),y=n.n(U),m=n(75304),G=n(96570),H=n(18640),E=n(35937),d=n(96640),T=n(54203),h=n(34206),k=n(53745),c=n(47634),v=n(16483),Y=n.n(v),M=n(75271),z=n(41265),N=n(71384),r=n(32064),e=n(52676),Q=function(D){var F=(0,M.useRef)(),W=(0,M.useState)(!1),R=y()(W,2),O=R[0],s=R[1],B=(0,M.useState)({}),P=y()(B,2),g=P[0],o=P[1],w=(0,M.useState)(!1),A=y()(w,2),b=A[0],C=A[1],t=(0,r.useIntl)(),f=function(i){T.Z.confirm({title:t.formatMessage({id:"plugin.wechat.menu.delete.confirm"}),onOk:function(){(0,m.vMY)(i).then(function(l){var V;h.ZP.info(l.msg),(V=F.current)===null||V===void 0||V.reload()})}})},u=function(i){o(i),C(!0)},K=function(){var a=j()(p()().mark(function i(x){var l;return p()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:l=Object.assign(g,x),(0,m.xS)(l).then(function(te){var ie;h.ZP.info(te.msg),(ie=F.current)===null||ie===void 0||ie.reload(),C(!1)}).catch(function(){h.ZP.info(t.formatMessage({id:"plugin.wechat.menu.submit.error"}))});case 2:case"end":return ee.stop()}},i)}));return function(x){return a.apply(this,arguments)}}(),I=function(){T.Z.confirm({title:t.formatMessage({id:"plugin.wechat.menu.submit.confirm"}),content:t.formatMessage({id:"plugin.wechat.menu.submit.content"}),onOk:function(){(0,m.dHp)({}).then(function(x){var l;h.ZP.info(x.msg),(l=F.current)===null||l===void 0||l.reload()})}})},Z=[{title:t.formatMessage({id:"plugin.wechat.menu.name"}),dataIndex:"name"},{title:t.formatMessage({id:"plugin.wechat.menu.type"}),dataIndex:"type",valueEnum:{click:{text:t.formatMessage({id:"plugin.wechat.menu.type.click"})},view:{text:t.formatMessage({id:"plugin.wechat.menu.type.view"})}}},{title:t.formatMessage({id:"plugin.wechat.menu.value"}),dataIndex:"value"},{title:t.formatMessage({id:"setting.action"}),dataIndex:"option",valueType:"option",render:function(i,x){return(0,e.jsxs)(k.Z,{size:20,children:[(0,e.jsx)("a",{onClick:function(){f(x)},children:(0,e.jsx)(r.FormattedMessage,{id:"setting.system.delete"})}),(0,e.jsx)("a",{onClick:function(){u(x)},children:(0,e.jsx)(r.FormattedMessage,{id:"setting.action.edit"})})]},"actions")}}];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{onClick:function(){s(!O)},children:D.children}),(0,e.jsx)(T.Z,{width:1e3,open:O,onCancel:function(){s(!1)},footer:null,title:t.formatMessage({id:"plugin.wechat.menu"}),children:(0,e.jsx)(H.Z,{actionRef:F,rowKey:"id",headerTitle:(0,e.jsx)("div",{children:(0,e.jsx)(r.FormattedMessage,{id:"plugin.wechat.menu.tips"})}),toolBarRender:function(){return[(0,e.jsx)(c.ZP,{onClick:function(){return I()},children:(0,e.jsx)(r.FormattedMessage,{id:"plugin.wechat.menu.submit"})},"add"),(0,e.jsx)(c.ZP,{type:"primary",onClick:function(){return u({})},children:(0,e.jsx)(r.FormattedMessage,{id:"plugin.wechat.menu.add"})},"add")]},request:function(i){return(0,m.FCu)(i)},search:!1,columnsState:{persistenceKey:"wechat-menu-table",persistenceType:"localStorage"},columns:Z,rowSelection:!1,pagination:{showSizeChanger:!0}})}),b&&(0,e.jsxs)(E.Y,{title:t.formatMessage({id:"plugin.wechat.menu.add"}),width:600,open:b,initialValues:g,onOpenChange:function(i){C(i)},onFinish:K,children:[(0,e.jsx)(z.Z,{name:"parent_id",request:j()(p()().mark(function a(){var i;return p()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,m.FCu)({});case 2:return i=l.sent,l.abrupt("return",[{name:t.formatMessage({id:"plugin.wechat.menu.top"}),id:0}].concat(i.data||[]));case 4:case"end":return l.stop()}},a)})),fieldProps:{fieldNames:{label:"name",value:"id"}}}),(0,e.jsx)(z.Z,{name:"type",valueEnum:{click:{text:t.formatMessage({id:"plugin.wechat.menu.type.click"})},view:{text:t.formatMessage({id:"plugin.wechat.menu.type.view"})}}}),(0,e.jsx)(d.Z,{name:"name",label:t.formatMessage({id:"plugin.wechat.menu.name"}),width:"lg"}),(0,e.jsx)(d.Z,{name:"value",label:t.formatMessage({id:"plugin.wechat.menu.value"}),width:"lg",extra:t.formatMessage({id:"plugin.wechat.menu.value.description"})}),(0,e.jsx)(N.Z,{name:"sort",label:t.formatMessage({id:"content.sort.name"}),width:"lg",extra:t.formatMessage({id:"plugin.wechat.sort.description"})})]})]})},X=Q,J=n(66857),_=n(76334),q=function(D){var F=(0,M.useRef)(),W=(0,M.useState)(!1),R=y()(W,2),O=R[0],s=R[1],B=(0,M.useState)({}),P=y()(B,2),g=P[0],o=P[1],w=(0,M.useState)(!1),A=y()(w,2),b=A[0],C=A[1],t=(0,r.useIntl)(),f=function(a){T.Z.confirm({title:t.formatMessage({id:"plugin.wechat.reply.delete.confirm"}),onOk:function(){(0,m.Z4r)(a).then(function(x){var l;h.ZP.info(x.msg),(l=F.current)===null||l===void 0||l.reload()})}})},u=function(a){o(a),C(!0)},K=function(){var Z=j()(p()().mark(function a(i){var x;return p()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:x=Object.assign(g,i),(0,m.HGB)(x).then(function(ee){var te;h.ZP.info(ee.msg),(te=F.current)===null||te===void 0||te.reload(),C(!1)}).catch(function(){h.ZP.info(t.formatMessage({id:"plugin.wechat.menu.submit.error"}))});case 2:case"end":return V.stop()}},a)}));return function(i){return Z.apply(this,arguments)}}(),I=[{title:t.formatMessage({id:"plugin.wechat.reply.keyword"}),dataIndex:"keyword"},{title:t.formatMessage({id:"plugin.wechat.reply.content"}),dataIndex:"content"},{title:t.formatMessage({id:"plugin.wechat.reply.default"}),dataIndex:"is_default",valueEnum:{1:{text:t.formatMessage({id:"plugin.wechat.reply.default.yes"})},0:{text:"-"}}},{title:t.formatMessage({id:"setting.action"}),dataIndex:"option",valueType:"option",render:function(a,i){return(0,e.jsxs)(k.Z,{size:20,children:[(0,e.jsx)("a",{onClick:function(){u(i)},children:(0,e.jsx)(r.FormattedMessage,{id:"setting.action.edit"})}),(0,e.jsx)("a",{onClick:function(){f(i)},children:(0,e.jsx)(r.FormattedMessage,{id:"setting.system.delete"})})]},"actions")}}];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{onClick:function(){s(!O)},children:D.children}),(0,e.jsx)(T.Z,{width:1e3,open:O,onCancel:function(){s(!1)},footer:null,title:t.formatMessage({id:"plugin.wechat.reply.rule"}),children:(0,e.jsx)(H.Z,{actionRef:F,rowKey:"id",toolBarRender:function(){return[(0,e.jsx)(c.ZP,{type:"primary",onClick:function(){return u({})},children:(0,e.jsx)(r.FormattedMessage,{id:"plugin.wechat.reply.rule.add"})},"add")]},request:function(a){return(0,m.w$f)(a)},search:!1,columnsState:{persistenceKey:"wechat-reply-rule-table",persistenceType:"localStorage"},columns:I,rowSelection:!1,pagination:{showSizeChanger:!0}})}),b&&(0,e.jsxs)(E.Y,{title:t.formatMessage({id:"plugin.wechat.reply.rule.edit"}),width:600,open:b,initialValues:g,onOpenChange:function(a){C(a)},onFinish:K,children:[(0,e.jsx)(d.Z,{name:"keyword",label:t.formatMessage({id:"plugin.wechat.reply.keyword"}),width:"lg",extra:t.formatMessage({id:"plugin.wechat.reply.keyword.description"})}),(0,e.jsx)(J.Z,{name:"content",label:t.formatMessage({id:"plugin.wechat.reply.content"}),width:"lg"}),(0,e.jsx)(_.Z.Group,{name:"is_default",label:t.formatMessage({id:"plugin.wechat.reply.default"}),width:"lg",extra:t.formatMessage({id:"plugin.wechat.reply.default.description"}),valueEnum:{0:t.formatMessage({id:"plugin.wechat.reply.default.set-no"}),1:t.formatMessage({id:"plugin.wechat.reply.default.set-yes"})}})]})]})},ne=q,se=n(9921),le=function(D){var F=(0,M.useState)(!1),W=y()(F,2),R=W[0],O=W[1],s=(0,r.useIntl)(),B=function(){var P=j()(p()().mark(function g(o){var w;return p()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:w=h.ZP.loading(s.formatMessage({id:"setting.system.submitting"}),0),(0,m.HXI)(o).then(function(C){h.ZP.success(C.msg),O(!1)}).catch(function(C){console.log(C)}).finally(function(){w()});case 2:case"end":return b.stop()}},g)}));return function(o){return P.apply(this,arguments)}}();return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{onClick:function(){O(!R)},children:D.children}),(0,e.jsxs)(E.Y,{width:600,open:R,request:j()(p()().mark(function P(){var g;return p()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,(0,m.dkP)();case 2:return g=w.sent,w.abrupt("return",g.data||null);case 4:case"end":return w.stop()}},P)})),onOpenChange:function(g){O(g)},onFinish:B,title:s.formatMessage({id:"plugin.wechat.setting"}),children:[(0,e.jsx)(d.Z,{name:"server_url",label:s.formatMessage({id:"plugin.weapp.server-url"}),width:"lg",readonly:!0}),(0,e.jsx)(d.Z,{name:"app_id",label:s.formatMessage({id:"plugin.wechat.appid"}),width:"lg"}),(0,e.jsx)(d.Z,{name:"app_secret",label:s.formatMessage({id:"plugin.wechat.app-secret"}),width:"lg"}),(0,e.jsx)(d.Z,{name:"token",label:s.formatMessage({id:"plugin.weapp.token"}),width:"lg"}),(0,e.jsx)(d.Z,{name:"encoding_aes_key",label:s.formatMessage({id:"plugin.weapp.encoding-aes-key"}),width:"lg",extra:s.formatMessage({id:"plugin.weapp.encoding-aes-key.description"})}),(0,e.jsx)(se.Z,{children:(0,e.jsx)(r.FormattedMessage,{id:"plugin.wechat.verify-setting"})}),(0,e.jsx)(d.Z,{name:"verify_key",label:s.formatMessage({id:"plugin.wechat.verify-key"}),width:"lg",placeholder:s.formatMessage({id:"plugin.wechat.verify-key.placeholder"}),extra:s.formatMessage({id:"plugin.wechat.verify-key.description"})}),(0,e.jsx)(d.Z,{name:"verify_msg",label:s.formatMessage({id:"plugin.wechat.verify-msg"}),width:"lg",placeholder:s.formatMessage({id:"plugin.wechat.verify-msg.placeholder"}),extra:s.formatMessage({id:"plugin.wechat.verify-msg.description"})})]})]})},oe=le,ue=function(){var D=(0,M.useRef)(),F=(0,M.useState)({}),W=y()(F,2),R=W[0],O=W[1],s=(0,M.useState)(!1),B=y()(s,2),P=B[0],g=B[1],o=(0,r.useIntl)(),w=function(f){T.Z.confirm({title:o.formatMessage({id:"plugin.backup.delete.confirm"}),onOk:function(){(0,m.jSD)(f).then(function(K){var I;h.ZP.info(K.msg),(I=D.current)===null||I===void 0||I.reload()})}})},A=function(f){O(f),g(!0)},b=function(){var t=j()(p()().mark(function f(u){return p()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:u.reply&&u.reply!==R.reply?(0,m.jSD)(u).then(function(Z){var a;h.ZP.info(Z.msg),(a=D.current)===null||a===void 0||a.reload()}).catch(function(){h.ZP.info(o.formatMessage({id:"plugin.wechat.menu.submit.error"}))}):(g(!1),D.current&&D.current.reload());case 1:case"end":return I.stop()}},f)}));return function(u){return t.apply(this,arguments)}}(),C=[{title:o.formatMessage({id:"plugin.aigenerate.time"}),dataIndex:"created_time",width:150,render:function(f,u){return Y()(u.created_time*1e3).format("YYYY-MM-DD HH:mm")}},{title:"openid",dataIndex:"openid",width:270},{title:o.formatMessage({id:"plugin.guestbook.content"}),dataIndex:"content"},{title:o.formatMessage({id:"plugin.wechat.reply.content"}),dataIndex:"reply"},{title:o.formatMessage({id:"plugin.wechat.reply.time"}),dataIndex:"reply_time",width:150,render:function(f,u){return u.reply_time>0?Y()(u.reply_time*1e3).format("YYYY-MM-DD HH:mm"):"-"}},{title:o.formatMessage({id:"setting.action"}),dataIndex:"option",valueType:"option",width:150,render:function(f,u){return(0,e.jsxs)(k.Z,{size:20,children:[(0,e.jsx)("a",{onClick:function(){w(u)},children:(0,e.jsx)(r.FormattedMessage,{id:"setting.system.delete"})}),u.created_time*1e3>new Date().valueOf()&&(0,e.jsx)("a",{onClick:function(){A(u)},children:(0,e.jsx)(r.FormattedMessage,{id:"plugin.wechat.reply"})})]},"actions")}}];return(0,e.jsxs)(G._z,{children:[(0,e.jsx)(H.Z,{headerTitle:o.formatMessage({id:"menu.plugin.wechat"}),actionRef:D,rowKey:"id",toolBarRender:function(){return[(0,e.jsx)(ne,{children:(0,e.jsx)(c.ZP,{children:(0,e.jsx)(r.FormattedMessage,{id:"plugin.wechat.auto-reply.setting"})})},"rule"),(0,e.jsx)(X,{children:(0,e.jsx)(c.ZP,{children:(0,e.jsx)(r.FormattedMessage,{id:"plugin.wechat.menu.setting"})})},"menu"),(0,e.jsx)(oe,{children:(0,e.jsx)(c.ZP,{children:(0,e.jsx)(r.FormattedMessage,{id:"plugin.wechat.official.setting"})})},"setting")]},tableAlertOptionRender:!1,request:function(f){return(0,m.Tln)(f)},search:!1,columnsState:{persistenceKey:"wechat-message-table",persistenceType:"localStorage"},columns:C,rowSelection:!1,pagination:{showSizeChanger:!0}}),P&&(0,e.jsxs)(E.Y,{open:P,initialValues:R,onValuesChange:function(f){g(f)},onFinish:b,children:[(0,e.jsx)(d.Z,{name:"id",label:"ID",width:"lg",readonly:!0}),(0,e.jsx)(d.Z,{label:o.formatMessage({id:"plugin.aigenerate.time"}),width:"lg",initialValue:Y()(R.created_time*1e3).format("YYYY-MM-DD HH:mm"),readonly:!0}),(0,e.jsx)(d.Z,{name:"openid",label:"OPENID",width:"lg",readonly:!0}),(0,e.jsx)(d.Z,{name:"content",label:o.formatMessage({id:"plugin.guestbook.content"}),width:"lg",readonly:!0}),(0,e.jsx)(d.Z,{name:"reply",label:o.formatMessage({id:"plugin.wechat.reply.content"}),width:"lg",extra:o.formatMessage({id:"plugin.wechat.reply.content.description"})})]})]})},de=ue}}]);
