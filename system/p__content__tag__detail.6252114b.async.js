"use strict";(self.webpackChunkAnQiCMS=self.webpackChunkAnQiCMS||[]).push([[2430],{85606:function(z,S,e){var L=e(48305),_=e.n(L),b=e(75304),g=e(22683),K=e(96570),O=e(75271),C=e(52676),U=function(u){var T=(0,O.useState)(void 0),y=_()(T,2),x=y[0],R=y[1],D=(0,O.useState)(""),A=_()(D,2),I=A[0],p=A[1],P=function(){(0,b.roP)({type:"multi"}).then(function(c){var o=(c.data||[]).map(function(a){return{key:a.id,tab:a.name,is_main:a.is_main}});R(o);var v=(0,g.KJ)("sub-site-id");!v&&o.length>0&&(v=o[0].key+"");var r=o.find(function(a){return a.key===Number(v)}),n=!1;r&&(n=!0,r.is_main&&(n=!1)),(0,g.Xq)("is-sub-site",n),p(v)})};(0,O.useEffect)(function(){P()},[]);var E=function(c){var o;p(c),(0,g.Xq)("sub-site-id",c);var v=x.find(function(n){return n.key===Number(c)}),r=!0;v.is_main&&(r=!1),(0,g.Xq)("is-sub-site",r),(o=u.onTabChange)===null||o===void 0||o.call(u,c,r)};return(0,C.jsx)(K._z,{tabList:x,tabActiveKey:I,onTabChange:E,title:u.title,children:u.children})};S.Z=U},17361:function(z,S,e){var L=e(48305),_=e.n(L),b=e(54203),g=e(75271),K=e(99944),O=e(76979),C=e(52676),U=function(u){var T=(0,g.useState)(!1),y=_()(T,2),x=y[0],R=y[1],D=(0,g.useState)([]),A=_()(D,2),I=A[0],p=A[1],P=function(o){if(u.manual){var v;(v=u.onCancel)===null||v===void 0||v.call(u,o)}else R(o)},E=function(o){u.multiple?p(o):(u.onSelect(o),P(!1))},j=function(){u.multiple&&u.onSelect(I),P(!1)};return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{style:{display:"inline-block"},onClick:function(){P(!x)},children:u.children}),(0,C.jsx)(b.Z,{className:"material-modal",width:800,open:u.manual?u.open:x,onCancel:function(){P(!1)},onOk:function(){j()},children:(0,C.jsx)(K.Z,{multiple:u.multiple,onSelect:function(o){E(o)}})})]})};S.Z=U},60983:function(z,S,e){e.d(S,{Z:function(){return P}});var L=e(90228),_=e.n(L),b=e(87999),g=e.n(b),K=e(75304),O=e(92204),C=e(75308),U=e(14076),W=e(37912),u=e(34206),T=e(5729),y=e(52577),x=e(75271),R=e(39651),D=e(52676);function A(){return{actions:[{title:"\u5A92\u4F53\u5E93",icon:'<svg t="1695784255158" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4033" width="16" height="16"><path d="M416 266.538667m-96 0a96 96 0 1 0 192 0 96 96 0 1 0-192 0Z" p-id="4034" fill="#010000"></path><path d="M721.749333 371.626667A43.818667 43.818667 0 0 0 682.666667 348.074667a42.965333 42.965333 0 0 0-38.058667 25.002666l-66.474667 146.517334a10.624 10.624 0 0 1-18.005333 2.261333l-34.986667-43.690667a42.666667 42.666667 0 0 0-34.688-16.042666 42.965333 42.965333 0 0 0-33.578666 18.176L323.84 670.293333a21.333333 21.333333 0 0 0 17.493333 33.706667h512a21.333333 21.333333 0 0 0 18.133334-10.112 21.333333 21.333333 0 0 0 0.938666-20.736z" p-id="4035" fill="#010000"></path><path d="M938.666667 0H234.666667a85.333333 85.333333 0 0 0-85.333334 85.333333v704a85.333333 85.333333 0 0 0 85.333334 85.333334H938.666667a85.333333 85.333333 0 0 0 85.333333-85.333334V85.333333a85.333333 85.333333 0 0 0-85.333333-85.333333z m-6.186667 783.104a21.333333 21.333333 0 0 1-15.104 6.229333H256a21.333333 21.333333 0 0 1-21.333333-21.333333V106.666667A21.333333 21.333333 0 0 1 256 85.333333h661.333333a21.333333 21.333333 0 0 1 21.333334 21.333334V768a21.333333 21.333333 0 0 1-6.186667 14.976z" p-id="4036" fill="#010000"></path><path d="M832 938.666667h-725.333333a21.333333 21.333333 0 0 1-21.333334-21.333334v-725.333333a42.666667 42.666667 0 0 0-85.333333 0V938.666667a85.333333 85.333333 0 0 0 85.333333 85.333333h746.666667a42.666667 42.666667 0 0 0 0-85.333333z" p-id="4037" fill="#010000"></path></svg>',handler:{type:"action",click:function(j){var c=j.appendBlock,o=j.editor,v=function(n){return n.is_image||n.file_location.indexOf(".webp")!==-1||n.file_location.indexOf(".bmp")!==-1||n.file_location.indexOf(".png")!==-1||n.file_location.indexOf(".gif")!==-1||n.file_location.indexOf(".jpg")!==-1||n.file_location.indexOf(".jpeg")!==-1||n.file_location.indexOf(".svg")!==-1?"![".concat(n.file_name,"](").concat(n.logo,")"):n.file_location.indexOf(".mp4")!==-1||n.file_location.indexOf(".ogg")!==-1||n.file_location.indexOf(".webm")!==-1?'<video controls="controls" controlslist="nodownload" poster=""><source src="'.concat(n.logo,'" type="video/').concat(n.file_location.substr(n.file_location.lastIndexOf(".")+1),'">\u60A8\u7684\u6D4F\u89C8\u5668\u4E0D\u652F\u6301 video \u6807\u7B7E\u3002</video>'):n.file_location.indexOf(".mp3")!==-1||n.file_location.indexOf(".wav")!==-1?'<audio src="'.concat(n.logo,'" controls="controls"><source src="').concat(n.logo,'" type="audio/').concat(n.file_location.substr(n.file_location.lastIndexOf(".")+1),'">\u4F60\u7684\u7F16\u8F91\u5668\u4E0D\u652F\u6301 audio \u6807\u7B7E</audio>'):"[".concat(n.file_name,"](").concat(n.logo,")")};R.Z.show(!0).then(function(r){var n=[];for(var a in r)r.hasOwnProperty(a)&&n.push(v(r[a]));c(n.join(`
`)),o.focus()}),o.focus()}}}]}}var I=[(0,O.Z)(),(0,C.Z)(),(0,U.Z)(),A()],p=(0,x.forwardRef)(function(E,j){function c(){}(0,x.useImperativeHandle)(j,function(){return{setInnerContent:c}});var o=function(){var v=g()(_()().mark(function r(n){var a,N,F,B,l;return _()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:a=[],N=u.ZP.loading("\u63D2\u5165\u4E2D...",0),M.t0=_()().keys(n);case 3:if((M.t1=M.t0()).done){M.next=14;break}if(F=M.t1.value,!n.hasOwnProperty(F)){M.next=12;break}return B=new FormData,B.append("file",n[F]),M.next=10,(0,K.pD2)(B);case 10:l=M.sent,l.code!==0?u.ZP.info(l.msg):a.push({url:l.data.logo});case 12:M.next=3;break;case 14:return N(),M.abrupt("return",a);case 16:case"end":return M.stop()}},r)}));return function(n){return v.apply(this,arguments)}}();return(0,D.jsx)("div",{className:"editor-container "+E.className,style:{border:"1px solid #ccc",marginTop:"10px"},children:(0,D.jsx)(W.M,{value:E.content,plugins:I,locale:y,onChange:function(r){E.setContent(r)},uploadImages:o})})}),P=p},66922:function(z,S,e){e.r(S);var L=e(90228),_=e.n(L),b=e(87999),g=e.n(b),K=e(48305),O=e.n(K),C=e(85606),U=e(17361),W=e(30141),u=e(60983),T=e(75304),y=e(86743),x=e(16621),R=e(74133),D=e(96640),A=e(66857),I=e(41265),p=e(32064),P=e(34206),E=e(91827),j=e(59124),c=e(48806),o=e(47634),v=e(43330),r=e(75271),n=e(96608),a=e(52676),N=function(){var B=(0,r.useRef)(),l=(0,p.useIntl)(),X=(0,r.useState)(""),M=O()(X,2),V=M[0],H=M[1],le=(0,r.useState)({}),Q=O()(le,2),re=Q[0],ie=Q[1],oe=(0,r.useState)(!1),J=O()(oe,2),de=J[0],Y=J[1],_e=(0,r.useState)({}),q=O()(_e,2),k=q[0],ce=q[1],ue=(0,r.useState)(""),ee=O()(ue,2),w=ee[0],G=ee[1],me=(0,r.useState)(""),ae=O()(me,2),fe=ae[0],ve=ae[1],ne=(0,r.useRef)(null),te=function(){var m=g()(_()().mark(function t(){var s,d,i,h,f,se;return _()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return i=new URLSearchParams(window.location.search),h=i.get("id")||0,h==="new"&&(h=0),Z.next=5,(0,T.Byw)({id:h});case 5:return f=Z.sent,ce((f==null?void 0:f.data)||{}),G((f==null||(s=f.data)===null||s===void 0?void 0:s.logo)||""),H((f==null||(d=f.data)===null||d===void 0?void 0:d.content)||""),Z.next=11,(0,T.Zyq)();case 11:se=Z.sent,ie(se.data||{}),Y(!0);case 14:case"end":return Z.stop()}},t)}));return function(){return m.apply(this,arguments)}}();(0,r.useEffect)(function(){te()},[]);var he=function(t){Y(!1),te().then(function(){ve(t)})},ge=function(t){G(t.logo),P.ZP.success(l.formatMessage({id:"setting.system.upload-success"}))},Ee=function(t){t.stopPropagation(),G("")},$=function(){var m=g()(_()().mark(function t(s){var d,i;return _()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(d=Object.assign(k,s),d.content=V,d.logo=w,d.title!==""){f.next=6;break}return P.ZP.error(l.formatMessage({id:"content.title.required"})),f.abrupt("return");case 6:return f.next=8,(0,T.LGb)(d);case 8:i=f.sent,i.code===0?(P.ZP.info(i.msg),p.history.back()):P.ZP.error(i.msg);case 10:case"end":return f.stop()}},t)}));return function(s){return m.apply(this,arguments)}}(),Me=function(t){if(t.key==="s"&&(t.ctrlKey||t.metaKey)){var s,d,i=(s=B.current)===null||s===void 0||(d=s.getFieldsFormatValue)===null||d===void 0?void 0:d.call(s);$(i),t.preventDefault()}};return(0,a.jsx)(C.Z,{onTabChange:function(t){return he(t)},title:k.id>0?l.formatMessage({id:"content.tags.edit"}):l.formatMessage({id:"content.tags.add"}),children:(0,a.jsx)(E.Z,{onKeyDown:Me,children:de&&(0,a.jsx)(R.A,{formRef:B,initialValues:k,layout:"horizontal",onFinish:$,children:(0,a.jsxs)(j.Z,{gutter:20,children:[(0,a.jsxs)(c.Z,{sm:18,xs:24,children:[(0,a.jsx)(D.Z,{name:"title",label:l.formatMessage({id:"content.tags.name"})}),(0,a.jsx)(D.Z,{name:"keywords",label:l.formatMessage({id:"content.keywords.name"}),extra:l.formatMessage({id:"content.keywords.description"})}),(0,a.jsx)(A.Z,{name:"description",label:l.formatMessage({id:"content.description.name"})}),re.editor==="markdown"?(0,a.jsx)(u.Z,{className:"mb-normal",setContent:function(){var m=g()(_()().mark(function t(s){return _()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:H(s);case 1:case"end":return i.stop()}},t)}));return function(t){return m.apply(this,arguments)}}(),content:V,ref:ne}):(0,a.jsx)(W.Z,{className:"mb-normal",setContent:function(){var m=g()(_()().mark(function t(s){return _()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:H(s);case 1:case"end":return i.stop()}},t)}));return function(t){return m.apply(this,arguments)}}(),field:"content",ref:ne,content:V},"content")]}),(0,a.jsxs)(c.Z,{sm:6,xs:24,children:[(0,a.jsx)("div",{className:"mb-normal",children:(0,a.jsxs)(j.Z,{gutter:[16,16],children:[(0,a.jsx)(c.Z,{span:12,children:(0,a.jsx)(o.ZP,{block:!0,type:"primary",onClick:function(){var t,s;$((t=B.current)===null||t===void 0||(s=t.getFieldsFormatValue)===null||s===void 0?void 0:s.call(t))},children:(0,a.jsx)(p.FormattedMessage,{id:"content.submit.ok"})})}),(0,a.jsx)(c.Z,{span:12,children:(0,a.jsx)(o.ZP,{block:!0,onClick:function(){p.history.back()},children:(0,a.jsx)(p.FormattedMessage,{id:"design.back"})})})]})}),(0,a.jsx)(E.Z,{className:"aside-card",size:"small",title:l.formatMessage({id:"content.category.name"}),children:(0,a.jsx)(I.Z,{showSearch:!0,name:"category_id",request:g()(_()().mark(function m(){var t,s;return _()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,T.CPB)({type:1});case 2:return t=i.sent,s=(t.data||[]).map(function(h){return{spacer:h.spacer,label:h.title+(h.status===1?"":l.formatMessage({id:"setting.nav.hide"})),value:h.id}}),i.abrupt("return",[{spacer:"",label:l.formatMessage({id:"content.category.top"}),value:0}].concat(s));case 5:case"end":return i.stop()}},m)})),fieldProps:{optionItemRender:function(t){return(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:t.spacer+t.label}})}}})}),(0,a.jsx)(E.Z,{className:"aside-card",size:"small",title:l.formatMessage({id:"content.category.thumb"}),children:w?(0,a.jsxs)("div",{className:"ant-upload-item",children:[(0,a.jsx)(v.Z,{preview:{src:w},src:w}),(0,a.jsx)("span",{className:"delete",onClick:Ee,children:(0,a.jsx)(y.Z,{})})]}):(0,a.jsx)(U.Z,{onSelect:ge,open:!1,children:(0,a.jsx)("div",{className:"ant-upload-item",children:(0,a.jsxs)("div",{className:"add",children:[(0,a.jsx)(x.Z,{}),(0,a.jsx)("div",{style:{marginTop:8},children:(0,a.jsx)(p.FormattedMessage,{id:"setting.system.upload"})})]})})})}),(0,a.jsx)(E.Z,{className:"aside-card",size:"small",title:l.formatMessage({id:"content.seo-title.name"}),children:(0,a.jsx)(D.Z,{name:"seo_title",placeholder:l.formatMessage({id:"content.tags.seo-title.placeholder"}),extra:l.formatMessage({id:"content.tags.seo-title.description"})})}),(0,a.jsx)(E.Z,{className:"aside-card",size:"small",title:l.formatMessage({id:"content.tags.first-letter.name"}),children:(0,a.jsx)(D.Z,{name:"first_letter",placeholder:l.formatMessage({id:"content.url-token.placeholder"}),extra:l.formatMessage({id:"content.tags.first-letter.description"})})}),(0,a.jsx)(E.Z,{className:"aside-card",size:"small",title:l.formatMessage({id:"content.url-token.name"}),children:(0,a.jsx)(D.Z,{name:"url_token",placeholder:l.formatMessage({id:"content.url-token.placeholder"}),extra:l.formatMessage({id:"content.url-token.tips"})})}),(0,a.jsx)(E.Z,{className:"aside-card",size:"small",title:l.formatMessage({id:"content.category.template"}),children:(0,a.jsx)(I.Z,{showSearch:!0,name:"template",request:g()(_()().mark(function m(){var t,s,d;return _()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,T.h5q)({});case 2:t=h.sent,s=[{path:"",remark:l.formatMessage({id:"content.default-template"})}].concat(t.data||[]);for(d in s)s[d].remark?s[d].remark=s[d].path+"("+s[d].remark+")":s[d].remark=s[d].path;return h.abrupt("return",s);case 6:case"end":return h.stop()}},m)})),fieldProps:{fieldNames:{label:"remark",value:"path"}},extra:(0,a.jsxs)("div",{children:[(0,a.jsx)(p.FormattedMessage,{id:"content.category.default"}),":"," ","tag/list.html"]})})})]})]})})},fe)})};S.default=N},96608:function(){}}]);
