"use strict";(self.webpackChunkAnQiCMS=self.webpackChunkAnQiCMS||[]).push([[6793],{41265:function($,T,e){var l=e(18201),d=e(66342),U=e(59831),u=e(75271),x=e(38465),P=e(31945),c=e(52676),S=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],W=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],B=function(r,v){var f=r.fieldProps,h=r.children,g=r.params,E=r.proFieldProps,p=r.mode,n=r.valueEnum,D=r.request,L=r.showSearch,O=r.options,C=(0,d.Z)(r,S),I=(0,u.useContext)(x.Z);return(0,c.jsx)(P.Z,(0,l.Z)((0,l.Z)({valueEnum:(0,U.h)(n),request:D,params:g,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,l.Z)({options:O,mode:p,showSearch:L,getPopupContainer:I.getPopupContainer},f),ref:v,proFieldProps:E},C),{},{children:h}))},j=u.forwardRef(function(o,r){var v=o.fieldProps,f=o.children,h=o.params,g=o.proFieldProps,E=o.mode,p=o.valueEnum,n=o.request,D=o.options,L=(0,d.Z)(o,W),O=(0,l.Z)({options:D,mode:E||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},v),C=(0,u.useContext)(x.Z);return(0,c.jsx)(P.Z,(0,l.Z)((0,l.Z)({valueEnum:(0,U.h)(p),request:n,params:h,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,l.Z)({getPopupContainer:C.getPopupContainer},O),ref:r,proFieldProps:g},L),{},{children:f}))}),A=u.forwardRef(B),b=j,M=A;M.SearchSelect=b,M.displayName="ProFormComponent",T.Z=M},48399:function($,T,e){e.r(T);var l=e(90228),d=e.n(l),U=e(87999),u=e.n(U),x=e(48305),P=e.n(x),c=e(75304),S=e(16621),W=e(96570),B=e(18640),j=e(35937),A=e(96640),b=e(41265),M=e(76334),o=e(32064),r=e(34206),v=e(54203),f=e(53745),h=e(47634),g=e(16483),E=e.n(g),p=e(75271),n=e(52676),D=function(){var O=(0,o.useModel)("@@initialState"),C=O.initialState,I=(0,p.useRef)(),z=(0,p.useState)(!1),Y=P()(z,2),V=Y[0],Z=Y[1],Q=(0,p.useState)({}),H=P()(Q,2),K=H[0],w=H[1],a=(0,o.useIntl)(),N=C.currentUser,G=function(t){w(t),Z(!0)},J=function(){var _=u()(d()().mark(function t(i){var s;return d()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:(N.id===K.id||K.id===1)&&(i.status=1),i.status=Number(i.status),s=Object.assign(K,i),(0,c.P76)(s).then(function(F){if(F.code!==0)r.ZP.error(F.msg);else{var y;r.ZP.info(F.msg),(y=I.current)===null||y===void 0||y.reload(),Z(!1)}});case 4:case"end":return m.stop()}},t)}));return function(i){return _.apply(this,arguments)}}(),X=function(t){if(N.id===t.id||t.id===1){r.ZP.error(a.formatMessage({id:"account.list.cannot-delete"}));return}v.Z.confirm({title:a.formatMessage({id:"account.list.confirm-delete"}),onOk:function(){(0,c.x8g)({id:t.id}).then(function(s){var R;r.ZP.info(s.msg),(R=I.current)===null||R===void 0||R.reload()})}})},q=[{title:"ID",dataIndex:"id"},{title:a.formatMessage({id:"account.base.username"}),dataIndex:"user_name"},{title:a.formatMessage({id:"account.base.group"}),dataIndex:"group.title",render:function(t,i){var s;return((s=i.group)===null||s===void 0?void 0:s.title)||t}},{title:a.formatMessage({id:"account.list.create-time"}),dataIndex:"created_time",render:function(t,i){return E()(i.created_time*1e3).format("YYYY-MM-DD HH:mm")}},{title:a.formatMessage({id:"account.list.login-time"}),dataIndex:"login_time",render:function(t,i){return E()(i.login_time*1e3).format("YYYY-MM-DD HH:mm")}},{title:a.formatMessage({id:"website.status"}),dataIndex:"status",valueEnum:{0:{text:a.formatMessage({id:"setting.content.notenable"}),status:"Default"},1:{text:a.formatMessage({id:"setting.content.enable"}),status:"Success"}}},{title:a.formatMessage({id:"setting.action"}),dataIndex:"option",valueType:"option",render:function(t,i){return(0,n.jsxs)(f.Z,{size:20,children:[(0,n.jsx)("a",{onClick:function(){G(i)},children:(0,n.jsx)(o.FormattedMessage,{id:"setting.action.edit"})},"edit"),(0,n.jsx)("a",{className:"text-red",onClick:u()(d()().mark(function s(){return d()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,X([i.id]);case 2:case"end":return m.stop()}},s)})),children:(0,n.jsx)(o.FormattedMessage,{id:"setting.system.delete"})},"delete")]})}}];return(0,n.jsxs)(W._z,{children:[(0,n.jsx)(B.Z,{headerTitle:a.formatMessage({id:"account.list.name"}),rowKey:"id",actionRef:I,search:!1,request:function(t){return(0,c.sKD)(t)},columnsState:{persistenceKey:"account-table",persistenceType:"localStorage"},columns:q,toolBarRender:function(){return[(0,n.jsxs)(h.ZP,{type:"primary",onClick:function(){G({})},children:[(0,n.jsx)(S.Z,{})," ",(0,n.jsx)(o.FormattedMessage,{id:"account.list.add"})]},"add")]}}),V&&(0,n.jsxs)(j.Y,{width:480,title:a.formatMessage({id:"account.list.edit"}),open:V,initialValues:K,onFinish:J,onOpenChange:function(t){return Z(t)},children:[(0,n.jsx)(A.Z,{name:"user_name",label:a.formatMessage({id:"account.base.username"}),width:"lg"}),(0,n.jsx)(A.Z.Password,{name:"password",label:a.formatMessage({id:"account.list.password"}),width:"lg",placeholder:a.formatMessage({id:"account.list.password.placeholder"})}),(0,n.jsx)(b.Z,{name:"group_id",label:a.formatMessage({id:"account.base.group"}),request:u()(d()().mark(function _(){var t;return d()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,c.Wig)({});case 2:return t=s.sent,s.abrupt("return",t.data||[]);case 4:case"end":return s.stop()}},_)})),fieldProps:{fieldNames:{label:"title",value:"id"}}}),(0,n.jsx)(M.Z.Group,{label:a.formatMessage({id:"website.status"}),name:"status",valueEnum:{0:a.formatMessage({id:"setting.content.notenable"}),1:a.formatMessage({id:"setting.content.enable"})}})]})]})};T.default=D}}]);
