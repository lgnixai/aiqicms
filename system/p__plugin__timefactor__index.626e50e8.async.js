"use strict";(self.webpackChunkAnQiCMS=self.webpackChunkAnQiCMS||[]).push([[5687],{56534:function(I,O,a){var i=a(18201),p=a(66342),P=a(59831),c=a(37697),M=a(75271),d=a(73428),m=a(31945),E=a(52676),C=["options","fieldProps","proFieldProps","valueEnum"],_=M.forwardRef(function(n,r){var o=n.options,g=n.fieldProps,l=n.proFieldProps,t=n.valueEnum,h=(0,p.Z)(n,C);return(0,E.jsx)(m.Z,(0,i.Z)({ref:r,valueType:"checkbox",valueEnum:(0,P.h)(t,void 0),fieldProps:(0,i.Z)({options:o},g),lightProps:(0,i.Z)({labelFormatter:function(){return(0,E.jsx)(m.Z,(0,i.Z)({ref:r,valueType:"checkbox",mode:"read",valueEnum:(0,P.h)(t,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,i.Z)({options:o},g),proFieldProps:l},h))}},h.lightProps),proFieldProps:l},h))}),x=M.forwardRef(function(n,r){var o=n.fieldProps,g=n.children;return(0,E.jsx)(c.Z,(0,i.Z)((0,i.Z)({ref:r},o),{},{children:g}))}),u=(0,d.G)(x,{valuePropName:"checked"}),b=u;b.Group=_,O.Z=b},71384:function(I,O,a){var i=a(18201),p=a(66342),P=a(75271),c=a(31945),M=a(52676),d=["fieldProps","min","proFieldProps","max"],m=function(_,x){var u=_.fieldProps,b=_.min,n=_.proFieldProps,r=_.max,o=(0,p.Z)(_,d);return(0,M.jsx)(c.Z,(0,i.Z)({valueType:"digit",fieldProps:(0,i.Z)({min:b,max:r},u),ref:x,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:n},o))},E=P.forwardRef(m);O.Z=E},41265:function(I,O,a){var i=a(18201),p=a(66342),P=a(59831),c=a(75271),M=a(38465),d=a(31945),m=a(52676),E=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],C=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],_=function(o,g){var l=o.fieldProps,t=o.children,h=o.params,T=o.proFieldProps,R=o.mode,y=o.valueEnum,U=o.request,F=o.showSearch,S=o.options,Z=(0,p.Z)(o,E),B=(0,c.useContext)(M.Z);return(0,m.jsx)(d.Z,(0,i.Z)((0,i.Z)({valueEnum:(0,P.h)(y),request:U,params:h,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,i.Z)({options:S,mode:R,showSearch:F,getPopupContainer:B.getPopupContainer},l),ref:g,proFieldProps:T},Z),{},{children:t}))},x=c.forwardRef(function(r,o){var g=r.fieldProps,l=r.children,t=r.params,h=r.proFieldProps,T=r.mode,R=r.valueEnum,y=r.request,U=r.options,F=(0,p.Z)(r,C),S=(0,i.Z)({options:U,mode:T||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},g),Z=(0,c.useContext)(M.Z);return(0,m.jsx)(d.Z,(0,i.Z)((0,i.Z)({valueEnum:(0,P.h)(R),request:y,params:t,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,i.Z)({getPopupContainer:Z.getPopupContainer},S),ref:o,proFieldProps:h},F),{},{children:l}))}),u=c.forwardRef(_),b=x,n=u;n.SearchSelect=b,n.displayName="ProFormComponent",O.Z=n},60263:function(I,O,a){a.r(O);var i=a(90228),p=a.n(i),P=a(87999),c=a.n(P),M=a(48305),d=a.n(M),m=a(75304),E=a(96570),C=a(74133),_=a(76334),x=a(56534),u=a(71384),b=a(41265),n=a(32064),r=a(34206),o=a(91827),g=a(18874),l=a(75271),t=a(52676),h=function(){var R=(0,l.useState)({}),y=d()(R,2),U=y[0],F=y[1],S=(0,l.useState)(!1),Z=d()(S,2),B=Z[0],$=Z[1],H=(0,l.useState)([]),K=d()(H,2),J=K[0],X=K[1],Y=(0,l.useState)([]),G=d()(Y,2),w=G[0],k=G[1],q=(0,l.useState)(!1),N=d()(q,2),ee=N[0],V=N[1],ae=(0,l.useState)(!1),z=d()(ae,2),te=z[0],Q=z[1],e=(0,n.useIntl)(),re=function(){var W=c()(p()().mark(function v(){return p()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:(0,m.hUj)().then(function(j){var s=j.data||[],D=[];for(var L in s)D.push({label:s[L].name,value:s[L].id});X(D)}),(0,m.CPB)({type:1}).then(function(j){var s=j.data||[],D=[];for(var L in s)D.push({label:s[L].title,value:s[L].id});k(D)}),(0,m._1Z)().then(function(j){var s=j.data||{};s.category_ids||(s.category_ids=[]),F(s),V(s.open||!1),Q(s.release_open||!1),$(!0)});case 3:case"end":return A.stop()}},v)}));return function(){return W.apply(this,arguments)}}();(0,l.useEffect)(function(){re()},[]);var se=function(){var W=c()(p()().mark(function v(f){var A;return p()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!f.open){s.next=11;break}if(!(!f.module_ids||f.module_ids.length===0)){s.next=4;break}return r.ZP.error(e.formatMessage({id:"plugin.timefactor.module.required"})),s.abrupt("return");case 4:if(!(!f.types||f.types.length===0)){s.next=7;break}return r.ZP.error(e.formatMessage({id:"plugin.timefactor.types.required"})),s.abrupt("return");case 7:if(f.start_day!==0){s.next=10;break}return r.ZP.error(e.formatMessage({id:"plugin.timefactor.start-day.required"})),s.abrupt("return");case 10:f.start_day<=f.end_day&&r.ZP.error(e.formatMessage({id:"plugin.timefactor.end-day.error"}));case 11:A=r.ZP.loading(e.formatMessage({id:"setting.system.submitting"}),0),(0,m.b1c)(f).then(function(D){r.ZP.success(D.msg)}).catch(function(D){console.log(D)}).finally(function(){A()});case 13:case"end":return s.stop()}},v)}));return function(f){return W.apply(this,arguments)}}();return(0,t.jsx)(E._z,{children:(0,t.jsxs)(o.Z,{children:[(0,t.jsx)(g.Z,{message:(0,t.jsx)("div",{children:(0,t.jsx)("div",{children:(0,t.jsx)(n.FormattedMessage,{id:"plugin.timefactor.tips"})})})}),B&&(0,t.jsx)("div",{className:"mt-normal",children:(0,t.jsx)(C.A,{onFinish:se,initialValues:U,children:(0,t.jsxs)(o.Z,{size:"small",title:e.formatMessage({id:"plugin.timefactor.setting"}),bordered:!1,children:[(0,t.jsx)(_.Z.Group,{name:"open",label:e.formatMessage({id:"plugin.timefactor.open"}),options:[{label:e.formatMessage({id:"plugin.timefactor.open.no"}),value:!1},{label:e.formatMessage({id:"plugin.timefactor.open.yes"}),value:!0}],fieldProps:{onChange:function(v){V(v.target.value)}}}),ee&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.Z.Group,{name:"types",label:e.formatMessage({id:"plugin.timefactor.types"}),options:[{value:"created_time",label:e.formatMessage({id:"plugin.timefactor.types.created-time"})},{value:"updated_time",label:e.formatMessage({id:"plugin.timefactor.types.updated-time"})}],extra:e.formatMessage({id:"plugin.timefactor.types.description"})}),(0,t.jsxs)(C.A.Group,{children:[(0,t.jsx)(u.Z,{name:"start_day",label:e.formatMessage({id:"plugin.timefactor.start-day"}),placeholder:e.formatMessage({id:"plugin.timefactor.start-day.placeholder"}),addonAfter:e.formatMessage({id:"plugin.timefactor.start-day.suffix"}),extra:e.formatMessage({id:"plugin.timefactor.start-day.description"})}),(0,t.jsx)(u.Z,{name:"end_day",label:e.formatMessage({id:"plugin.timefactor.end-day"}),placeholder:e.formatMessage({id:"plugin.timefactor.end-day.placeholder"}),addonAfter:e.formatMessage({id:"plugin.timefactor.end-day.suffix"}),extra:e.formatMessage({id:"plugin.timefactor.end-day.description"})}),(0,t.jsx)(u.Z,{name:"daily_update",label:e.formatMessage({id:"plugin.timefactor.daily-update"}),placeholder:e.formatMessage({id:"plugin.timefactor.daily-update.placeholder"}),addonAfter:e.formatMessage({id:"plugin.timefactor.daily-update.suffix"}),extra:e.formatMessage({id:"plugin.timefactor.daily-update.description"})})]}),(0,t.jsx)(_.Z.Group,{name:"do_publish",label:e.formatMessage({id:"plugin.timefactor.republish"}),options:[{label:e.formatMessage({id:"plugin.timefactor.republish.no"}),value:!1},{label:e.formatMessage({id:"plugin.timefactor.republish.yes"}),value:!0}],extra:e.formatMessage({id:"plugin.timefactor.republish.description"})})]}),(0,t.jsx)(_.Z.Group,{name:"release_open",label:e.formatMessage({id:"plugin.timefactor.release-draft"}),options:[{label:e.formatMessage({id:"plugin.timefactor.release-draft.no"}),value:!1},{label:e.formatMessage({id:"plugin.timefactor.release-draft.yes"}),value:!0}],fieldProps:{onChange:function(v){Q(v.target.value)}}}),te&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{style:{width:200},children:(0,t.jsx)(u.Z,{name:"daily_limit",label:e.formatMessage({id:"plugin.timefactor.daily-limit"}),placeholder:e.formatMessage({id:"plugin.timefactor.daily-limit.placeholder"}),addonAfter:e.formatMessage({id:"plugin.timefactor.daily-limit.suffix"}),extra:e.formatMessage({id:"plugin.timefactor.daily-limit.description"})})}),(0,t.jsxs)(C.A.Group,{children:[(0,t.jsx)(u.Z,{name:"start_time",label:e.formatMessage({id:"plugin.timefactor.start-time"}),placeholder:e.formatMessage({id:"plugin.timefactor.start-time.placeholder"}),addonAfter:e.formatMessage({id:"plugin.timefactor.start-time.suffix"}),extra:e.formatMessage({id:"plugin.timefactor.start-time.description"})}),(0,t.jsx)(u.Z,{name:"end_time",label:e.formatMessage({id:"plugin.timefactor.end-time"}),placeholder:e.formatMessage({id:"plugin.timefactor.end-time.placeholder"}),addonAfter:e.formatMessage({id:"plugin.timefactor.start-time.suffix"}),extra:e.formatMessage({id:"plugin.timefactor.end-time.description"})})]})]}),(0,t.jsx)(x.Z.Group,{name:"module_ids",label:e.formatMessage({id:"plugin.timefactor.module"}),options:J}),(0,t.jsx)(b.Z,{name:"category_ids",label:e.formatMessage({id:"plugin.timefactor.category"}),mode:"multiple",options:w,placeholder:e.formatMessage({id:"plugin.timefactor.category.placeholder"})})]})})})]})})};O.default=h}}]);
