"use strict";(self.webpackChunkAnQiCMS=self.webpackChunkAnQiCMS||[]).push([[456],{85606:function(Z,C,e){var U=e(48305),c=e.n(U),K=e(75304),u=e(22683),j=e(96570),M=e(75271),L=e(52676),g=function(m){var D=(0,M.useState)(void 0),b=c()(D,2),P=b[0],d=b[1],R=(0,M.useState)(""),O=c()(R,2),T=O[0],A=O[1],I=function(){(0,K.roP)({type:"multi"}).then(function(n){var o=(n.data||[]).map(function(i){return{key:i.id,tab:i.name,is_main:i.is_main}});d(o);var E=(0,u.KJ)("sub-site-id");!E&&o.length>0&&(E=o[0].key+"");var h=o.find(function(i){return i.key===Number(E)}),f=!1;h&&(f=!0,h.is_main&&(f=!1)),(0,u.Xq)("is-sub-site",f),A(E)})};(0,M.useEffect)(function(){I()},[]);var W=function(n){var o;A(n),(0,u.Xq)("sub-site-id",n);var E=P.find(function(f){return f.key===Number(n)}),h=!0;E.is_main&&(h=!1),(0,u.Xq)("is-sub-site",h),(o=m.onTabChange)===null||o===void 0||o.call(m,n,h)};return(0,L.jsx)(j._z,{tabList:P,tabActiveKey:T,onTabChange:W,title:m.title,children:m.children})};C.Z=g},37356:function(Z,C,e){e.r(C);var U=e(90228),c=e.n(U),K=e(87999),u=e.n(K),j=e(48305),M=e.n(j),L=e(85606),g=e(5933),B=e(22683),m=e(74133),D=e(96640),b=e(76334),P=e(32064),d=e(34206),R=e(54203),O=e(91827),T=e(47634),A=e(18874),I=e(16483),W=e.n(I),p=e(75271),n=e(52676),o=function(){var h=(0,p.useState)(null),f=M()(h,2),i=f[0],N=f[1],$=(0,p.useState)(""),S=M()($,2),F=S[0],Y=S[1],t=(0,P.useIntl)(),y=function(){var l=u()(c()().mark(function a(){var r,s;return c()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,g.RN)();case 2:r=_.sent,s=r.data||null,N(s);case 5:case"end":return _.stop()}},a)}));return function(){return l.apply(this,arguments)}}(),G=function(a){y().then(function(){Y(a)})};(0,p.useEffect)(function(){y()},[]);var X=function(){var l=u()(c()().mark(function a(r){var s;return c()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:s=d.ZP.loading(t.formatMessage({id:"setting.system.submitting"}),0),(0,B.kr)("unsaveArchive"),(0,g.$6)(r).then(function(v){d.ZP.success(v.msg),y()}).catch(function(v){console.log(v)}).finally(function(){s()});case 3:case"end":return _.stop()}},a)}));return function(r){return l.apply(this,arguments)}}(),H=function(){var l=u()(c()().mark(function a(r){var s;return c()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:s=d.ZP.loading(t.formatMessage({id:"setting.system.submitting"}),0),r.update=!0,(0,g.$6)(r).then(function(v){d.ZP.success(v.msg),y()}).catch(function(v){console.log(v)}).finally(function(){s()});case 3:case"end":return _.stop()}},a)}));return function(r){return l.apply(this,arguments)}}(),Q=function(){R.Z.confirm({title:t.formatMessage({id:"tool.cache.confirm-migrate"}),okType:"primary",onOk:function(){var r=d.ZP.loading(t.formatMessage({id:"setting.system.submitting"}),0);(0,g.cO)({}).then(function(s){d.ZP.success(s.msg)}).catch(function(s){console.log(s)}).finally(function(){r()})}})};return(0,n.jsx)(L.Z,{onTabChange:function(a){return G(a)},children:(0,n.jsxs)("div",{children:[(0,n.jsx)(O.Z,{title:t.formatMessage({id:"tool.cache.temp-cache"}),children:i&&(0,n.jsxs)(m.A,{submitter:!1,children:[(0,n.jsx)(D.Z,{name:"last_update",fieldProps:{value:i.last_update>0?W()(i.last_update*1e3).format("YYYY-MM-DD HH:mm"):t.formatMessage({id:"tool.cache.never"})},label:t.formatMessage({id:"tool.cache.last-time"}),width:"lg",readonly:!0}),(0,n.jsx)(D.Z,{children:(0,n.jsx)(T.ZP,{onClick:function(){return X({})},type:"primary",children:(0,n.jsx)(P.FormattedMessage,{id:"tool.cache.clean"})})})]})}),(0,n.jsx)("div",{className:"mt-normal",children:(0,n.jsx)(O.Z,{title:"",children:i&&(0,n.jsx)(m.A,{onFinish:H,initialValues:i,children:(0,n.jsx)(b.Z.Group,{name:"cache_type",label:t.formatMessage({id:"tool.cache.cache-type"}),options:[{value:"",label:t.formatMessage({id:"tool.cache.cache-type.auto"})},{value:"file",label:t.formatMessage({id:"tool.cache.cache-type.file"})},{value:"memory",label:t.formatMessage({id:"tool.cache.cache-type.memory"})}],extra:t.formatMessage({id:"tool.cache.cache-type.description"})})})})}),(0,n.jsx)("div",{className:"mt-normal",children:(0,n.jsx)(O.Z,{title:t.formatMessage({id:"tool.cache.table-upgrade"}),children:(0,n.jsxs)(m.A,{submitter:!1,children:[(0,n.jsx)(A.Z,{className:"mb-normal",message:t.formatMessage({id:"tool.cache.table-upgrade.description"})}),(0,n.jsx)(D.Z,{children:(0,n.jsx)(T.ZP,{onClick:function(){return Q()},type:"primary",children:(0,n.jsx)(P.FormattedMessage,{id:"tool.cache.table-upgrade"})})})]})})})]},F)})};C.default=o}}]);
