"use strict";(self.webpackChunkAnQiCMS=self.webpackChunkAnQiCMS||[]).push([[5740],{85606:function(Pe,ae,a){var ie=a(48305),$=a.n(ie),re=a(75304),b=a(22683),oe=a(96570),D=a(75271),ce=a(52676),z=function(J){var de=(0,D.useState)(void 0),g=$()(de,2),ue=g[0],xe=g[1],ye=(0,D.useState)(""),ne=$()(ye,2),me=ne[0],f=ne[1],he=function(){(0,re.roP)({type:"multi"}).then(function(B){var F=(B.data||[]).map(function(n){return{key:n.id,tab:n.name,is_main:n.is_main}});xe(F);var K=(0,b.KJ)("sub-site-id");!K&&F.length>0&&(K=F[0].key+"");var s=F.find(function(n){return n.key===Number(K)}),l=!1;s&&(l=!0,s.is_main&&(l=!1)),(0,b.Xq)("is-sub-site",l),f(K)})};(0,D.useEffect)(function(){he()},[]);var E=function(B){var F;f(B),(0,b.Xq)("sub-site-id",B);var K=ue.find(function(l){return l.key===Number(B)}),s=!0;K.is_main&&(s=!1),(0,b.Xq)("is-sub-site",s),(F=J.onTabChange)===null||F===void 0||F.call(J,B,s)};return(0,ce.jsx)(oe._z,{tabList:ue,tabActiveKey:me,onTabChange:E,title:J.title,children:J.children})};ae.Z=z},73317:function(Pe,ae,a){a.r(ae),a.d(ae,{default:function(){return Fe}});var ie=a(335),$=a.n(ie),re=a(90228),b=a.n(re),oe=a(87999),D=a.n(oe),ce=a(25298),z=a.n(ce),be=a(17069),J=a.n(be),de=a(62657),g=a.n(de),ue=a(21742),xe=a.n(ue),ye=a(83136),ne=a.n(ye),me=a(82092),f=a.n(me),he=a(85606),E=a(66560),le=a(6217),B=a(24573),F=a(35937),K=a(96640),s=a(32064),l=a(54203),n=a(34206),x=a(16268),C=a(91827),Z=a(53745),h=a(47634),v=a(37697),M=a(15947),P=a(48782),T=a(75573),A=a(59124),_=a(48806),Y=a(43330),R=a(38221),X=a(25357),ve=a(18874),Q=a(16483),Oe=a.n(Q),se=a(75271),Ee=a(48305),je=a.n(Ee),Ze=a(18640),e=a(52676),Ne=function(fe){var G=(0,se.useRef)(),t=(0,se.useState)(!1),L=je()(t,2),H=L[0],U=L[1],r=(0,se.useState)(!1),o=je()(r,2),i=o[0],c=o[1],m=(0,se.useState)({}),p=je()(m,2),y=p[0],S=p[1],N=(0,se.useState)(""),d=je()(N,2),u=d[0],W=d[1],O=(0,s.useIntl)(),Ce=function(){S({}),W(""),c(!0)},I=function(k){S(k),W(k.title),c(!0)},q=function(){var w=D()(b()().mark(function k(V){return b()().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:l.Z.confirm({title:O.formatMessage({id:"content.attachment.delete.confirm"}),onOk:function(){var _e=D()(b()().mark(function ke(){var Me,Ie,Se;return b()().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return pe.next=2,(0,E.Iu)(V);case 2:Se=pe.sent,n.ZP.info(Se.msg),(Me=G.current)===null||Me===void 0||(Ie=Me.reloadAndRest)===null||Ie===void 0||Ie.call(Me);case 5:case"end":return pe.stop()}},ke)}));function Le(){return _e.apply(this,arguments)}return Le}()});case 1:case"end":return te.stop()}},k)}));return function(V){return w.apply(this,arguments)}}(),j=function(){var k=n.ZP.loading(O.formatMessage({id:"setting.system.submitting"}),0);(0,E.Po)({id:y.id,title:u}).then(function(V){if(V.code===0){var ee,te;c(!1),(ee=G.current)===null||ee===void 0||(te=ee.reloadAndRest)===null||te===void 0||te.call(ee)}else n.ZP.error(V.msg)}).catch(function(V){console.log(V)}).finally(function(){k()})},ge=[{title:"ID",dataIndex:"id",width:60},{title:O.formatMessage({id:"content.category.title"}),dataIndex:"title"},{title:O.formatMessage({id:"content.source.count"}),dataIndex:"attach_count",width:80},{title:O.formatMessage({id:"setting.action"}),dataIndex:"option",valueType:"option",width:120,render:function(k,V){return(0,e.jsxs)(Z.Z,{size:20,children:[(0,e.jsx)("a",{onClick:function(){I(V)},children:(0,e.jsx)(s.FormattedMessage,{id:"setting.action.edit"})},"edit"),(0,e.jsx)("a",{className:"text-red",onClick:function(){q(V)},children:(0,e.jsx)(s.FormattedMessage,{id:"setting.system.delete"})},"delete")]})}}];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{onClick:function(){U(!H)},children:fe.children}),(0,e.jsx)(l.Z,{open:H,title:(0,e.jsx)(h.ZP,{type:"primary",onClick:function(){Ce()},children:(0,e.jsx)(s.FormattedMessage,{id:"content.category.new"})}),width:600,onCancel:function(){U(!1),fe.onCancel()},footer:!1,children:(0,e.jsx)("div",{style:{marginTop:"20px",marginBottom:"20px"},children:(0,e.jsx)(Ze.Z,{headerTitle:O.formatMessage({id:"content.attachment.category.manage"}),actionRef:G,rowKey:"id",search:!1,toolBarRender:!1,request:function(k){return(0,E.Nr)(k)},columnsState:{persistenceKey:"attachment-categories-table",persistenceType:"localStorage"},columns:ge,pagination:{showSizeChanger:!0}})})}),(0,e.jsx)(l.Z,{open:i,title:y.id?O.formatMessage({id:"content.category.rename"})+":"+y.title:O.formatMessage({id:"content.category.new"}),width:480,zIndex:2e3,maskClosable:!1,onOk:j,onCancel:function(){c(!1)},children:(0,e.jsxs)("div",{style:{marginTop:"20px",marginBottom:"20px"},children:[(0,e.jsxs)("div",{children:[(0,e.jsx)(s.FormattedMessage,{id:"content.attachment.alt.alert"}),":"," "]}),(0,e.jsx)(M.Z,{size:"large",value:u,onChange:function(k){W(k.target.value)}})]})})]})},De=Ne,Te=function(Ae){xe()(G,Ae);var fe=ne()(G);function G(){var t;z()(this,G);for(var L=arguments.length,H=new Array(L),U=0;U<L;U++)H[U]=arguments[U];return t=fe.call.apply(fe,[this].concat(H)),f()(g()(t),"state",{images:[],fetched:!1,total:0,page:1,limit:18,selectedIds:[],addImageVisible:!1,categories:[],categoryId:0,tmpCategoryId:0,currentAttach:{},detailVisible:!1,editVisible:!1,indeterminate:!1,selectedAll:!1,kw:"",newKey:""}),f()(g()(t),"onTabChange",function(r){t.setState({fetched:!1}),t.getImageList().then(function(){t.getCategories(),t.setState({newKey:r})})}),f()(g()(t),"getImageList",D()(b()().mark(function r(){var o,i,c,m,p;return b()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:o=t.state,i=o.page,c=o.limit,m=o.categoryId,p=o.kw,(0,E.Dc)({current:i,pageSize:c,category_id:m,q:p}).then(function(N){t.setState({images:N.data,total:N.total,fetched:!0})}).catch(function(){});case 2:case"end":return S.stop()}},r)}))),f()(g()(t),"getCategories",function(){(0,E.Nr)().then(function(r){t.setState({categories:r.data||[]})})}),f()(g()(t),"scanUploadsDir",function(){l.Z.confirm({title:t.props.intl.formatMessage({id:"content.attachment.scan.confirm"}),content:t.props.intl.formatMessage({id:"content.attachment.scan.content"}),onOk:function(){var r=D()(b()().mark(function i(){return b()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:(0,E.Jp)({}).then(function(p){n.ZP.info(p.msg||t.props.intl.formatMessage({id:"content.attachment.scan.success"}))});case 1:case"end":return m.stop()}},i)}));function o(){return r.apply(this,arguments)}return o}()})}),f()(g()(t),"handleUploadImage",function(){var r=D()(b()().mark(function o(i){var c,m,p,y,S,N,d,u,W,O;return b()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return c=n.ZP.loading({content:t.props.intl.formatMessage({id:"setting.system.submitting"}),duration:0,key:"uploading"}),m=t.state.categoryId,p=i.file.size,I.next=5,(0,le.rt)(i.file);case 5:if(y=I.sent,S=2097152,N=Math.ceil(p/S),d=new FormData,d.append("category_id",m+""),d.append("file_name",i.file.name),d.append("md5",y),!(N>1)){I.next=37;break}d.append("chunks",N+""),u=0;case 15:if(!(u<N)){I.next=35;break}return W=i.file.slice(u*S,(u+1)*S),W.name=i.file.name,W.uid=i.file.uid,d.set("chunk",u+""),d.set("file",W),I.prev=21,I.next=24,(0,E.pD)(d);case 24:O=I.sent,O.code!==0?(n.ZP.info(O.msg),c()):(c=n.ZP.loading({content:t.props.intl.formatMessage({id:"setting.system.submitting"})+" - "+Math.ceil((u+1)*100/N)+"%",duration:0,key:"uploading"}),O.data&&(c(),n.ZP.info(O.msg||t.props.intl.formatMessage({id:"setting.system.upload-success"})),t.getImageList())),I.next=32;break;case 28:I.prev=28,I.t0=I.catch(21),c(),n.ZP.info("upload failed");case 32:u++,I.next=15;break;case 35:I.next=39;break;case 37:d.append("file",i.file),(0,E.pD)(d).then(function(q){q.code!==0?n.ZP.info(q.msg):(n.ZP.info(q.msg||t.props.intl.formatMessage({id:"setting.system.upload-success"})),t.getImageList())}).finally(function(){c()});case 39:case"end":return I.stop()}},o,null,[[21,28]])}));return function(o){return r.apply(this,arguments)}}()),f()(g()(t),"handleDeleteImage",function(){l.Z.confirm({title:t.props.intl.formatMessage({id:"content.attachment.delete.image.confirm"}),content:t.props.intl.formatMessage({id:"content.attachment.delete.content"}),onOk:function(){var r=D()(b()().mark(function i(){var c,m,p,y,S;return b()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:c=t.state.selectedIds,m=$()(c),d.prev=2,m.s();case 4:if((p=m.n()).done){d.next=12;break}return y=p.value,d.next=8,(0,E.OW)({id:y});case 8:S=d.sent,n.ZP.info(S.msg);case 10:d.next=4;break;case 12:d.next=17;break;case 14:d.prev=14,d.t0=d.catch(2),m.e(d.t0);case 17:return d.prev=17,m.f(),d.finish(17);case 20:t.setState({indeterminate:!1,selectedAll:!1,selectedIds:[]}),t.hideAttachDetail(),t.getImageList();case 23:case"end":return d.stop()}},i,null,[[2,14,17,20]])}));function o(){return r.apply(this,arguments)}return o}()})}),f()(g()(t),"handleSearch",function(r){t.setState({kw:r,page:1,indeterminate:!1,selectedAll:!1,selectedIds:[]},function(){t.getImageList()})}),f()(g()(t),"onChangeSelect",function(r){var o=t.state.images;t.setState({selectedIds:r,indeterminate:r.length===0?!1:r.length<o.length,selectedAll:r.length===o.length})}),f()(g()(t),"onChangePage",function(r,o){var i=t.state.limit;t.setState({page:r,limit:o||i},function(){t.getImageList()})}),f()(g()(t),"handleChangeCategory",function(){var r=D()(b()().mark(function o(i){return b()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:t.setState({categoryId:i,page:1,indeterminate:!1,selectedAll:!1,selectedIds:[]},function(){t.getImageList()});case 1:case"end":return m.stop()}},o)}));return function(o){return r.apply(this,arguments)}}()),f()(g()(t),"handleSetTmpCategoryId",function(r){t.setState({tmpCategoryId:r})}),f()(g()(t),"handleUpdateToCategory",D()(b()().mark(function r(){var o,i,c;return b()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:o=t.state,i=o.tmpCategoryId,c=o.categories,l.Z.confirm({icon:null,title:t.props.intl.formatMessage({id:"content.attachment.move-to-category"}),content:(0,e.jsx)("div",{children:(0,e.jsxs)(x.default,{defaultValue:i,onChange:t.handleSetTmpCategoryId,style:{width:200},children:[(0,e.jsx)(x.default.Option,{value:0,children:t.props.intl.formatMessage({id:"content.attachment.unclassified"})}),c.map(function(y){return(0,e.jsx)(x.default.Option,{value:y.id,children:y.title},y.id)})]})}),onOk:function(){var S=t.state,N=S.selectedIds,d=S.tmpCategoryId;(0,E.Jh)({category_id:d,ids:N}).then(function(u){n.ZP.info(u.msg),t.getImageList(),t.setState({indeterminate:!1,selectedAll:!1,selectedIds:[]})})}});case 2:case"end":return p.stop()}},r)}))),f()(g()(t),"handlePreview",function(r){t.setState({currentAttach:r,detailVisible:!0})}),f()(g()(t),"hideAttachDetail",function(){t.setState({detailVisible:!1})}),f()(g()(t),"handleModifyName",function(){t.setState({editVisible:!0})}),f()(g()(t),"changeModifyName",function(r){t.setState({editVisible:r})}),f()(g()(t),"onSubmitEdit",function(){var r=D()(b()().mark(function o(i){var c;return b()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:c=t.state.currentAttach,c.file_name=i.file_name,(0,E.tl)(c).then(function(y){y.code!==0?n.ZP.info(y.msg):(n.ZP.info(y.msg||t.props.intl.formatMessage({id:"content.attachment.edit.success"})),t.setState({currentAttach:c}),t.getImageList())}),t.changeModifyName(!1);case 4:case"end":return p.stop()}},o)}));return function(o){return r.apply(this,arguments)}}()),f()(g()(t),"handleRemoveAttach",function(){var r=t.state.currentAttach;l.Z.confirm({title:t.props.intl.formatMessage({id:"content.attachment.delete.confirm"}),onOk:function(){t.setState({selectedIds:[r.id]},function(){t.handleDeleteImage()})}})}),f()(g()(t),"handleReplaceAttach",function(r){var o=t.state.currentAttach,i=new FormData;i.append("file",r.file),i.append("replace","true"),i.append("id",o.id),(0,E.pD)(i).then(function(c){c.code!==0?n.ZP.info(c.msg):(n.ZP.info(c.msg||t.props.intl.formatMessage({id:"content.attachment.replace.success"})),t.setState({currentAttach:Object.assign(o,c.data||{})}),t.getImageList())})}),f()(g()(t),"onCheckAllChange",function(r){if(r.target.checked){var o=t.state.images,i=[],c=$()(o),m;try{for(c.s();!(m=c.n()).done;){var p=m.value;i.push(p.id)}}catch(y){c.e(y)}finally{c.f()}t.setState({selectedIds:i,indeterminate:!1,selectedAll:!0})}else t.setState({selectedIds:[],indeterminate:!1,selectedAll:!1})}),t}return J()(G,[{key:"componentDidMount",value:function(){this.getImageList(),this.getCategories()}},{key:"render",value:function(){var L=this,H,U,r,o,i=this.state,c=i.images,m=i.total,p=i.limit,y=i.categories,S=i.categoryId,N=i.fetched,d=i.selectedIds,u=i.currentAttach,W=i.detailVisible,O=i.editVisible,Ce=i.indeterminate,I=i.selectedAll,q=i.newKey;return(0,e.jsxs)(he.Z,{onTabChange:function(ge){return L.onTabChange(ge)},children:[(0,e.jsx)(C.Z,{className:"image-page",title:this.props.intl.formatMessage({id:"menu.archive.attachment"}),extra:(0,e.jsx)("div",{className:"meta",children:(0,e.jsxs)(Z.Z,{size:16,children:[d.length>0&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(h.ZP,{className:"btn-gray",onClick:this.handleUpdateToCategory,children:(0,e.jsx)(s.FormattedMessage,{id:"content.attachment.move-to-category"})}),(0,e.jsx)(h.ZP,{className:"btn-gray",onClick:this.handleDeleteImage,children:(0,e.jsx)(s.FormattedMessage,{id:"content.attachment.batch-delete"})})]}),(0,e.jsx)(v.Z,{indeterminate:Ce,onChange:this.onCheckAllChange,checked:I,children:(0,e.jsx)(s.FormattedMessage,{id:"content.attachment.select-all"})}),(0,e.jsx)("span",{children:(0,e.jsx)(s.FormattedMessage,{id:"content.attachment.filter"})}),(0,e.jsx)(M.Z.Search,{placeholder:this.props.intl.formatMessage({id:"content.attachment.search"}),onSearch:this.handleSearch}),(0,e.jsxs)(x.default,{defaultValue:S,style:{width:120},onChange:this.handleChangeCategory,children:[(0,e.jsx)(x.default.Option,{value:0,children:(0,e.jsx)(s.FormattedMessage,{id:"content.attachment.all-source"})}),y.map(function(j){return(0,e.jsx)(x.default.Option,{value:j.id,children:j.title},j.id)})]}),(0,e.jsx)(De,{onCancel:function(){L.getCategories()},children:(0,e.jsx)(h.ZP,{onClick:function(){},children:(0,e.jsx)(s.FormattedMessage,{id:"content.attachment.category.manage"})},"category")}),(0,e.jsx)(P.Z,{name:"file",multiple:!0,showUploadList:!1,accept:".jpg,.jpeg,.png,.gif,.webp,.svg,.bmp,.webm,.mp4,.mp3,.zip,.rar,.pdf,.ppt,.pptx,.doc,.docx,.xls,.xlsx,.txt",customRequest:this.handleUploadImage,children:(0,e.jsx)(h.ZP,{type:"primary",children:(0,e.jsx)(s.FormattedMessage,{id:"content.attachment.upload"})})}),(0,e.jsx)(h.ZP,{onClick:function(){return L.scanUploadsDir()},children:(0,e.jsx)(s.FormattedMessage,{id:"content.attachment.scan.name"})})]})}),children:(0,e.jsxs)("div",{className:"body",children:[(0,e.jsx)(v.Z.Group,{onChange:this.onChangeSelect,value:d,style:{display:"block"},children:N?m>0?(0,e.jsx)(A.Z,{gutter:[16,16],className:"image-list",children:c==null?void 0:c.map(function(j){return(0,e.jsx)(_.Z,{sm:4,xs:12,children:(0,e.jsx)("div",{className:"image-item",children:(0,e.jsxs)("div",{className:"inner",children:[(0,e.jsx)(v.Z,{className:"checkbox",value:j.id}),(0,e.jsx)("div",{className:"link",onClick:L.handlePreview.bind(L,j),children:j.thumb?(0,e.jsx)(Y.Z,{className:"img",preview:!1,src:j.thumb+"?t="+j.updated_time,alt:j.file_name}):(0,e.jsx)(R.Z,{className:"default-img",size:120,children:j.file_location.substring(j.file_location.lastIndexOf("."))})}),(0,e.jsx)("div",{className:"info",children:(0,e.jsx)("div",{children:j.file_name})})]})})},j.id)})}):(0,e.jsx)(T.Z,{className:"empty-normal",description:this.props.intl.formatMessage({id:"content.attachment.empty"}),children:(0,e.jsx)(P.Z,{name:"file",showUploadList:!1,multiple:!0,accept:".jpg,.jpeg,.png,.gif,.webp,.svg,.bmp,.webm,.mp4,.mp3,.zip,.rar,.pdf,.ppt,.pptx,.doc,.docx,.xls,.xlsx,.txt",customRequest:this.handleUploadImage,children:(0,e.jsx)(h.ZP,{type:"primary",children:(0,e.jsx)(s.FormattedMessage,{id:"content.attachment.upload"})})})}):(0,e.jsx)(T.Z,{className:"empty-normal",image:(0,e.jsx)(B.Z,{style:{fontSize:"72px"}}),description:this.props.intl.formatMessage({id:"content.attachment.loading"})})}),m>0&&(0,e.jsx)(X.Z,{defaultCurrent:1,defaultPageSize:p,total:m,showSizeChanger:!0,onChange:this.onChangePage,style:{marginTop:"20px"}})]})},q),(0,e.jsx)(l.Z,{width:900,title:this.props.intl.formatMessage({id:"content.attachment.detail"}),onCancel:this.hideAttachDetail,onOk:this.hideAttachDetail,open:W,children:(0,e.jsxs)("div",{className:"attachment-detail",children:[(0,e.jsx)("div",{className:"preview",children:u.thumb?(0,e.jsx)(Y.Z,{width:"100%",className:"img",preview:{src:u.logo+"?t="+u.updated_time},src:u.logo+"?t="+u.updated_time,alt:u.file_name}):(0,e.jsx)(R.Z,{className:"default-img",size:200,children:(H=u.file_location)===null||H===void 0?void 0:H.substring((U=u.file_location)===null||U===void 0?void 0:U.lastIndexOf("."))})}),(0,e.jsxs)("div",{className:"detail",children:[(0,e.jsxs)("div",{className:"info",children:[(0,e.jsxs)("div",{className:"item",children:[(0,e.jsxs)("div",{className:"name",children:[(0,e.jsx)(s.FormattedMessage,{id:"content.attachment.alt"}),":"]}),(0,e.jsx)("div",{className:"value",children:u.file_name})]}),(0,e.jsxs)("div",{className:"item",children:[(0,e.jsxs)("div",{className:"name",children:[(0,e.jsx)(s.FormattedMessage,{id:"content.attachment.type"}),":"]}),(0,e.jsx)("div",{className:"value",children:(r=u.file_location)===null||r===void 0?void 0:r.substring((o=u.file_location)===null||o===void 0?void 0:o.lastIndexOf("."))})]}),(0,e.jsxs)("div",{className:"item",children:[(0,e.jsxs)("div",{className:"name",children:[(0,e.jsx)(s.FormattedMessage,{id:"content.attachment.upload-at"}),":"]}),(0,e.jsx)("div",{className:"value",children:Oe()(u.updated_time*1e3).format("YYYY-MM-DD HH:mm:ss")})]}),(0,e.jsxs)("div",{className:"item",children:[(0,e.jsxs)("div",{className:"name",children:[(0,e.jsx)(s.FormattedMessage,{id:"content.attachment.size"}),":"]}),(0,e.jsx)("div",{className:"value",children:(0,le.l9)(u.file_size)})]}),u.width>0&&(0,e.jsxs)("div",{className:"item",children:[(0,e.jsxs)("div",{className:"name",children:[(0,e.jsx)(s.FormattedMessage,{id:"content.attachment.ratio"}),":"]}),(0,e.jsx)("div",{className:"value",children:u.width+"\xD7"+u.height})]}),(0,e.jsxs)("div",{className:"item",children:[(0,e.jsxs)("div",{className:"name",children:[(0,e.jsx)(s.FormattedMessage,{id:"content.attachment.address"}),":"]}),(0,e.jsx)("div",{className:"value",children:u.logo})]})]}),(0,e.jsxs)(Z.Z,{size:16,align:"center",className:"btns",children:[(0,e.jsx)(P.Z,{name:"file",showUploadList:!1,accept:".jpg,.jpeg,.png,.gif,.webp,.svg,.bmp,.webm,.mp4,.mp3,.zip,.rar,.pdf,.ppt,.pptx,.doc,.docx,.xls,.xlsx,.txt",customRequest:this.handleReplaceAttach,children:(0,e.jsx)(h.ZP,{children:(0,e.jsx)(s.FormattedMessage,{id:"content.attachment.replace.name"})})}),(0,e.jsx)(h.ZP,{onClick:this.handleModifyName,children:(0,e.jsx)(s.FormattedMessage,{id:"content.attachment.edit"})}),(0,e.jsx)(h.ZP,{onClick:this.handleRemoveAttach,children:(0,e.jsx)(s.FormattedMessage,{id:"setting.system.delete"})}),(0,e.jsx)(h.ZP,{danger:!0,onClick:this.hideAttachDetail,children:(0,e.jsx)(s.FormattedMessage,{id:"setting.action.close"})})]}),(0,e.jsxs)("div",{className:"tips",children:[(0,e.jsxs)("p",{children:[(0,e.jsx)(s.FormattedMessage,{id:"content.attachment.explain"}),":"]}),(0,e.jsx)("div",{children:(0,e.jsx)(s.FormattedMessage,{id:"content.attachment.explain.tips1"})}),(0,e.jsx)("div",{children:(0,e.jsx)(s.FormattedMessage,{id:"content.attachment.explain.tips2"})}),(0,e.jsx)("div",{children:(0,e.jsx)(s.FormattedMessage,{id:"content.attachment.explain.tips3"})})]})]})]})}),O&&(0,e.jsxs)(F.Y,{width:600,title:this.props.intl.formatMessage({id:"content.attachment.edit"}),open:O,initialValues:u,layout:"horizontal",onFinish:this.onSubmitEdit,onOpenChange:function(ge){return L.changeModifyName(ge)},children:[(0,e.jsx)("div",{className:"mb-normal",children:(0,e.jsx)(ve.Z,{message:this.props.intl.formatMessage({id:"content.attachment.alt.alert"})})}),(0,e.jsx)(K.Z,{name:"file_name"})]})]})}}]),G}(se.Component),Fe=(0,s.injectIntl)(Te)},6217:function(Pe,ae,a){a.d(ae,{GY:function(){return he},Sv:function(){return le},WD:function(){return me},XP:function(){return f},_F:function(){return K},l9:function(){return ne},rt:function(){return B},vI:function(){return F}});var ie=a(335),$=a.n(ie),re=a(90228),b=a.n(re),oe=a(87999),D=a.n(oe),ce=a(18470),z=a(34206),be=a(34847),J=a.n(be),de=a(22683),g=function(l){return!!l},ue=function(l){var n=[],x=function(h){if(l.hasOwnProperty(h)){var v=l[h];v&&v.constructor===Array?v.forEach(function(M){n.push(h+"="+M)}):n.push(h+"="+v)}};for(var C in l)x(C);return n.join("&")},xe=function(l){var n="";return l>1e8?n=(l/1e8).toFixed(2)+"\u4EBF":l>1e5?n=(l/1e5).toFixed(2)+"\u4E07":n=l,n},ye=null,ne=function(l){var n="";return l>1e6?n=(l/1048576).toFixed(2)+"MB":l>500?n=(l/1024).toFixed(2)+"KB":n=l+"B",n},me=function(l,n,x){var C=x||"csv",Z={csv:"text/csv",xls:"application/vnd.ms-excel"}[C],h=document.createElement("a");h.href="data:"+Z+";charset=utf-8,\uFEFF"+encodeURIComponent(function(){var v="";if(C==="csv")v=l.join(",")+`\r
`+n.join(`\r
`);else{v+="<table border=1><thead><tr>";var M=$()(l),P;try{for(M.s();!(P=M.n()).done;){var T=P.value;v+="<th>"+T+"</th>"}}catch(Q){M.e(Q)}finally{M.f()}v+="</tr></thead>",v+="<tbody>";var A=$()(n),_;try{for(A.s();!(_=A.n()).done;){var Y=_.value;v+="<tr>";var R=$()(Y),X;try{for(R.s();!(X=R.n()).done;){var ve=X.value;v+="<td>"+ve+"</td>"}}catch(Q){R.e(Q)}finally{R.f()}v+="</tr>"}}catch(Q){A.e(Q)}finally{A.f()}v+="</tbody>",v+="<table>"}return v}()),h.download="table_"+new Date().getTime()+"."+C,document.body.appendChild(h),h.click(),document.body.removeChild(h)},f=function(l){var n=l.replace(/<style[\S\s]+?<\/style>/g,"").replace(/<script[\S\s]+?<\/script>/g,"").replace(/<\/[\S\s]+?>/g,`
`).replace(/<[\S\s]+?>/g,"");return n=n.replaceAll("\xA0"," ").replaceAll("&nbsp;"," ").replaceAll("&ensp;"," ").replaceAll("&emsp;"," "),n=n.replace(/(\n *){2,}/g,`
`).replace(/[ ]{2,}/g," ").trim(),n},he=function(l){for(var n=0,x=0;x<l.length;x++){var C=l.charCodeAt(x);C>255?n+=2:n++}return n},E=function(l){return l.replaceAll("_"," ").toLowerCase().replace(/( |^)[a-z]/g,function(n){return n.toUpperCase()}).replaceAll(" ","")},le=function(l,n,x){var C=z.ZP.loading("\u6B63\u5728\u4E0B\u8F7D\u4E2D"),Z={admin:(0,de.bh)("adminToken"),"Content-Type":"application/json"},h=x||"file";return fetch(ce.Z.baseUrl+l,{headers:Z,method:"post",body:JSON.stringify(n)}).then(function(v){var M;if(v.status!==200){z.ZP.destroy(),z.ZP.error("\u6587\u4EF6\u6253\u5305\u5931\u8D25"+v.statusText);return}var P=(M=v.headers.get("Content-Disposition"))===null||M===void 0||(M=M.split(";")[1])===null||M===void 0?void 0:M.split("filename")[1];P&&(P.indexOf("'")!==-1&&(P=P.substring(P.lastIndexOf("'")+1)),P=P.substring(P.lastIndexOf("=")+1),h=P),v.blob().then(function(T){var A,_;if(T.type==="application/json"){var Y=new FileReader;Y.readAsText(T,"utf-8"),Y.onload=function(){var ve=JSON.parse(Y.result);z.ZP.error(ve.msg)};return}var R=document.createElement("a"),X=(A=window)===null||A===void 0||(A=A.URL)===null||A===void 0?void 0:A.createObjectURL(T);R.href=X,R.download=h+"",R.click(),(_=window)===null||_===void 0||(_=_.URL)===null||_===void 0||_.revokeObjectURL(X)}).catch(function(T){console.log(T),z.ZP.destroy(),z.ZP.error("\u6587\u4EF6\u6253\u5305\u5931\u8D25"+T)})}).finally(function(){return C(),Promise.resolve({})})},B=function(l){return new Promise(function(n,x){var C=2097152,Z=new(J()).ArrayBuffer,h=new FileReader,v=Math.ceil(l.size/C),M=0,P=function(){var A=M*C,_=A+C>=l.size?l.size:A+C;h.readAsArrayBuffer(l.slice(A,_))};h.onload=function(T){if(Z.append(T.target.result),M++,M<v)P();else{var A=Z.end();n(A)}},h.onerror=function(){x("File reading error")},P()})},F=[{label:"\u82F1\u8BED(English)",value:"en",icon:"\u{1F1FA}\u{1F1F8}"},{label:"\u4E2D\u6587(\u7B80\u4F53)",value:"zh-CN",icon:"\u{1F1E8}\u{1F1F3}"},{label:"\u4E2D\u6587(\u7E41\u4F53)",value:"zh-TW",icon:"\u{1F1E8}\u{1F1F3}"},{label:"\u5FB7\u8BED(Deutsch)",value:"de",icon:"\u{1F1E9}\u{1F1EA}"},{label:"\u5370\u5730\u8BED(\u0939\u093F\u0928\u094D\u0926\u0940)",value:"hi",icon:"\u{1F1EE}\u{1F1F3}"},{label:"\u7ACB\u9676\u5B9B\u8BED(Lietuvi\u0173)",value:"lt",icon:"\u{1F1F1}\u{1F1F9}"},{label:"\u514B\u7F57\u5730\u4E9A\u8BED(Hrvatski)",value:"hr",icon:"\u{1F1ED}\u{1F1F7}"},{label:"\u62C9\u8131\u7EF4\u4E9A\u8BED(Latvie\u0161u)",value:"lv",icon:"\u{1F1F1}\u{1F1FB}"},{label:"\u6D77\u5730\u514B\u91CC\u5965\u5C14\u8BED(Krey\xF2l Ayisyen)",value:"ht",icon:"\u{1F1ED}\u{1F1F9}"},{label:"\u5308\u7259\u5229\u8BED(Magyar)",value:"hu",icon:"\u{1F1ED}\u{1F1FA}"},{label:"\u4E9A\u7F8E\u5C3C\u4E9A\u8BED(\u0540\u0561\u0575\u0565\u0580\u0565\u0576)",value:"hy",icon:"\u{1F1E6}\u{1F1F2}"},{label:"\u4E4C\u514B\u5170\u8BED(\u0423\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0430)",value:"uk",icon:"\u{1F1FA}\u{1F1E6}"},{label:"\u9A6C\u5C14\u52A0\u4EC0\u8BED(Malagasy)",value:"mg",icon:"\u{1F1F2}\u{1F1EC}"},{label:"\u5370\u5EA6\u5C3C\u897F\u4E9A\u8BED(Bahasa Indonesia)",value:"id",icon:"\u{1F1EE}\u{1F1E9}"},{label:"\u4E4C\u5C14\u90FD\u8BED(\u0627\u0631\u062F\u0648)",value:"ur",icon:"\u{1F1F5}\u{1F1F0}"},{label:"\u9A6C\u5176\u987F\u8BED(\u041C\u0430\u043A\u0435\u0434\u043E\u043D\u0441\u043A\u0438)",value:"mk",icon:"\u{1F1F2}\u{1F1F0}"},{label:"\u9A6C\u62C9\u96C5\u62C9\u59C6\u8BED(\u0D2E\u0D32\u0D2F\u0D3E\u0D33\u0D02)",value:"ml",icon:"\u{1F1EE}\u{1F1F3}"},{label:"\u8499\u53E4\u8BED(\u041C\u043E\u043D\u0433\u043E\u043B)",value:"mn",icon:"\u{1F1F2}\u{1F1F3}"},{label:"\u5357\u975E\u8377\u5170\u8BED(Afrikaans)",value:"af",icon:"\u{1F1FF}\u{1F1E6}"},{label:"\u9A6C\u62C9\u5730\u8BED(\u092E\u0930\u093E\u0920\u0940)",value:"mr",icon:"\u{1F1EE}\u{1F1F3}"},{label:"\u4E4C\u5179\u522B\u514B\u8BED(O\u02BBzbekcha)",value:"uz",icon:"\u{1F1FA}\u{1F1FF}"},{label:"\u9A6C\u6765\u8BED(Bahasa Melayu)",value:"ms",icon:"\u{1F1F2}\u{1F1FE}"},{label:"\u5E0C\u814A\u8BED(\u0395\u03BB\u03BB\u03B7\u03BD\u03B9\u03BA\u03AC)",value:"el",icon:"\u{1F1EC}\u{1F1F7}"},{label:"\u9A6C\u8033\u4ED6\u8BED(Malti)",value:"mt",icon:"\u{1F1F2}\u{1F1F9}"},{label:"\u51B0\u5C9B\u8BED(\xCDslenska)",value:"is",icon:"\u{1F1EE}\u{1F1F8}"},{label:"\u610F\u5927\u5229\u8BED(Italiano)",value:"it",icon:"\u{1F1EE}\u{1F1F9}"},{label:"\u7F05\u7538\u8BED(\u1019\u103C\u1014\u103A\u1019\u102C\u1018\u102C\u101E\u102C)",value:"my",icon:"\u{1F1F2}\u{1F1F2}"},{label:"\u897F\u73ED\u7259\u8BED(Espa\xF1ol)",value:"es",icon:"\u{1F1EA}\u{1F1F8}"},{label:"\u7231\u6C99\u5C3C\u4E9A\u8BED(Eesti)",value:"et",icon:"\u{1F1EA}\u{1F1EA}"},{label:"\u5DF4\u65AF\u514B\u8BED(Euskara)",value:"eu",icon:"\u{1F1EA}\u{1F1F8}"},{label:"\u963F\u62C9\u4F2F\u8BED(\u0627\u0644\u0639\u0631\u0628\u064A\u0629)",value:"ar",icon:"\u{1F1F8}\u{1F1E6}"},{label:"\u8461\u8404\u7259\u8BED(\u6B27\u6D32)(Portugu\xEAs)",value:"pt-PT",icon:"\u{1F1F5}\u{1F1F9}"},{label:"\u65E5\u8BED(\u65E5\u672C\u8A9E)",value:"ja",icon:"\u{1F1EF}\u{1F1F5}"},{label:"\u5C3C\u6CCA\u5C14\u8BED(\u0928\u0947\u092A\u093E\u0932\u0940)",value:"ne",icon:"\u{1F1F3}\u{1F1F5}"},{label:"\u963F\u585E\u62DC\u7586\u8BED(Az\u0259rbaycan)",value:"az",icon:"\u{1F1E6}\u{1F1FF}"},{label:"\u6CE2\u65AF\u8BED(\u0641\u0627\u0631\u0633\u06CC)",value:"fa",icon:"\u{1F1EE}\u{1F1F7}"},{label:"\u7F57\u9A6C\u5C3C\u4E9A\u8BED(Rom\xE2n\u0103)",value:"ro",icon:"\u{1F1F7}\u{1F1F4}"},{label:"\u8377\u5170\u8BED(Nederlands)",value:"nl",icon:"\u{1F1F3}\u{1F1F1}"},{label:"\u82F1\u8BED(\u82F1\u56FD)(English)",value:"en-GB",icon:"\u{1F1EC}\u{1F1E7}"},{label:"\u632A\u5A01\u8BED(Norsk)",value:"no",icon:"\u{1F1F3}\u{1F1F4}"},{label:"\u767D\u4FC4\u7F57\u65AF\u8BED(\u0411\u0435\u043B\u0430\u0440\u0443\u0441\u043A\u0430\u044F)",value:"be",icon:"\u{1F1E7}\u{1F1FE}"},{label:"\u82AC\u5170\u8BED(Suomi)",value:"fi",icon:"\u{1F1EB}\u{1F1EE}"},{label:"\u4FC4\u8BED(\u0420\u0443\u0441\u0441\u043A\u0438\u0439)",value:"ru",icon:"\u{1F1F7}\u{1F1FA}"},{label:"\u4FDD\u52A0\u5229\u4E9A\u8BED(\u0411\u044A\u043B\u0433\u0430\u0440\u0441\u043A\u0438)",value:"bg",icon:"\u{1F1E7}\u{1F1EC}"},{label:"\u6CD5\u8BED(Fran\xE7ais)",value:"fr",icon:"\u{1F1EB}\u{1F1F7}"},{label:"\u6CE2\u65AF\u5C3C\u4E9A\u8BED(Bosanski)",value:"bs",icon:"\u{1F1E7}\u{1F1E6}"},{label:"\u4FE1\u5FB7\u8BED(\u0633\u0646\u068C\u064A)",value:"sd",icon:"\u{1F1F5}\u{1F1F0}"},{label:"\u5317\u8428\u7C73\u8BED(Davvis\xE1megiella)",value:"se",icon:"\u{1F1F3}\u{1F1F4}"},{label:"\u50E7\u4F3D\u7F57\u8BED(\u0DC3\u0DD2\u0D82\u0DC4\u0DBD)",value:"si",icon:"\u{1F1F1}\u{1F1F0}"},{label:"\u65AF\u6D1B\u4F10\u514B\u8BED(Sloven\u010Dina)",value:"sk",icon:"\u{1F1F8}\u{1F1F0}"},{label:"\u65AF\u6D1B\u6587\u5C3C\u4E9A\u8BED(Sloven\u0161\u010Dina)",value:"sl",icon:"\u{1F1F8}\u{1F1EE}"},{label:"\u7231\u5C14\u5170\u8BED(Gaeilge)",value:"ga",icon:"\u{1F1EE}\u{1F1EA}"},{label:"\u4FEE\u7EB3\u8BED(Shona)",value:"sn",icon:"\u{1F1FF}\u{1F1FC}"},{label:"\u7D22\u9A6C\u91CC\u8BED(Soomaali)",value:"so",icon:"\u{1F1F8}\u{1F1F4}"},{label:"\u82CF\u683C\u5170\u76D6\u5C14\u8BED(G\xE0idhlig)",value:"gd",icon:"\u{1F1EC}\u{1F1E7}"},{label:"\u52A0\u6CF0\u7F57\u5C3C\u4E9A\u8BED(Catal\xE0)",value:"ca",icon:"\u{1F1EA}\u{1F1F8}"},{label:"\u963F\u5C14\u5DF4\u5C3C\u4E9A\u8BED(Shqip)",value:"sq",icon:"\u{1F1E6}\u{1F1F1}"},{label:"\u585E\u5C14\u7EF4\u4E9A\u8BED(\u0421\u0440\u043F\u0441\u043A\u0438)",value:"sr",icon:"\u{1F1F7}\u{1F1F8}"},{label:"\u54C8\u8428\u514B\u8BED(\u049A\u0430\u0437\u0430\u049B\u0448\u0430)",value:"kk",icon:"\u{1F1F0}\u{1F1FF}"},{label:"\u585E\u7D22\u6258\u8BED(Sesotho)",value:"st",icon:"\u{1F1F1}\u{1F1F8}"},{label:"\u9AD8\u68C9\u8BED(\u1797\u17B6\u179F\u17B6\u1781\u17D2\u1798\u17C2\u179A)",value:"km",icon:"\u{1F1F0}\u{1F1ED}"},{label:"\u5361\u7EB3\u8FBE\u8BED(\u0C95\u0CA8\u0CCD\u0CA8\u0CA1)",value:"kn",icon:"\u{1F1EE}\u{1F1F3}"},{label:"\u745E\u5178\u8BED(Svenska)",value:"sv",icon:"\u{1F1F8}\u{1F1EA}"},{label:"\u97E9\u8BED(\uD55C\uAD6D\uC5B4)",value:"ko",icon:"\u{1F1F0}\u{1F1F7}"},{label:"\u65AF\u74E6\u5E0C\u91CC\u8BED(Kiswahili)",value:"sw",icon:"\u{1F1F9}\u{1F1FF}"},{label:"\u52A0\u5229\u897F\u4E9A\u8BED(Galego)",value:"gl",icon:"\u{1F1EA}\u{1F1F8}"},{label:"\u8461\u8404\u7259\u8BED(\u5DF4\u897F)(Portugu\xEAs)",value:"pt-BR",icon:"\u{1F1E7}\u{1F1F7}"},{label:"\u79D1\u897F\u5609\u8BED(Corsu)",value:"co",icon:"\u{1F1EB}\u{1F1F7}"},{label:"\u6CF0\u7C73\u5C14\u8BED(\u0BA4\u0BAE\u0BBF\u0BB4\u0BCD)",value:"ta",icon:"\u{1F1EE}\u{1F1F3}"},{label:"\u53E4\u5409\u62C9\u7279\u8BED(\u0A97\u0AC1\u0A9C\u0AB0\u0ABE\u0AA4\u0AC0)",value:"gu",icon:"\u{1F1EE}\u{1F1F3}"},{label:"\u5409\u5C14\u5409\u65AF\u8BED(\u041A\u044B\u0440\u0433\u044B\u0437\u0447\u0430)",value:"ky",icon:"\u{1F1F0}\u{1F1EC}"},{label:"\u6377\u514B\u8BED(\u010Ce\u0161tina)",value:"cs",icon:"\u{1F1E8}\u{1F1FF}"},{label:"\u65C1\u906E\u666E\u8BED(\u0A2A\u0A70\u0A1C\u0A3E\u0A2C\u0A40)",value:"pa",icon:"\u{1F1EE}\u{1F1F3}"},{label:"\u6CF0\u5362\u56FA\u8BED(\u0C24\u0C46\u0C32\u0C41\u0C17\u0C41)",value:"te",icon:"\u{1F1EE}\u{1F1F3}"},{label:"\u5854\u5409\u514B\u8BED(\u0422\u043E\u04B7\u0438\u043A\u04E3)",value:"tg",icon:"\u{1F1F9}\u{1F1EF}"},{label:"\u6CF0\u8BED(\u0E44\u0E17\u0E22)",value:"th",icon:"\u{1F1F9}\u{1F1ED}"},{label:"\u62C9\u4E01\u8BED(Latina)",value:"la",icon:"\u{1F1FB}\u{1F1E6}"},{label:"\u5A01\u5C14\u58EB\u8BED(Cymraeg)",value:"cy",icon:"\u{1F1EC}\u{1F1E7}"},{label:"\u6CE2\u5170\u8BED(Polski)",value:"pl",icon:"\u{1F1F5}\u{1F1F1}"},{label:"\u4E39\u9EA6\u8BED(Dansk)",value:"da",icon:"\u{1F1E9}\u{1F1F0}"},{label:"\u571F\u8033\u5176\u8BED(T\xFCrk\xE7e)",value:"tr",icon:"\u{1F1F9}\u{1F1F7}"},{label:"\u8D8A\u5357\u8BED(Ti\u1EBFng Vi\u1EC7t)",value:"vi",icon:"\u{1F1FB}\u{1F1F3}"},{label:"\u5B5F\u52A0\u62C9\u8BED(Bengali)",value:"bn",icon:"\u{1F1E7}\u{1F1E9}"},{label:"\u8001\u631D\u8BED(Lao)",value:"lo",icon:"\u{1F1F1}\u{1F1E6}"},{label:"\u722A\u54C7\u8BED(Jawa)",value:"jw",icon:"\u{1F1EE}\u{1F1E9}"},{label:"\u5965\u585E\u68AF\u8BED(Ossetic)",value:"os",icon:"\u{1F1EC}\u{1F1EA}"},{label:"\u85CF\u8BED(Tibetan)",value:"bo",icon:"\u{1F1E8}\u{1F1F3}"},{label:"\u83F2\u5F8B\u5BBE\u8BED(Filipino)",value:"tl",icon:"\u{1F1F5}\u{1F1ED}"},{label:"\u521A\u679C\u8BED(Kongo)",value:"kg",icon:"\u{1F1E8}\u{1F1EC}"},{label:"\u683C\u9C81\u5409\u4E9A\u8BED(Georgian)",value:"ka",icon:"\u{1F1EC}\u{1F1EA}"},{label:"\u666E\u4EC0\u56FE\u8BED(Pashto)",value:"ps",icon:"\u{1F1E6}\u{1F1EB}"},{label:"\u571F\u5E93\u66FC\u8BED(Turkmen)",value:"tk",icon:"\u{1F1F9}\u{1F1F2}"},{label:"\u5E0C\u4F2F\u6765\u8BED(Hebrew)",value:"iw",icon:"\u{1F1EE}\u{1F1F1}"}],K=function(l){for(var n="",x=0,C=F;x<C.length;x++){var Z=C[x];if(Z.value===l){n=Z.icon;break}}return n}}}]);
