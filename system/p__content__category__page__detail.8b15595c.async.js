"use strict";(self.webpackChunkAnQiCMS=self.webpackChunkAnQiCMS||[]).push([[1286],{71384:function(H,T,e){var I=e(18201),c=e(66342),L=e(75271),v=e(31945),Z=e(52676),C=["fieldProps","min","proFieldProps","max"],O=function(o,N){var j=o.fieldProps,g=o.min,S=o.proFieldProps,x=o.max,y=(0,c.Z)(o,C);return(0,Z.jsx)(v.Z,(0,I.Z)({valueType:"digit",fieldProps:(0,I.Z)({min:g,max:x},j),ref:N,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:S},y))},h=L.forwardRef(O);T.Z=h},85606:function(H,T,e){var I=e(48305),c=e.n(I),L=e(75304),v=e(22683),Z=e(96570),C=e(75271),O=e(52676),h=function(o){var N=(0,C.useState)(void 0),j=c()(N,2),g=j[0],S=j[1],x=(0,C.useState)(""),y=c()(x,2),b=y[0],F=y[1],A=function(){(0,L.roP)({type:"multi"}).then(function(i){var l=(i.data||[]).map(function(p){return{key:p.id,tab:p.name,is_main:p.is_main}});S(l);var u=(0,v.KJ)("sub-site-id");!u&&l.length>0&&(u=l[0].key+"");var f=l.find(function(p){return p.key===Number(u)}),n=!1;f&&(n=!0,f.is_main&&(n=!1)),(0,v.Xq)("is-sub-site",n),F(u)})};(0,C.useEffect)(function(){A()},[]);var R=function(i){var l;F(i),(0,v.Xq)("sub-site-id",i);var u=g.find(function(n){return n.key===Number(i)}),f=!0;u.is_main&&(f=!1),(0,v.Xq)("is-sub-site",f),(l=o.onTabChange)===null||l===void 0||l.call(o,i,f)};return(0,O.jsx)(Z._z,{tabList:g,tabActiveKey:b,onTabChange:R,title:o.title,children:o.children})};T.Z=h},17361:function(H,T,e){var I=e(48305),c=e.n(I),L=e(54203),v=e(75271),Z=e(99944),C=e(76979),O=e(52676),h=function(o){var N=(0,v.useState)(!1),j=c()(N,2),g=j[0],S=j[1],x=(0,v.useState)([]),y=c()(x,2),b=y[0],F=y[1],A=function(l){if(o.manual){var u;(u=o.onCancel)===null||u===void 0||u.call(o,l)}else S(l)},R=function(l){o.multiple?F(l):(o.onSelect(l),A(!1))},U=function(){o.multiple&&o.onSelect(b),A(!1)};return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("div",{style:{display:"inline-block"},onClick:function(){A(!g)},children:o.children}),(0,O.jsx)(L.Z,{className:"material-modal",width:800,open:o.manual?o.open:g,onCancel:function(){A(!1)},onOk:function(){U()},children:(0,O.jsx)(Z.Z,{multiple:o.multiple,onSelect:function(l){R(l)}})})]})};T.Z=h},60983:function(H,T,e){e.d(T,{Z:function(){return A}});var I=e(90228),c=e.n(I),L=e(87999),v=e.n(L),Z=e(75304),C=e(92204),O=e(75308),h=e(14076),z=e(37912),o=e(34206),N=e(5729),j=e(52577),g=e(75271),S=e(39651),x=e(52676);function y(){return{actions:[{title:"\u5A92\u4F53\u5E93",icon:'<svg t="1695784255158" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4033" width="16" height="16"><path d="M416 266.538667m-96 0a96 96 0 1 0 192 0 96 96 0 1 0-192 0Z" p-id="4034" fill="#010000"></path><path d="M721.749333 371.626667A43.818667 43.818667 0 0 0 682.666667 348.074667a42.965333 42.965333 0 0 0-38.058667 25.002666l-66.474667 146.517334a10.624 10.624 0 0 1-18.005333 2.261333l-34.986667-43.690667a42.666667 42.666667 0 0 0-34.688-16.042666 42.965333 42.965333 0 0 0-33.578666 18.176L323.84 670.293333a21.333333 21.333333 0 0 0 17.493333 33.706667h512a21.333333 21.333333 0 0 0 18.133334-10.112 21.333333 21.333333 0 0 0 0.938666-20.736z" p-id="4035" fill="#010000"></path><path d="M938.666667 0H234.666667a85.333333 85.333333 0 0 0-85.333334 85.333333v704a85.333333 85.333333 0 0 0 85.333334 85.333334H938.666667a85.333333 85.333333 0 0 0 85.333333-85.333334V85.333333a85.333333 85.333333 0 0 0-85.333333-85.333333z m-6.186667 783.104a21.333333 21.333333 0 0 1-15.104 6.229333H256a21.333333 21.333333 0 0 1-21.333333-21.333333V106.666667A21.333333 21.333333 0 0 1 256 85.333333h661.333333a21.333333 21.333333 0 0 1 21.333334 21.333334V768a21.333333 21.333333 0 0 1-6.186667 14.976z" p-id="4036" fill="#010000"></path><path d="M832 938.666667h-725.333333a21.333333 21.333333 0 0 1-21.333334-21.333334v-725.333333a42.666667 42.666667 0 0 0-85.333333 0V938.666667a85.333333 85.333333 0 0 0 85.333333 85.333333h746.666667a42.666667 42.666667 0 0 0 0-85.333333z" p-id="4037" fill="#010000"></path></svg>',handler:{type:"action",click:function(U){var i=U.appendBlock,l=U.editor,u=function(n){return n.is_image||n.file_location.indexOf(".webp")!==-1||n.file_location.indexOf(".bmp")!==-1||n.file_location.indexOf(".png")!==-1||n.file_location.indexOf(".gif")!==-1||n.file_location.indexOf(".jpg")!==-1||n.file_location.indexOf(".jpeg")!==-1||n.file_location.indexOf(".svg")!==-1?"![".concat(n.file_name,"](").concat(n.logo,")"):n.file_location.indexOf(".mp4")!==-1||n.file_location.indexOf(".ogg")!==-1||n.file_location.indexOf(".webm")!==-1?'<video controls="controls" controlslist="nodownload" poster=""><source src="'.concat(n.logo,'" type="video/').concat(n.file_location.substr(n.file_location.lastIndexOf(".")+1),'">\u60A8\u7684\u6D4F\u89C8\u5668\u4E0D\u652F\u6301 video \u6807\u7B7E\u3002</video>'):n.file_location.indexOf(".mp3")!==-1||n.file_location.indexOf(".wav")!==-1?'<audio src="'.concat(n.logo,'" controls="controls"><source src="').concat(n.logo,'" type="audio/').concat(n.file_location.substr(n.file_location.lastIndexOf(".")+1),'">\u4F60\u7684\u7F16\u8F91\u5668\u4E0D\u652F\u6301 audio \u6807\u7B7E</audio>'):"[".concat(n.file_name,"](").concat(n.logo,")")};S.Z.show(!0).then(function(f){var n=[];for(var p in f)f.hasOwnProperty(p)&&n.push(u(f[p]));i(n.join(`
`)),l.focus()}),l.focus()}}}]}}var b=[(0,C.Z)(),(0,O.Z)(),(0,h.Z)(),y()],F=(0,g.forwardRef)(function(R,U){function i(){}(0,g.useImperativeHandle)(U,function(){return{setInnerContent:i}});var l=function(){var u=v()(c()().mark(function f(n){var p,V,E,w,a;return c()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:p=[],V=o.ZP.loading("\u63D2\u5165\u4E2D...",0),M.t0=c()().keys(n);case 3:if((M.t1=M.t0()).done){M.next=14;break}if(E=M.t1.value,!n.hasOwnProperty(E)){M.next=12;break}return w=new FormData,w.append("file",n[E]),M.next=10,(0,Z.pD2)(w);case 10:a=M.sent,a.code!==0?o.ZP.info(a.msg):p.push({url:a.data.logo});case 12:M.next=3;break;case 14:return V(),M.abrupt("return",p);case 16:case"end":return M.stop()}},f)}));return function(n){return u.apply(this,arguments)}}();return(0,x.jsx)("div",{className:"editor-container "+R.className,style:{border:"1px solid #ccc",marginTop:"10px"},children:(0,x.jsx)(z.M,{value:R.content,plugins:b,locale:j,onChange:function(f){R.setContent(f)},uploadImages:l})})}),A=F},7971:function(H,T,e){e.r(T);var I=e(90228),c=e.n(I),L=e(87999),v=e.n(L),Z=e(335),C=e.n(Z),O=e(48305),h=e.n(O),z=e(85606),o=e(17361),N=e(30141),j=e(60983),g=e(75304),S=e(86743),x=e(16621),y=e(74133),b=e(96640),F=e(66857),A=e(76334),R=e(71384),U=e(41265),i=e(32064),l=e(34206),u=e(91827),f=e(59124),n=e(48806),p=e(47634),V=e(43330),E=e(75271),w=e(32639),a=e(52676),ne=void 0,M=3,he=function(){var Q=(0,E.useRef)(),te=(0,E.useRef)(null),ge=(0,E.useState)(""),se=h()(ge,2),k=se[0],J=se[1],Ee=(0,E.useState)([]),re=h()(Ee,2),B=re[0],$=re[1],pe=(0,E.useState)(""),oe=h()(pe,2),G=oe[0],Y=oe[1],Me=(0,E.useState)({}),le=h()(Me,2),Ve=le[0],Pe=le[1],Oe=(0,E.useState)({}),ie=h()(Oe,2),De=ie[0],Ce=ie[1],je=(0,E.useState)(!1),_e=h()(je,2),de=_e[0],ce=_e[1],xe=(0,E.useState)({status:1}),ue=h()(xe,2),q=ue[0],ye=ue[1],Te=(0,E.useState)([]),me=h()(Te,2),Ie=me[0],Se=me[1],be=(0,E.useState)(""),fe=h()(be,2),Ae=fe[0],Re=fe[1],d=(0,i.useIntl)(),Ue=function(t){var s=C()(Ie),r;try{for(s.s();!(r=s.n()).done;){var _=r.value;if(_.id===t){Pe(_);break}}}catch(P){s.e(P)}finally{s.f()}},ve=function(){var m=v()(c()().mark(function t(){var s,r,_,P,D,W,X,ae;return c()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return s=new URLSearchParams(window.location.search),r=s.get("id")||0,r==="new"&&(r=0),_=Number(s.get("parent_id")||0),K.next=6,(0,g.hUj)();case 6:return P=K.sent,Se(P.data||[]),K.next=10,(0,g.nNt)({id:r});case 10:if(D=K.sent,W=D.data||{status:1,parent_id:_},X=W.module_id||1,!(_>0)){K.next=19;break}return K.next=16,(0,g.nNt)({id:_});case 16:ae=K.sent,ae.data&&(X=ae.data.module_id),W.module_id=X;case 19:Ue(X),ye(W),J(W.content||""),$(W.images||[]),Y(W.logo||""),(0,g.Zyq)().then(function(Fe){Ce(Fe.data||{}),ce(!0)});case 25:case"end":return K.stop()}},t)}));return function(){return m.apply(this,arguments)}}(),Ke=function(t){ce(!1),ve().then(function(){Re(t)})};(0,E.useEffect)(function(){ve()},[]);var ee=function(){var m=v()(c()().mark(function t(s){var r,_;return c()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(r=Object.assign(q,s),r.content=k,r.type=M,r.images=B,r.logo=G,r.title!==""){D.next=8;break}return l.ZP.error(d.formatMessage({id:"content.page.input.required"})),D.abrupt("return");case 8:return D.next=10,(0,g._zR)(r);case 10:_=D.sent,_.code===0?(l.ZP.info(_.msg),i.history.back()):l.ZP.error(_.msg);case 12:case"end":return D.stop()}},t)}));return function(s){return m.apply(this,arguments)}}(),Le=function(t){var s=C()(t),r;try{for(s.s();!(r=s.n()).done;){var _=r.value,P=!1;for(var D in B)if(B[D]===_.logo){P=!0;break}P||B.push(_.logo)}}catch(W){s.e(W)}finally{s.f()}$([].concat(B)),l.ZP.success(d.formatMessage({id:"setting.system.upload-success"}))},Ze=function(t,s){s.stopPropagation(),B.splice(t,1),$([].concat(B))},Be=function(t){Y(t.logo),l.ZP.success(d.formatMessage({id:"setting.system.upload-success"}))},We=function(t){t.stopPropagation(),Y("")},Ne=function(t){if(t.key==="s"&&(t.ctrlKey||t.metaKey)){var s,r,_=(s=Q.current)===null||s===void 0||(r=s.getFieldsFormatValue)===null||r===void 0?void 0:r.call(s);ee(_),t.preventDefault()}};return(0,a.jsx)(z.Z,{onTabChange:function(t){return Ke(t)},title:q.id>0?d.formatMessage({id:"content.page.edit"}):d.formatMessage({id:"content.page.new"}),children:(0,a.jsx)(u.Z,{onKeyDown:Ne,children:de&&(0,a.jsx)(y.A,{formRef:Q,initialValues:q,layout:"horizontal",onFinish:ee,children:(0,a.jsxs)(f.Z,{gutter:20,children:[(0,a.jsxs)(n.Z,{sm:18,xs:24,children:[(0,a.jsx)(b.Z,{name:"title",label:d.formatMessage({id:"content.page.name"})}),(0,a.jsx)(F.Z,{name:"description",label:d.formatMessage({id:"content.page.description"})}),(0,a.jsx)(b.Z,{name:"seo_title",label:d.formatMessage({id:"content.seo-title.name"}),placeholder:d.formatMessage({id:"content.page.seo-title.placeholder"}),extra:d.formatMessage({id:"content.page.seo-title.description"})}),(0,a.jsx)(b.Z,{name:"keywords",label:d.formatMessage({id:"content.keywords.name"}),extra:d.formatMessage({id:"content.keywords.description"})}),(0,a.jsx)(A.Z.Group,{name:"status",label:d.formatMessage({id:"content.category.status"}),options:[{value:0,label:d.formatMessage({id:"content.category.status.hide"})},{value:1,label:d.formatMessage({id:"content.category.status.ok"})}],extra:d.formatMessage({id:"content.page.status.tips"})}),de&&(0,a.jsx)(a.Fragment,{children:De.editor==="markdown"?(0,a.jsx)(j.Z,{className:"mb-normal",setContent:function(){var m=v()(c()().mark(function t(s){return c()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:J(s);case 1:case"end":return _.stop()}},t)}));return function(t){return m.apply(this,arguments)}}(),content:k,ref:te}):(0,a.jsx)(N.Z,{className:"mb-normal",setContent:function(){var m=v()(c()().mark(function t(s){return c()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:J(s);case 1:case"end":return _.stop()}},t)}));return function(t){return m.apply(this,arguments)}}(),field:"content",ref:te,content:k},"content")})]}),(0,a.jsxs)(n.Z,{sm:6,xs:24,children:[(0,a.jsx)("div",{className:"mb-normal",children:(0,a.jsxs)(f.Z,{gutter:[16,16],children:[(0,a.jsx)(n.Z,{span:12,children:(0,a.jsx)(p.ZP,{block:!0,type:"primary",onClick:function(){var t,s;ee((t=Q.current)===null||t===void 0||(s=t.getFieldsFormatValue)===null||s===void 0?void 0:s.call(t))},children:(0,a.jsx)(i.FormattedMessage,{id:"content.submit.ok"})})}),(0,a.jsx)(n.Z,{span:12,children:(0,a.jsx)(p.ZP,{block:!0,onClick:function(){i.history.back()},children:(0,a.jsx)(i.FormattedMessage,{id:"design.back"})})})]})}),(0,a.jsxs)(u.Z,{className:"aside-card",size:"small",title:d.formatMessage({id:"content.category.banner"}),children:[B.length?B.map(function(m,t){return(0,a.jsxs)("div",{className:"ant-upload-item",children:[(0,a.jsx)(V.Z,{preview:{src:m},src:m}),(0,a.jsx)("span",{className:"delete",onClick:Ze.bind(ne,t),children:(0,a.jsx)(S.Z,{})})]},t)}):null,(0,a.jsx)(o.Z,{onSelect:Le,open:!1,multiple:!0,children:(0,a.jsx)("div",{className:"ant-upload-item",children:(0,a.jsxs)("div",{className:"add",children:[(0,a.jsx)(x.Z,{}),(0,a.jsx)("div",{style:{marginTop:8},children:(0,a.jsx)(i.FormattedMessage,{id:"setting.system.upload"})})]})})})]}),(0,a.jsx)(u.Z,{className:"aside-card",size:"small",title:d.formatMessage({id:"content.category.thumb"}),children:G?(0,a.jsxs)("div",{className:"ant-upload-item",children:[(0,a.jsx)(V.Z,{preview:{src:G},src:G}),(0,a.jsx)("span",{className:"delete",onClick:We,children:(0,a.jsx)(S.Z,{})})]}):(0,a.jsx)(o.Z,{onSelect:Be,open:!1,children:(0,a.jsx)("div",{className:"ant-upload-item",children:(0,a.jsxs)("div",{className:"add",children:[(0,a.jsx)(x.Z,{}),(0,a.jsx)("div",{style:{marginTop:8},children:(0,a.jsx)(i.FormattedMessage,{id:"setting.system.upload"})})]})})})}),(0,a.jsx)(u.Z,{className:"aside-card",size:"small",title:d.formatMessage({id:"content.url-token.name"}),children:(0,a.jsx)(b.Z,{name:"url_token",label:"",placeholder:d.formatMessage({id:"content.url-token.placeholder"}),extra:d.formatMessage({id:"content.url-token.tips"})})}),(0,a.jsx)(u.Z,{className:"aside-card",size:"small",title:d.formatMessage({id:"content.category.sort"}),children:(0,a.jsx)(R.Z,{name:"sort",extra:d.formatMessage({id:"content.category.sort.description"})})}),(0,a.jsx)(u.Z,{className:"aside-card",size:"small",title:d.formatMessage({id:"content.page.template"}),children:(0,a.jsx)(U.Z,{label:"",showSearch:!0,name:"template",request:v()(c()().mark(function m(){var t,s,r;return c()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,g.h5q)({});case 2:t=P.sent,s=[{path:"",remark:d.formatMessage({id:"content.default-template"})}].concat(t.data||[]);for(r in s)s[r].remark?s[r].remark=s[r].path+"("+s[r].remark+")":s[r].remark=s[r].path;return P.abrupt("return",s);case 6:case"end":return P.stop()}},m)})),fieldProps:{fieldNames:{label:"remark",value:"path"}},extra:(0,a.jsxs)("div",{children:[(0,a.jsx)(i.FormattedMessage,{id:"content.category.default"}),": page/detail.html"]})})})]})]})})},Ae)})};T.default=he},32639:function(){}}]);
