"use strict";(self.webpackChunkAnQiCMS=self.webpackChunkAnQiCMS||[]).push([[3358],{85606:function(se,x,n){var I=n(48305),j=n.n(I),K=n(75304),r=n(22683),U=n(96570),h=n(75271),L=n(52676),p=function(E){var B=(0,h.useState)(void 0),C=j()(B,2),D=C[0],S=C[1],y=(0,h.useState)(""),u=j()(y,2),R=u[0],b=u[1],W=function(){(0,K.roP)({type:"multi"}).then(function(f){var m=(f.data||[]).map(function(O){return{key:O.id,tab:O.name,is_main:O.is_main}});S(m);var M=(0,r.KJ)("sub-site-id");!M&&m.length>0&&(M=m[0].key+"");var _=m.find(function(O){return O.key===Number(M)}),e=!1;_&&(e=!0,_.is_main&&(e=!1)),(0,r.Xq)("is-sub-site",e),b(M)})};(0,h.useEffect)(function(){W()},[]);var P=function(f){var m;b(f),(0,r.Xq)("sub-site-id",f);var M=D.find(function(e){return e.key===Number(f)}),_=!0;M.is_main&&(_=!1),(0,r.Xq)("is-sub-site",_),(m=E.onTabChange)===null||m===void 0||m.call(E,f,_)};return(0,L.jsx)(U._z,{tabList:D,tabActiveKey:R,onTabChange:P,title:E.title,children:E.children})};x.Z=p},97248:function(se,x,n){n.r(x);var I=n(15558),j=n.n(I),K=n(90228),r=n.n(K),U=n(87999),h=n.n(U),L=n(48305),p=n.n(L),z=n(85606),E=n(64016),B=n(74133),C=n(96640),D=n(66857),S=n(18640),y=n(35937),u=n(32064),R=n(34206),b=n(54203),W=n(53745),P=n(91827),Z=n(18874),f=n(47634),m=n(16483),M=n.n(m),_=n(75271),e=n(52676),O=function(){var w=(0,_.useRef)(),ae=(0,_.useState)({}),N=p()(ae,2),$=N[0],te=N[1],ie=(0,_.useState)([]),V=p()(ie,2),g=V[0],A=V[1],_e=(0,_.useState)(!1),Y=p()(_e,2),re=Y[0],le=Y[1],oe=(0,_.useState)(!1),H=p()(oe,2),ue=H[0],F=H[1],de=(0,_.useState)(!1),X=p()(de,2),G=X[0],T=X[1],ce=(0,_.useState)(-1),Q=p()(ce,2),k=Q[0],q=Q[1],me=(0,_.useState)(""),ee=p()(me,2),he=ee[0],pe=ee[1],a=(0,u.useIntl)(),ne=function(){var i=h()(r()().mark(function s(){var t,l;return r()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,E.al)();case 2:t=o.sent,l=t.data||{},te(l),A(l.js_codes||[]),le(!0);case 7:case"end":return o.stop()}},s)}));return function(){return i.apply(this,arguments)}}(),fe=function(s){ne().then(function(){pe(s)})};(0,_.useEffect)(function(){ne()},[]);var ge=function(){var i=h()(r()().mark(function s(t){var l,d;return r()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:l=Object.assign($,t),$.js_codes=g,d=R.ZP.loading(a.formatMessage({id:"setting.system.submitting"}),0),(0,E.E7)(l).then(function(c){R.ZP.success(c.msg)}).catch(function(c){console.log(c)}).finally(function(){d()});case 4:case"end":return v.stop()}},s)}));return function(t){return i.apply(this,arguments)}}(),ve=function(){var s,t=g.push({name:"",value:""})-1;q(t),A((s=[]).concat.apply(s,j()(g))),T(!0)},Ee=function(s,t){q(t),T(!0)},Me=function(){var i=h()(r()().mark(function s(t){var l,d,o;return r()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:g[k]=t,A((l=[]).concat.apply(l,j()(g))),T(!1),(d=w.current)===null||d===void 0||(o=d.reloadAndRest)===null||o===void 0||o.call(d);case 4:case"end":return c.stop()}},s)}));return function(t){return i.apply(this,arguments)}}(),Pe=function(s){b.Z.confirm({title:a.formatMessage({id:"setting.system.confirm-delete"}),onOk:function(){var t=h()(r()().mark(function d(){var o,v,c;return r()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:g.splice(s,1),A((o=[]).concat.apply(o,j()(g))),(v=w.current)===null||v===void 0||(c=v.reloadAndRest)===null||c===void 0||c.call(v);case 3:case"end":return J.stop()}},d)}));function l(){return t.apply(this,arguments)}return l}()})},Oe=function(){F(!0)},je=[{title:a.formatMessage({id:"plugin.aigenerate.time"}),width:160,dataIndex:"created_time",render:function(s,t){return M()(t.created_time*1e3).format("YYYY-MM-DD HH:mm")}},{title:a.formatMessage({id:"plugin.push.engine"}),width:160,dataIndex:"spider"},{title:a.formatMessage({id:"plugin.push.result"}),dataIndex:"result"}],Ce=[{title:a.formatMessage({id:"plugin.push.name"}),width:200,dataIndex:"name"},{title:a.formatMessage({id:"plugin.push.code"}),dataIndex:"value",render:function(s){return(0,e.jsx)("div",{style:{maxHeight:60,overflow:"hidden",textOverflow:"ellipsis",wordBreak:"break-all"},children:s})}},{title:a.formatMessage({id:"setting.action"}),dataIndex:"option",valueType:"option",width:150,render:function(s,t,l){return(0,e.jsxs)(W.Z,{size:20,children:[(0,e.jsx)("a",{onClick:function(){Ee(t,l)},children:(0,e.jsx)(u.FormattedMessage,{id:"setting.action.edit"})},"check"),(0,e.jsx)("a",{className:"text-red",onClick:function(){Pe(l)},children:(0,e.jsx)(u.FormattedMessage,{id:"setting.system.delete"})},"delete")]})}}];return(0,e.jsxs)(z.Z,{onTabChange:function(s){return fe(s)},children:[(0,e.jsxs)(P.Z,{children:[(0,e.jsx)(Z.Z,{message:(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{children:(0,e.jsx)(u.FormattedMessage,{id:"plugin.push.tips"})}),(0,e.jsx)(f.ZP,{size:"small",onClick:Oe,children:(0,e.jsx)(u.FormattedMessage,{id:"plugin.push.view-log"})})]})}),(0,e.jsx)("div",{className:"mt-normal",children:re&&(0,e.jsxs)(B.A,{onFinish:ge,initialValues:$,children:[(0,e.jsx)(P.Z,{size:"small",title:a.formatMessage({id:"plugin.push.baidu"}),bordered:!1,children:(0,e.jsx)(C.Z,{name:"baidu_api",label:a.formatMessage({id:"plugin.push.api-link"}),extra:a.formatMessage({id:"plugin.push.baidu.api-link.description"})})}),(0,e.jsx)(P.Z,{size:"small",title:a.formatMessage({id:"plugin.push.bing"}),bordered:!1,children:(0,e.jsx)(C.Z,{name:"bing_api",label:a.formatMessage({id:"plugin.push.api-link"}),extra:a.formatMessage({id:"plugin.push.bing.api-link.description"})})}),(0,e.jsx)(P.Z,{size:"small",title:a.formatMessage({id:"plugin.push.google"}),bordered:!1,children:(0,e.jsx)(D.Z,{name:"google_json",label:a.formatMessage({id:"plugin.push.google.json"}),fieldProps:{rows:5},extra:a.formatMessage({id:"plugin.push.google.description"})})}),(0,e.jsxs)(P.Z,{size:"small",title:a.formatMessage({id:"plugin.push.other-js"}),bordered:!1,children:[(0,e.jsx)(S.Z,{actionRef:w,rowKey:"name",search:!1,toolBarRender:function(){return[(0,e.jsx)(f.ZP,{onClick:function(){ve()},children:(0,e.jsx)(u.FormattedMessage,{id:"plugin.push.other-js.add"})},"add")]},tableAlertOptionRender:!1,request:h()(r()().mark(function i(){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{data:g});case 1:case"end":return t.stop()}},i)})),columnsState:{persistenceKey:"push-jscode-table",persistenceType:"localStorage"},columns:Ce,pagination:!1}),(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{children:(0,e.jsx)(u.FormattedMessage,{id:"plugin.push.other-js.tips1"})}),(0,e.jsx)("p",{children:(0,e.jsx)(u.FormattedMessage,{id:"plugin.push.other-js.tips2"})}),(0,e.jsx)("p",{children:(0,e.jsx)(u.FormattedMessage,{id:"plugin.push.other-js.tips3"})})]})]})]})})]},he),(0,e.jsx)(b.Z,{title:a.formatMessage({id:"plugin.push.view-log"}),width:900,open:ue,onCancel:function(){F(!1)},onOk:function(){F(!1)},children:(0,e.jsx)(S.Z,{rowKey:"id",search:!1,toolBarRender:!1,request:function(s){return(0,E.xE)(s)},columnsState:{persistenceKey:"push-log-table",persistenceType:"localStorage"},columns:je,pagination:{showSizeChanger:!0}})}),G&&(0,e.jsxs)(y.Y,{open:G,onFinish:Me,onOpenChange:function(s){T(s)},initialValues:g[k],children:[(0,e.jsx)(C.Z,{name:"name",label:a.formatMessage({id:"plugin.push.other-js.name"}),placeholder:a.formatMessage({id:"plugin.push.other-js.name.placeholder"})}),(0,e.jsx)(D.Z,{name:"value",label:a.formatMessage({id:"plugin.push.other-js.code"}),extra:a.formatMessage({id:"plugin.push.other-js.code.placeholder"}),fieldProps:{rows:8}})]})]})};x.default=O}}]);
