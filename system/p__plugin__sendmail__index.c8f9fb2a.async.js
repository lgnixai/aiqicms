"use strict";(self.webpackChunkAnQiCMS=self.webpackChunkAnQiCMS||[]).push([[5153],{56534:function(V,A,e){var p=e(18201),i=e(66342),R=e(59831),d=e(37697),K=e(75271),v=e(73428),I=e(31945),g=e(52676),$=["options","fieldProps","proFieldProps","valueEnum"],u=K.forwardRef(function(r,E){var M=r.options,l=r.fieldProps,Z=r.proFieldProps,f=r.valueEnum,y=(0,i.Z)(r,$);return(0,g.jsx)(I.Z,(0,p.Z)({ref:E,valueType:"checkbox",valueEnum:(0,R.h)(f,void 0),fieldProps:(0,p.Z)({options:M},l),lightProps:(0,p.Z)({labelFormatter:function(){return(0,g.jsx)(I.Z,(0,p.Z)({ref:E,valueType:"checkbox",mode:"read",valueEnum:(0,R.h)(f,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,p.Z)({options:M},l),proFieldProps:Z},y))}},y.lightProps),proFieldProps:Z},y))}),x=K.forwardRef(function(r,E){var M=r.fieldProps,l=r.children;return(0,g.jsx)(d.Z,(0,p.Z)((0,p.Z)({ref:E},M),{},{children:l}))}),L=(0,v.G)(x,{valuePropName:"checked"}),_=L;_.Group=u,A.Z=_},85606:function(V,A,e){var p=e(48305),i=e.n(p),R=e(75304),d=e(22683),K=e(96570),v=e(75271),I=e(52676),g=function(u){var x=(0,v.useState)(void 0),L=i()(x,2),_=L[0],r=L[1],E=(0,v.useState)(""),M=i()(E,2),l=M[0],Z=M[1],f=function(){(0,R.roP)({type:"multi"}).then(function(C){var n=(C.data||[]).map(function(O){return{key:O.id,tab:O.name,is_main:O.is_main}});r(n);var b=(0,d.KJ)("sub-site-id");!b&&n.length>0&&(b=n[0].key+"");var j=n.find(function(O){return O.key===Number(b)}),D=!1;j&&(D=!0,j.is_main&&(D=!1)),(0,d.Xq)("is-sub-site",D),Z(b)})};(0,v.useEffect)(function(){f()},[]);var y=function(C){var n;Z(C),(0,d.Xq)("sub-site-id",C);var b=_.find(function(D){return D.key===Number(C)}),j=!0;b.is_main&&(j=!1),(0,d.Xq)("is-sub-site",j),(n=u.onTabChange)===null||n===void 0||n.call(u,C,j)};return(0,I.jsx)(K._z,{tabList:_,tabActiveKey:l,onTabChange:y,title:u.title,children:u.children})};A.Z=g},85663:function(V,A,e){e.r(A),e.d(A,{default:function(){return O}});var p=e(90228),i=e.n(p),R=e(87999),d=e.n(R),K=e(48305),v=e.n(K),I=e(85606),g=e(33062),$=e(18640),u=e(32064),x=e(34206),L=e(91827),_=e(18874),r=e(47634),E=e(16483),M=e.n(E),l=e(75271),Z=e(35937),f=e(96640),y=e(76334),Y=e(66857),C=e(56534),n=e(52676),b=function(S){var X=(0,l.useState)(!1),F=v()(X,2),P=F[0],B=F[1],H=(0,l.useState)(!1),W=v()(H,2),Q=W[0],z=W[1],a=(0,u.useIntl)(),U=function(){var h=d()(i()().mark(function s(m){var o;return i()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:m.port=Number(m.port),o=x.ZP.loading(a.formatMessage({id:"setting.system.submitting"}),0),(0,g.b5)(m).then(function(N){x.ZP.info(N.msg),B(!1),S.onCancel()}).finally(function(){o()});case 3:case"end":return c.stop()}},s)}));return function(m){return h.apply(this,arguments)}}();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{onClick:function(){B(!P)},children:S.children}),(0,n.jsxs)(Z.Y,{width:600,title:a.formatMessage({id:"plugin.sendmail.setting"}),request:d()(i()().mark(function h(){var s,m;return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,g.lN)();case 2:return m=t.sent,z(((s=m.data)===null||s===void 0?void 0:s.auto_reply)||!1),t.abrupt("return",m.data);case 5:case"end":return t.stop()}},h)})),open:P,layout:"horizontal",onOpenChange:function(s){B(s),s||S.onCancel(s)},onFinish:function(){var h=d()(i()().mark(function s(m){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:U(m);case 1:case"end":return t.stop()}},s)}));return function(s){return h.apply(this,arguments)}}(),children:[(0,n.jsx)(f.Z,{name:"server",required:!0,label:a.formatMessage({id:"plugin.sendmail.server"}),extra:a.formatMessage({id:"plugin.sendmail.server.description"})}),(0,n.jsx)(y.Z.Group,{name:"use_ssl",label:a.formatMessage({id:"plugin.sendmail.use-ssl"}),options:[{label:a.formatMessage({id:"plugin.sendmail.use-ssl.no"}),value:0},{label:"SSL",value:1},{label:"TLS",value:2}]}),(0,n.jsx)(f.Z,{name:"port",label:a.formatMessage({id:"plugin.sendmail.port"}),extra:a.formatMessage({id:"plugin.sendmail.port.description"})}),(0,n.jsx)(f.Z,{name:"account",label:a.formatMessage({id:"plugin.sendmail.account"}),extra:a.formatMessage({id:"plugin.sendmail.account.description"})}),(0,n.jsx)(f.Z,{name:"password",label:a.formatMessage({id:"plugin.sendmail.password"}),extra:a.formatMessage({id:"plugin.sendmail.password.description"})}),(0,n.jsx)(f.Z,{name:"recipient",label:a.formatMessage({id:"plugin.sendmail.recipient"}),extra:a.formatMessage({id:"plugin.sendmail.recipient.description"})}),(0,n.jsx)(y.Z.Group,{name:"auto_reply",label:a.formatMessage({id:"plugin.sendmail.auto-reply"}),options:[{label:a.formatMessage({id:"plugin.sendmail.auto-reply.no"}),value:!1},{label:a.formatMessage({id:"plugin.sendmail.auto-reply.yes"}),value:!0}],fieldProps:{onChange:function(s){z(s.target.value)}},extra:a.formatMessage({id:"plugin.sendmail.auto-reply.description"})}),Q&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.Z,{name:"reply_subject",label:a.formatMessage({id:"plugin.sendmail.auto-reply.title"}),extra:a.formatMessage({id:"plugin.sendmail.auto-reply.title.description"})}),(0,n.jsx)(Y.Z,{name:"reply_message",label:a.formatMessage({id:"plugin.sendmail.auto-reply.message"}),extra:a.formatMessage({id:"plugin.sendmail.auto-reply.message.description"})})]}),(0,n.jsx)(C.Z.Group,{name:"send_type",label:a.formatMessage({id:"plugin.sendmail.send-type"}),options:[{label:a.formatMessage({id:"plugin.sendmail.send-type.guestbook"}),value:1},{label:a.formatMessage({id:"plugin.sendmail.send-type.report"}),value:2},{label:a.formatMessage({id:"plugin.sendmail.send-type.new-order"}),value:3},{label:a.formatMessage({id:"plugin.sendmail.send-type.pay-order"}),value:4}],extra:a.formatMessage({id:"plugin.sendmail.send-type.description"})})]})]})},j=b,D=function(){var S=(0,l.useRef)(),X=(0,l.useState)({}),F=v()(X,2),P=F[0],B=F[1],H=(0,l.useState)(""),W=v()(H,2),Q=W[0],z=W[1],a=(0,u.useIntl)(),U=function(){var o=d()(i()().mark(function t(){var c;return i()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,(0,g.lN)();case 2:c=T.sent,B(c.data||{});case 4:case"end":return T.stop()}},t)}));return function(){return o.apply(this,arguments)}}(),h=function(t){U().then(function(){z(t)})};(0,l.useEffect)(function(){U()},[]);var s=function(){var o=d()(i()().mark(function t(){var c,N,T;return i()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return N=x.ZP.loading(a.formatMessage({id:"plugin.sendmail.test.sending"}),0),G.next=3,(0,g.jp)();case 3:T=G.sent,S==null||(c=S.current)===null||c===void 0||c.reload(),N(),x.ZP.info(T.msg);case 7:case"end":return G.stop()}},t)}));return function(){return o.apply(this,arguments)}}(),m=[{title:a.formatMessage({id:"plugin.sendmail.send-time"}),width:160,dataIndex:"created_time",render:function(t,c){return M()(c.created_time*1e3).format("YYYY-MM-DD HH:mm")}},{title:a.formatMessage({id:"plugin.sendmail.recipient"}),dataIndex:"address"},{title:a.formatMessage({id:"plugin.sendmail.subject"}),dataIndex:"subject"},{title:a.formatMessage({id:"plugin.sendmail.status"}),width:160,dataIndex:"status"}];return(0,n.jsx)(I.Z,{onTabChange:function(t){return h(t)},children:(0,n.jsxs)(L.Z,{children:[(0,n.jsx)(_.Z,{className:"mb-normal",message:a.formatMessage({id:"plugin.sendmail.tips"})}),(0,n.jsx)($.Z,{headerTitle:a.formatMessage({id:"menu.plugin.sendmail"}),rowKey:"id",actionRef:S,search:!1,pagination:!1,toolBarRender:function(){return[(0,n.jsxs)("div",{children:[(0,n.jsxs)("span",{children:[(0,n.jsx)(u.FormattedMessage,{id:"plugin.sendmail.recipient"}),":"," "]}),(0,n.jsx)("span",{children:P.recipient||P.account?P.recipient||P.account:a.formatMessage({id:"plugin.sendmail.recipient.required"})}),(P.recipient||P.account)&&(0,n.jsxs)("span",{children:["\xA0\xA0\xA0",(0,n.jsx)(r.ZP,{onClick:function(){return s()},children:(0,n.jsx)(u.FormattedMessage,{id:"plugin.sendmail.test.send"})})]})]},"sender"),(0,n.jsx)(j,{onCancel:function(){U()},children:(0,n.jsx)(r.ZP,{children:(0,n.jsx)(u.FormattedMessage,{id:"plugin.sendmail.setting"})})},"setting")]},request:function(t){return(0,g.Vz)(t)},columnsState:{persistenceKey:"sendmail-log-table",persistenceType:"localStorage"},columns:m})]},Q)})},O=D}}]);
