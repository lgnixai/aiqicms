"use strict";(self.webpackChunkAnQiCMS=self.webpackChunkAnQiCMS||[]).push([[806],{23922:function(w,E,e){e.r(E);var U=e(90228),o=e.n(U),j=e(87999),M=e.n(j),A=e(48305),h=e.n(A),l=e(75304),C=e(96570),b=e(74133),m=e(96640),i=e(32064),g=e(54203),p=e(34206),I=e(91827),R=e(47634),u=e(75271),n=e(52676),c=!1,L=function(){var B=(0,u.useState)(null),O=h()(B,2),P=O[0],K=O[1],W=(0,u.useState)(null),D=h()(W,2),d=D[0],x=D[1],_=(0,i.useIntl)(),T=function(){var v=M()(o()().mark(function a(){var f,t;return o()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,l.bop)();case 2:f=s.sent,t=f.data||null,K(t),(0,l.YeV)().then(function(r){x(r.data||null)});case 6:case"end":return s.stop()}},a)}));return function(){return v.apply(this,arguments)}}();(0,u.useEffect)(function(){T()},[]);var y=function(){var v=M()(o()().mark(function a(){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!c){t.next=2;break}return t.abrupt("return");case 2:g.Z.confirm({title:_.formatMessage({id:"tool.confirm-upgrade"}),onOk:function(){c=!0;var s=p.ZP.loading(_.formatMessage({id:"tool.upgrading"}),0);(0,l.Fc0)({version:d.version}).then(function(r){g.Z.info({content:r.msg,okText:_.formatMessage({id:"tool.confirm-restart"}),onOk:function(){var Z=p.ZP.loading(_.formatMessage({id:"tool.restarting"}),0);(0,l.o5l)({}).then(function(){}).catch(function(){}).finally(function(){setTimeout(function(){Z(),window.location.reload()},3e3)})}}),T()}).catch(function(r){console.log(r)}).finally(function(){c=!1,s()})}});case 3:case"end":return t.stop()}},a)}));return function(){return v.apply(this,arguments)}}();return(0,n.jsx)(C._z,{children:(0,n.jsx)(I.Z,{children:P&&(0,n.jsxs)(b.A,{submitter:!1,title:_.formatMessage({id:"menu.upgrade"}),children:[(0,n.jsx)(m.Z,{name:"old_version",fieldProps:{value:P.version},label:_.formatMessage({id:"tool.version"}),width:"lg",readonly:!0}),d?(0,n.jsxs)("div",{children:[(0,n.jsx)(m.Z,{label:_.formatMessage({id:"tool.new-version"}),width:"lg",readonly:!0,children:(0,n.jsx)("div",{className:"text-primary",children:d.version})}),(0,n.jsx)(m.Z,{label:_.formatMessage({id:"tool.version.description"}),width:"lg",readonly:!0,children:(0,n.jsx)("div",{className:"elem-quote",dangerouslySetInnerHTML:{__html:d.description}})}),(0,n.jsx)("div",{className:"mt-normal",children:(0,n.jsx)(R.ZP,{type:"primary",onClick:y,children:(0,n.jsx)(i.FormattedMessage,{id:"tool.upgrade-to-new"})})})]}):(0,n.jsxs)("div",{children:[(0,n.jsx)(i.FormattedMessage,{id:"tool.version.tips.before"})," ",(0,n.jsx)("a",{href:"https://www.anqicms.com/download",target:"_blank",children:"https://www.anqicms.com/download"})," ",(0,n.jsx)(i.FormattedMessage,{id:"tool.version.tips.after"})]})]})})})};E.default=L}}]);
