"use strict";(self.webpackChunkAnQiCMS=self.webpackChunkAnQiCMS||[]).push([[411],{41265:function(V,K,e){var p=e(18201),D=e(66342),Z=e(59831),f=e(75271),A=e(38465),m=e(31945),M=e(52676),P=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],j=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],n=function(l,u){var C=l.fieldProps,O=l.children,I=l.params,d=l.proFieldProps,i=l.mode,o=l.valueEnum,h=l.request,b=l.showSearch,S=l.options,R=(0,D.Z)(l,P),N=(0,f.useContext)(A.Z);return(0,M.jsx)(m.Z,(0,p.Z)((0,p.Z)({valueEnum:(0,Z.h)(o),request:h,params:I,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,p.Z)({options:S,mode:i,showSearch:b,getPopupContainer:N.getPopupContainer},C),ref:u,proFieldProps:d},R),{},{children:O}))},B=f.forwardRef(function(g,l){var u=g.fieldProps,C=g.children,O=g.params,I=g.proFieldProps,d=g.mode,i=g.valueEnum,o=g.request,h=g.options,b=(0,D.Z)(g,j),S=(0,p.Z)({options:h,mode:d||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},u),R=(0,f.useContext)(A.Z);return(0,M.jsx)(m.Z,(0,p.Z)((0,p.Z)({valueEnum:(0,Z.h)(i),request:o,params:O,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,p.Z)({getPopupContainer:R.getPopupContainer},S),ref:l,proFieldProps:I},b),{},{children:C}))}),W=f.forwardRef(n),v=B,y=W;y.SearchSelect=v,y.displayName="ProFormComponent",K.Z=y},85606:function(V,K,e){var p=e(48305),D=e.n(p),Z=e(75304),f=e(22683),A=e(96570),m=e(75271),M=e(52676),P=function(n){var B=(0,m.useState)(void 0),W=D()(B,2),v=W[0],y=W[1],g=(0,m.useState)(""),l=D()(g,2),u=l[0],C=l[1],O=function(){(0,Z.roP)({type:"multi"}).then(function(i){var o=(i.data||[]).map(function(R){return{key:R.id,tab:R.name,is_main:R.is_main}});y(o);var h=(0,f.KJ)("sub-site-id");!h&&o.length>0&&(h=o[0].key+"");var b=o.find(function(R){return R.key===Number(h)}),S=!1;b&&(S=!0,b.is_main&&(S=!1)),(0,f.Xq)("is-sub-site",S),C(h)})};(0,m.useEffect)(function(){O()},[]);var I=function(i){var o;C(i),(0,f.Xq)("sub-site-id",i);var h=v.find(function(S){return S.key===Number(i)}),b=!0;h.is_main&&(b=!1),(0,f.Xq)("is-sub-site",b),(o=n.onTabChange)===null||o===void 0||o.call(n,i,b)};return(0,M.jsx)(A._z,{tabList:v,tabActiveKey:u,onTabChange:I,title:n.title,children:n.children})};K.Z=P},17361:function(V,K,e){var p=e(48305),D=e.n(p),Z=e(54203),f=e(75271),A=e(99944),m=e(76979),M=e(52676),P=function(n){var B=(0,f.useState)(!1),W=D()(B,2),v=W[0],y=W[1],g=(0,f.useState)([]),l=D()(g,2),u=l[0],C=l[1],O=function(o){if(n.manual){var h;(h=n.onCancel)===null||h===void 0||h.call(n,o)}else y(o)},I=function(o){n.multiple?C(o):(n.onSelect(o),O(!1))},d=function(){n.multiple&&n.onSelect(u),O(!1)};return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("div",{style:{display:"inline-block"},onClick:function(){O(!v)},children:n.children}),(0,M.jsx)(Z.Z,{className:"material-modal",width:800,open:n.manual?n.open:v,onCancel:function(){O(!1)},onOk:function(){d()},children:(0,M.jsx)(A.Z,{multiple:n.multiple,onSelect:function(o){I(o)}})})]})};K.Z=P},19830:function(V,K,e){e.d(K,{Z:function(){return B}});var p=e(82092),D=e.n(p),Z=e(48305),f=e.n(Z),A=e(75271),m=e(82187),M=e.n(m),P=e(27806),j=e(52676),n=function(v){var y=(0,A.useState)(!1),g=f()(y,2),l=g[0],u=g[1];(0,A.useEffect)(function(){u(v.open||!1)},[]);var C=function(){u(!l)},O=M()(D()(D()({},"collaspe-item",!0),"collaspe-item-active",l),v.className);return(0,j.jsxs)("div",{className:O,style:v.style,children:[(0,j.jsxs)("div",{className:"collaspe-header",onClick:C,children:[v.showArrow&&(0,j.jsx)(P.Z,{className:"collaspe-icon"}),(0,j.jsx)("div",{className:"collaspe-header-text",children:v.header}),v.extra&&(0,j.jsx)("div",{className:"collaspe-extra",children:v.extra})]}),(0,j.jsx)("div",{className:"collaspe-content",children:v.children})]})},B=n},11829:function(V,K,e){e.r(K);var p=e(335),D=e.n(p),Z=e(26068),f=e.n(Z),A=e(90228),m=e.n(A),M=e(87999),P=e.n(M),j=e(48305),n=e.n(j),B=e(17361),W=e(19830),v=e(85606),y=e(5933),g=e(16621),l=e(74133),u=e(96640),C=e(66857),O=e(41265),I=e(76334),d=e(32064),i=e(34206),o=e(54203),h=e(91827),b=e(48782),S=e(47634),R=e(59124),N=e(48806),$=e(75271),s=e(52676),le=function(){var H,q=(0,d.useModel)("@@initialState"),Q=q.initialState,oe=q.setInitialState,_e=(0,$.useState)({}),ee=n()(_e,2),z=ee[0],me=ee[1],de=(0,$.useState)(""),se=n()(de,2),J=se[0],Y=se[1],ue=(0,$.useState)(0),te=n()(ue,2),ae=te[0],ne=te[1],ce=(0,$.useState)([]),ie=n()(ce,2),T=ie[0],G=ie[1],ge=(0,$.useState)(""),re=n()(ge,2),ve=re[0],fe=re[1],t=(0,d.useIntl)(),X=function(){var c=P()(m()().mark(function a(){var r,_,E,L;return m()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,(0,y.KG)();case 2:E=U.sent,L=E.data||{system:{},template_names:[]},me(L),Y(((r=L.system)===null||r===void 0?void 0:r.site_logo)||""),ne(((_=L.system)===null||_===void 0?void 0:_.site_close)||0),G(L.system.extra_fields||[]);case 8:case"end":return U.stop()}},a)}));return function(){return c.apply(this,arguments)}}(),he=function(a){X().then(function(){fe(a)})};(0,$.useEffect)(function(){X()},[]);var pe=function(a){Y(a.logo),i.ZP.success(t.formatMessage({id:"setting.system.upload-success"}))},Ee=function(a){a.stopPropagation(),Y("")},Me=function(a){a.stopPropagation(),o.Z.confirm({title:t.formatMessage({id:"setting.system.confirm-delete-ico"}),onOk:function(){(0,y.QY)({}).then(function(_){i.ZP.info(_.msg),X()})}})},Pe=function(){var c=P()(m()().mark(function a(r){var _,E;return m()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:_=new FormData,_.append("file",r.file),E=i.ZP.loading(t.formatMessage({id:"setting.system.submitting"}),0),(0,y.M6)(_).then(function(U){i.ZP.success(U.msg),X()}).finally(function(){E()});case 4:case"end":return x.stop()}},a)}));return function(r){return c.apply(this,arguments)}}(),ye=function(){var c=P()(m()().mark(function a(r){var _;return m()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:r.site_logo=J,r.extra_fields=T,_=i.ZP.loading(t.formatMessage({id:"setting.system.submitting"}),0),(0,y.Is)(r).then(function(){var x=P()(m()().mark(function U(De){var w,k;return m()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return i.ZP.success(De.msg),F.next=3,Q==null||(w=Q.fetchSystemSetting)===null||w===void 0?void 0:w.call(Q);case 3:if(k=F.sent,!k){F.next=7;break}return F.next=7,oe(function(Ce){return f()(f()({},Ce),{},{system:k})});case 7:case"end":return F.stop()}},U)}));return function(U){return x.apply(this,arguments)}}()).catch(function(x){console.log(x)}).finally(function(){_()});case 4:case"end":return L.stop()}},a)}));return function(r){return c.apply(this,arguments)}}(),Oe=function(a){switch(a){case"zh-CN":return"\u4E2D\u6587";case"en-US":return"English";case"ja-JP":return"\u65E5\u672C\u8A9E";case"ko-KR":return"\uD55C\uAD6D\uC5B4";case"zh-TW":return"\u7E41\u9AD4\u4E2D\u6587";case"fa-IR":return"\u0641\u0627\u0631\u0633\u06CC";case"pt-BR":return"Portugu\xEAs";case"ru-RU":return"\u0420\u0443\u0441\u0441\u043A\u0438\u0439";case"id-ID":return"Bahasa Indonesia";case"bn-BD":return"\u09AC\u09BE\u0982\u09B2\u09BE";default:return a}};return(0,s.jsx)(v.Z,{onTabChange:function(a){return he(a)},children:(0,s.jsx)(h.Z,{children:z.system&&(0,s.jsxs)(l.A,{initialValues:z.system,onFinish:ye,title:t.formatMessage({id:"menu.setting.system"}),children:[(0,s.jsx)(u.Z,{name:"site_name",label:t.formatMessage({id:"setting.system.site-name"}),width:"lg",extra:t.formatMessage({id:"setting.system.site-name-description"}),rules:[{required:!0,message:t.formatMessage({id:"setting.system.site-name-error"})}]}),(0,s.jsx)(u.Z,{name:"base_url",label:t.formatMessage({id:"setting.system.base-url"}),width:"lg",extra:t.formatMessage({id:"setting.system.base-url-description"}),rules:[{required:!0,message:t.formatMessage({id:"setting.system.base-url-error"})}]}),(0,s.jsx)(u.Z,{name:"mobile_url",label:t.formatMessage({id:"setting.system.mobile-url"}),width:"lg",extra:t.formatMessage({id:"setting.system.mobile-url-description"})}),(0,s.jsx)(u.Z,{label:t.formatMessage({id:"setting.system.site-logo"}),width:"lg",extra:t.formatMessage({id:"setting.system.site-logo-description"}),children:(0,s.jsx)(B.Z,{onSelect:pe,open:!1,children:(0,s.jsx)("div",{className:"ant-upload-item",children:J?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{src:J,style:{width:"100%"}}),(0,s.jsx)("a",{className:"delete",onClick:Ee,children:(0,s.jsx)(d.FormattedMessage,{id:"setting.system.delete"})})]}):(0,s.jsxs)("div",{className:"add",children:[(0,s.jsx)(g.Z,{}),(0,s.jsx)("div",{style:{marginTop:8},children:(0,s.jsx)(d.FormattedMessage,{id:"setting.system.upload"})})]})})})}),(0,s.jsx)(u.Z,{label:t.formatMessage({id:"setting.system.site-ico"}),extra:t.formatMessage({id:"setting.system.site-ico-description"}),children:(0,s.jsx)(b.Z,{name:"file",className:"logo-uploader",showUploadList:!1,accept:".jpg,.jpeg,.png,.gif,.webp,.ico,.bmp",customRequest:function(){var c=P()(m()().mark(function a(r){return m()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",Pe(r));case 1:case"end":return E.stop()}},a)}));return function(a){return c.apply(this,arguments)}}(),children:(0,s.jsx)("div",{className:"ant-upload-item",children:(H=z.system)!==null&&H!==void 0&&H.favicon?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{src:z.system.favicon,style:{width:"100%"}}),(0,s.jsx)("a",{className:"delete",onClick:Me,children:(0,s.jsx)(d.FormattedMessage,{id:"setting.system.delete"})})]}):(0,s.jsxs)("div",{className:"add",children:[(0,s.jsx)(g.Z,{}),(0,s.jsx)("div",{style:{marginTop:8},children:(0,s.jsx)(d.FormattedMessage,{id:"setting.system.upload"})})]})})})}),(0,s.jsx)(u.Z,{name:"site_icp",label:t.formatMessage({id:"setting.system.site-icp"}),width:"lg",extra:(0,s.jsxs)("div",{children:[(0,s.jsx)(d.FormattedMessage,{id:"setting.system.site-icp-description-before"}),(0,s.jsx)("a",{href:"https://beian.miit.gov.cn/",target:"_blank",rel:"noreferrer",children:"beian.miit.gov.cn"}),(0,s.jsx)(d.FormattedMessage,{id:"setting.system.site-icp-description-after"})]})}),(0,s.jsx)(C.Z,{name:"site_copyright",width:"lg",label:t.formatMessage({id:"setting.system.site-copyright"}),placeholder:t.formatMessage({id:"setting.system.site-copyright-placeholder"}),extra:t.formatMessage({id:"setting.system.site-copyright-description"})}),(0,s.jsx)(O.Z,{name:"language",width:"lg",label:t.formatMessage({id:"setting.system.language"}),request:P()(m()().mark(function c(){var a,r,_,E;return m()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:a=[],r=D()(z.languages);try{for(r.s();!(_=r.n()).done;)E=_.value,a.push({label:Oe(E),value:E})}catch(U){r.e(U)}finally{r.f()}return x.abrupt("return",a);case 4:case"end":return x.stop()}},c)})),extra:t.formatMessage({id:"setting.system.language-description"})}),(0,s.jsx)(u.Z,{name:"admin_url",label:t.formatMessage({id:"setting.system.admin-url"}),width:"lg",fieldProps:{suffix:"/system/",placeholder:t.formatMessage({id:"setting.system.admin-url-placeholder"})},extra:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{children:(0,s.jsx)(d.FormattedMessage,{id:"setting.system.admin-url-description-before"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d.FormattedMessage,{id:"setting.system.admin-url-description-notice"}),(0,s.jsx)("span",{className:"text-red",children:(0,s.jsx)(d.FormattedMessage,{id:"setting.system.admin-url-description-notice-value"})}),(0,s.jsx)(d.FormattedMessage,{id:"setting.system.admin-url-description-after"})]})]})}),(0,s.jsx)(I.Z.Group,{name:"site_close",label:t.formatMessage({id:"setting.system.site-close"}),extra:t.formatMessage({id:"setting.system.site-close-description"}),fieldProps:{onChange:function(a){ne(a.target.value)}},options:[{value:0,label:t.formatMessage({id:"setting.system.normal"})},{value:1,label:t.formatMessage({id:"setting.system.close"})},{value:2,label:t.formatMessage({id:"setting.system.spider"})}]}),(ae===1||ae===2)&&(0,s.jsx)(C.Z,{name:"site_close_tips",label:t.formatMessage({id:"setting.system.site-close-tips"}),width:"lg",extra:t.formatMessage({id:"setting.system.site-close-tips-description"})}),(0,s.jsx)(I.Z.Group,{name:"ban_spider",label:t.formatMessage({id:"setting.system.spider-visible"}),extra:t.formatMessage({id:"setting.system.spider-visible-description"}),options:[{value:0,label:t.formatMessage({id:"setting.system.visible"})},{value:1,label:t.formatMessage({id:"setting.system.ban-spider"})}]}),(0,s.jsx)(W.Z,{className:"mb-normal",header:t.formatMessage({id:"setting.system.diy-params"}),showArrow:!0,extra:(0,s.jsx)(S.ZP,{size:"small",onClick:function(a){a.stopPropagation(),T.push({name:"",value:"",remark:""}),G([].concat(T))},children:(0,s.jsx)(d.FormattedMessage,{id:"setting.system.add-param"})}),children:T.map(function(c,a){return(0,s.jsxs)(R.Z,{gutter:16,children:[(0,s.jsx)(N.Z,{sm:8,xs:12,children:(0,s.jsx)(u.Z,{name:["extra_fields",a,"name"],label:t.formatMessage({id:"setting.system.param-name"}),fieldProps:{value:c.name,onChange:function(_){T[a].name=_.target.value,G([].concat(T))}},required:!0,extra:t.formatMessage({id:"setting.system.param-name-description"})})}),(0,s.jsx)(N.Z,{sm:8,xs:12,children:(0,s.jsx)(u.Z,{name:["extra_fields",a,"value"],label:t.formatMessage({id:"setting.system.param-value"}),fieldProps:{value:c.value,onChange:function(_){T[a].value=_.target.value,G([].concat(T))}}})}),(0,s.jsx)(N.Z,{sm:6,xs:12,children:(0,s.jsx)(u.Z,{name:["extra_fields",a,"remark"],label:t.formatMessage({id:"setting.system.remark"}),fieldProps:{value:c.remark,onChange:function(_){T[a].remark=_.target.value,G([].concat(T))}}})}),(0,s.jsx)(N.Z,{sm:2,xs:12,children:(0,s.jsx)(S.ZP,{style:{marginTop:"30px"},onClick:function(){o.Z.confirm({title:t.formatMessage({id:"setting.system.confirm-delete-param"}),onOk:function(){T.splice(a,1),G([].concat(T))}})},children:(0,s.jsx)(d.FormattedMessage,{id:"setting.system.delete"})})})]},a)})},"1")]})},ve)})};K.default=le}}]);
