(self.webpackChunkAnQiCMS=self.webpackChunkAnQiCMS||[]).push([[9459],{17686:function(C,S,r){"use strict";r.r(S);var U=r(90228),s=r.n(U),d=r(335),I=r.n(d),m=r(87999),f=r.n(m),y=r(48305),P=r.n(y),E=r(75304),j=r(96570),p=r(18640),l=r(32064),w=r(54203),g=r(34206),$=r(53745),K=r(47634),T=r(75271),n=r(52676),Q=function(){var L,B=(0,T.useRef)(),V=(0,T.useState)([]),F=P()(V,2),te=F[0],k=F[1],Y=(0,T.useState)(!1),z=P()(Y,2),J=z[0],W=z[1],X=(0,T.useState)(null),H=P()(X,2),R=H[0],N=H[1],u=(0,l.useIntl)(),x=function(){var _=f()(s()().mark(function t(a){return s()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:w.Z.confirm({title:u.formatMessage({id:"content.delete.confirm"}),onOk:function(){var i=f()(s()().mark(function Z(){var b,h,O,v,D,A;return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b=g.ZP.loading(u.formatMessage({id:"content.delete.deletting"}),0),a){e.next=3;break}return e.abrupt("return",!0);case 3:e.prev=3,v=I()(a),e.prev=5,v.s();case 7:if((D=v.n()).done){e.next=13;break}return A=D.value,e.next=11,(0,E.R5s)({id:A});case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),v.e(e.t0);case 18:return e.prev=18,v.f(),e.finish(18);case 21:return b(),g.ZP.success(u.formatMessage({id:"content.delete.success"})),k([]),(h=B.current)===null||h===void 0||(O=h.reloadAndRest)===null||O===void 0||O.call(h),e.abrupt("return",!0);case 28:return e.prev=28,e.t1=e.catch(3),b(),g.ZP.error(u.formatMessage({id:"content.delete.failure"})),e.abrupt("return",!0);case 33:case"end":return e.stop()}},Z,null,[[3,28],[5,15,18,21]])}));function o(){return i.apply(this,arguments)}return o}()});case 1:case"end":return c.stop()}},t)}));return function(a){return _.apply(this,arguments)}}(),G=function(){var _=f()(s()().mark(function t(a){return s()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:w.Z.confirm({title:u.formatMessage({id:"content.recover.confirm"}),onOk:function(){var i=f()(s()().mark(function Z(){var b,h,O,v,D,A;return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b=g.ZP.loading(u.formatMessage({id:"content.recover.recovering"}),0),a){e.next=3;break}return e.abrupt("return",!0);case 3:e.prev=3,v=I()(a),e.prev=5,v.s();case 7:if((D=v.n()).done){e.next=13;break}return A=D.value,e.next=11,(0,E.Fbl)({id:A});case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),v.e(e.t0);case 18:return e.prev=18,v.f(),e.finish(18);case 21:return b(),g.ZP.success(u.formatMessage({id:"content.recover.success"})),k([]),(h=B.current)===null||h===void 0||(O=h.reloadAndRest)===null||O===void 0||O.call(h),e.abrupt("return",!0);case 28:return e.prev=28,e.t1=e.catch(3),b(),g.ZP.error(u.formatMessage({id:"content.recover.failure"})),e.abrupt("return",!0);case 33:case"end":return e.stop()}},Z,null,[[3,28],[5,15,18,21]])}));function o(){return i.apply(this,arguments)}return o}()});case 1:case"end":return c.stop()}},t)}));return function(a){return _.apply(this,arguments)}}(),q=function(t){N(t),W(!0),(0,E.CY9)({id:t.id}).then(function(a){N(a.data||{})})},ee=[{title:"ID",dataIndex:"id",hideInSearch:!0},{title:u.formatMessage({id:"content.title.name"}),dataIndex:"title",hideInSearch:!0,render:function(t,a){return(0,n.jsx)("div",{style:{maxWidth:400},children:(0,n.jsx)("a",{onClick:function(){return q(a)},children:t})})}},{title:"thumb",dataIndex:"thumb",hideInSearch:!0,render:function(t,a){return t?(0,n.jsx)("img",{src:a.thumb,className:"list-thumb"}):null}},{title:u.formatMessage({id:"content.module.name"}),dataIndex:"module_name",hideInSearch:!0},{title:u.formatMessage({id:"setting.action"}),dataIndex:"option",valueType:"option",render:function(t,a){return(0,n.jsxs)($.Z,{size:20,children:[(0,n.jsx)("a",{className:"text-red",onClick:f()(s()().mark(function M(){return s()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,G([a.id]);case 2:case"end":return i.stop()}},M)})),children:(0,n.jsx)(l.FormattedMessage,{id:"content.action.recover"})},"recover"),(0,n.jsx)("a",{className:"text-red",onClick:f()(s()().mark(function M(){return s()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,x([a.id]);case 2:case"end":return i.stop()}},M)})),children:(0,n.jsx)(l.FormattedMessage,{id:"setting.system.delete"})},"delete")]})}}];return(0,n.jsxs)(j._z,{children:[(0,n.jsx)(p.Z,{headerTitle:u.formatMessage({id:"content.recycle.name"}),actionRef:B,rowKey:"id",search:!1,toolBarRender:function(){return[]},tableAlertOptionRender:function(t){var a=t.selectedRowKeys,M=t.onCleanSelected;return(0,n.jsxs)($.Z,{children:[(0,n.jsx)(K.ZP,{size:"small",onClick:f()(s()().mark(function c(){return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,G(a);case 2:case"end":return o.stop()}},c)})),children:(0,n.jsx)(l.FormattedMessage,{id:"content.option.batch-recover"})}),(0,n.jsx)(K.ZP,{size:"small",onClick:f()(s()().mark(function c(){return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,x(a);case 2:case"end":return o.stop()}},c)})),children:(0,n.jsx)(l.FormattedMessage,{id:"content.option.batch-delete"})}),(0,n.jsx)(K.ZP,{type:"link",size:"small",onClick:M,children:(0,n.jsx)(l.FormattedMessage,{id:"content.option.cancel-select"})})]})},request:function(t){return t.recycle=!0,(0,E.Lig)(t)},columnsState:{persistenceKey:"archive-recycle-table",persistenceType:"localStorage"},columns:ee,rowSelection:{onChange:function(t){k(t)}},pagination:{showSizeChanger:!0}}),(0,n.jsxs)(w.Z,{title:u.formatMessage({id:"content.preview"}),open:J,width:1e3,onOk:function(){return W(!1)},onCancel:function(){return W(!1)},children:[(0,n.jsx)("h3",{children:R==null?void 0:R.title}),(0,n.jsx)("div",{className:"article-content",children:(0,n.jsx)("div",{dangerouslySetInnerHTML:{__html:R==null||(L=R.data)===null||L===void 0?void 0:L.content}})})]})]})};S.default=Q},335:function(C,S,r){var U=r(31479);function s(d,I){var m=typeof Symbol!="undefined"&&d[Symbol.iterator]||d["@@iterator"];if(!m){if(Array.isArray(d)||(m=U(d))||I&&d&&typeof d.length=="number"){m&&(d=m);var f=0,y=function(){};return{s:y,n:function(){return f>=d.length?{done:!0}:{done:!1,value:d[f++]}},e:function(l){throw l},f:y}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var P=!0,E=!1,j;return{s:function(){m=m.call(d)},n:function(){var l=m.next();return P=l.done,l},e:function(l){E=!0,j=l},f:function(){try{!P&&m.return!=null&&m.return()}finally{if(E)throw j}}}}C.exports=s,C.exports.__esModule=!0,C.exports.default=C.exports}}]);
