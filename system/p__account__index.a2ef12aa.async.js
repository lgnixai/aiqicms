"use strict";(self.webpackChunkAnQiCMS=self.webpackChunkAnQiCMS||[]).push([[1335],{32366:function(K,S,e){e.r(S),e.d(S,{default:function(){return N}});var b=e(90228),i=e.n(b),w=e(26068),p=e.n(w),C=e(87999),c=e.n(C),F=e(48305),M=e.n(F),T=e(65200),$=e(47833),G=e(74133),f=e(96640),j=e(32064),v=e(34206),R=e(91827),m=e(75271),y={},a=e(52676),B=function(){var x=(0,j.useModel)("@@initialState"),t=x.initialState,Q=x.setInitialState,V=(0,m.useState)({}),P=M()(V,2),E=P[0],U=P[1],L=(0,m.useState)(!0),A=M()(L,2),O=A[0],z=A[1],s=(0,j.useIntl)();(0,m.useEffect)(function(){U((t==null?void 0:t.currentUser)||{}),z(!1)},[]);var D=function(){var h=c()(i()().mark(function o(){var u,r;return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t==null||(u=t.fetchUserInfo)===null||u===void 0?void 0:u.call(t);case 2:if(r=n.sent,!r){n.next=7;break}return n.next=6,Q(function(d){return p()(p()({},d),{},{currentUser:r})});case 6:U(r);case 7:case"end":return n.stop()}},o)}));return function(){return h.apply(this,arguments)}}(),H=function(){var h=c()(i()().mark(function o(u){var r,g;return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:r=Object.assign((t==null?void 0:t.currentUser)||{},u),g=v.ZP.loading(s.formatMessage({id:"setting.system.submitting"}),0),(0,T.P7)(r).then(function(){var J=c()(i()().mark(function I(Z){return i()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(Z.code!==0){l.next=6;break}return v.ZP.success(s.formatMessage({id:"account.base.success"})),l.next=4,D();case 4:l.next=7;break;case 6:v.ZP.error(Z.msg);case 7:case"end":return l.stop()}},I)}));return function(I){return J.apply(this,arguments)}}()).finally(function(){g()});case 3:case"end":return d.stop()}},o)}));return function(u){return h.apply(this,arguments)}}();return(0,a.jsx)($.f,{children:(0,a.jsx)(R.Z,{title:s.formatMessage({id:"account.base.change-password"}),bordered:!1,children:(0,a.jsx)("div",{className:y.baseView,children:O?null:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:y.left,children:(0,a.jsxs)(G.A,{layout:"vertical",onFinish:H,submitter:{resetButtonProps:{style:{display:"none"}},submitButtonProps:{children:s.formatMessage({id:"account.base.update"})}},initialValues:E,hideRequiredMark:!0,children:[(0,a.jsx)(f.Z,{width:"md",name:"user_name",label:s.formatMessage({id:"account.base.username"}),rules:[{required:!0,message:s.formatMessage({id:"account.base.username.required"})}]}),(0,a.jsx)(f.Z.Password,{width:"md",name:"old_password",label:s.formatMessage({id:"account.base.password"}),placeholder:s.formatMessage({id:"account.base.password.description"})}),(0,a.jsx)(f.Z.Password,{width:"md",name:"password",label:s.formatMessage({id:"account.base.password.new"})})]})})})})})})},N=B}}]);
